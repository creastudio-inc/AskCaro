Title,LongDescription,answer
how add reference system.web.optimization mvc-3-converted to-4 app,i'm trying use new bundling feature project i recently converted from mvc 3 mvc 4 beta requires line code global.asax bundletable.bundles.registertemplatebundles which requires using system.web.optimization top.when i do i get red squiggly lines say you missing assembly reference when i try add reference click net tab dialog sort from z i do see system.web.optimization.how do i add ref my project thanks,With the final released version of ASP.Net MVC 4 the approach is as follows:Install Microsoft.AspNet.Web.Optimization via nuget (as it is not installed by the framework)install-package Microsoft.AspNet.Web.OptimizationCreate the bundle in Global.asax Application_Start:var scripts = new ScriptBundle("~/MyBundle");scripts.IncludeDirectory("~/Scripts/MyDirectory" "*.js");BundleTable.Bundles.Add(scripts);Add the "System.Web.Optimization" namespace to the "Views" web.config: &lt;pages pageBaseType="System.Web.Mvc.WebViewPage"&gt;&lt;namespaces&gt;&lt;add namespace="System.Web.Optimization" /&gt;&lt;/namespaces&gt;&lt;/pages&gt;In your view.cshtml add an include to the bundle created in the last step:@Scripts.Render("~/MyBundle")In debug mode all script files in your directory will render individually; in release mode they will be bundled and minified.
styles.render mvc4,net mvc4 project how does styles.render works i mean styles.render content css which file calling i dont have file folder called css inside my content folder,Watch out for case sensitivity. If you have a file   /Content/bootstrap.cssand you redirect in your Bundle.config to   .Include("~/Content/Bootstrap.css")it will not load the css.
how add web api existing asp.net mvc 4 web application project,i wish add asp.net web api asp.net mvc 4 web application project developed visual studio 2012 which steps must i perform add functioning web api project i'm aware i need controller deriving from apicontroller about all i know.let me know i need provide more details,UPDATE 11/22/2013 - this is the latest WebApi package:Install-Package Microsoft.AspNet.WebApiOriginal answer (this is an older WebApi package)Install-Package AspNetWebApiMore details.
mvc4 stylebundle resolving images,my question similar asp.net mvc 4 minification amp background imagesexcept i want stick mvc own bundling i can i'm having brain crash trying figure out what correct pattern specifying style bundles standalone css image sets jquery ui work.i have typical mvc site structure content css which contains my base css stylescss within css folder i also have subfolders jquery ui which contains its css file plus images folder image paths jquery ui css relative folder i don't want mess them.as i understand when i specify stylebundle i need specify virtual path which does also match real content path because assuming i'm ignoring routes content iis would try resolve path physical file so i'm specifying bundles.add new stylebundle content styles jquery ui include content css jquery ui css rendered using styles.render content styles jquery ui i can see request going out http localhost mysite content styles jquery ui v nl_6hpftzoqrts9nwrtjq0vqfynhmjy5eopxsk8cxmg1this returning correct minified css response browser sends request relatively linked image http localhost mysite content styles images ui bg highlight soft_100_eeeeee_1x100.pngwhich 404.i understand last part my url jquery ui extensionless url handler my bundle so i can see why relative request image simply styles images so my question what correct way handling situation,Grinn / ThePirat solution works well. I did not like that it new'd the Include method on bundle and that it created temporary files in the content directory.  (they ended up getting checked in deployed then the service wouldn't start!)So to follow the design of Bundling I elected to perform essentially the same code but in an IBundleTransform implementation::class StyleRelativePathTransform: IBundleTransform{public StyleRelativePathTransform(){}public void Process(BundleContext context BundleResponse response){response.Content = String.Empty;Regex pattern = new Regex(@"url\s*\(\s*([""']?)([^:)]+)\1\s*\)" RegexOptions.IgnoreCase);// open each of the filesforeach (FileInfo cssFileInfo in response.Files){if (cssFileInfo.Exists){// apply the RegEx to the file (to change relative paths)string contents = File.ReadAllText(cssFileInfo.FullName);MatchCollection matches = pattern.Matches(contents);// Ignore the file if no match if (matches.Count &gt; 0){string cssFilePath = cssFileInfo.DirectoryName;string cssVirtualPath = context.HttpContext.RelativeFromAbsolutePath(cssFilePath);foreach (Match match in matches){// this is a path that is relative to the CSS filestring relativeToCSS = match.Groups[2].Value;// combine the relative path to the cssAbsolutestring absoluteToUrl = Path.GetFullPath(Path.Combine(cssFilePath relativeToCSS));// make this server relativestring serverRelativeUrl = context.HttpContext.RelativeFromAbsolutePath(absoluteToUrl);string quote = match.Groups[1].Value;string replace = String.Format("url({0}{1}{0})" quote serverRelativeUrl);contents = contents.Replace(match.Groups[0].Value replace);}}// copy the result into the response.response.Content = String.Format("{0}\r\n{1}" response.Content contents);}}}}And then wrapped this up in a Bundle Implemetation:public class StyleImagePathBundle : Bundle{public StyleImagePathBundle(string virtualPath): base(virtualPath){base.Transforms.Add(new StyleRelativePathTransform());base.Transforms.Add(new CssMinify());}public StyleImagePathBundle(string virtualPath string cdnPath): base(virtualPath cdnPath){base.Transforms.Add(new StyleRelativePathTransform());base.Transforms.Add(new CssMinify());}}Sample Usage:static void RegisterBundles(BundleCollection bundles){...bundles.Add(new StyleImagePathBundle("~/bundles/Bootstrap").Include("~/Content/css/bootstrap.css""~/Content/css/bootstrap-responsive.css""~/Content/css/jquery.fancybox.css""~/Content/css/style.css""~/Content/css/error.css""~/Content/validation.css"));Here is my extension method for RelativeFromAbsolutePath:   public static string RelativeFromAbsolutePath(this HttpContextBase context string path){var request = context.Request;var applicationPath = request.PhysicalApplicationPath;var virtualDir = request.ApplicationPath;virtualDir = virtualDir == "/" ? virtualDir : (virtualDir + "/");return path.Replace(applicationPath virtualDir).Replace(@"\" "/");}
how pass json post data web api method object,asp.net mvc4 web api application defines post method save customer.customer passed json format post request body.customer parameter post method contains null values properties.how fix so posted data passed customer object possible content type application x www form urlencoded should used since i dont know how change javascript method which posts form.controller public class customerscontroller apicontroller public object post frombody customer customer return request.createresponse httpstatuscode.oknew customer customer public class customer public string company name get set public string contact name get set request post http localhost 52216/api customers http/1.1accept application json text javascript q 0.01x-requested xmlhttprequestcontent type application x www form urlencoded charset utf-8 contact name sdfsd company name ssssd,Working with POST in webapi can be tricky!Would like to add to the already correct answer..Will focus specifically on POST as dealing with GET is trivial. I don't think many would be searching around for resolving an issue with GET with webapis. Anyways..If your question is - In MVC Web Api how to- - Use custom action method names other than the generic HTTP verbs? - Perform multiple posts? - Post multiple simple types? - Post complex types via jQuery?Then the following solutions may help:First to use Custom Action Methods in Web API add a web api route as:public static void Register(HttpConfiguration config){config.Routes.MapHttpRoute(name: "ActionApi"routeTemplate: "api/{controller}/{action}");}And then you may create action methods like:[HttpPost]public string TestMethod([FromBody]string value){return "Hello from http post web api controller: " + value;}Now fire the following jQuery from your browser console$.ajax({type: 'POST'url: 'http://localhost:33649/api/TestApi/TestMethod'data: {'':'hello'}contentType: 'application/x-www-form-urlencoded'dataType: 'json'success: function(data){ console.log(data) }});Second to perform multiple posts It is simple create multiple action methods and decorate with the [HttpPost] attrib. Use the [ActionName("MyAction")] to assign custom names etc. Will come to jQuery in the fourth point belowThird First of all posting multiple SIMPLE types in a single action is not possible.Moreover there is a special format to post even a single simple type (apart from passing the parameter in the query string or REST style). This was the point that had me banging my head with Rest Clients (like Fiddler and Chrome's Advanced REST client extension) and hunting around the web for almost 5 hours when eventually the following URL proved to be of help. Will quote the relevant content for the link might turn dead!Content-Type: application/x-www-form-urlencodedin the request header and add a = before the JSON statement:={"Name":"Turbo Tina""Email":"na@Turbo.Tina"}PS: Noticed the peculiar syntax?http://forums.asp.net/t/1883467.aspx?The+received+value+is+null+when+I+try+to+Post+to+my+Web+ApiAnyways let us get over that story. Moving on:Fourth posting complex types via jQuery ofcourse $.ajax() is going to promptly come in the role:Let us say the action method accepts a Person object which has an id and a name. So from javascript:var person = { PersonId:1 Name:"James" }$.ajax({type: 'POST'url: 'http://mydomain/api/TestApi/TestMethod'data: JSON.stringify(person)contentType: 'application/json; charset=utf-8'dataType: 'json'success: function(data){ console.log(data) }});And the action will look like:[HttpPost]public string TestMethod(Person person){return "Hello from http post web api controller: " + person.Name;}All of the above worked for me!! Cheers!
validateantiforgerytoken purpose explanation example,could you explain validateantiforgerytoken purpose show me example about validateantiforgerytoken mvc 4 i could find any examples which explain attribute,The basic purpose of ValidateAntiForgeryToken attribute is to prevent cross-site request forgery attacks.A cross-site request forgery is an attack in which a harmful script element malicious command or code is sent from the browser of a trusted user. For more information on this please visithttp://www.asp.net/mvc/overview/security/xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages.It is simple to use you need to decorate method with ValidateAntiForgeryToken attribute as below:[HttpPost]  [ValidateAntiForgeryToken]  public ActionResult CreateProduct(Product product)  {  if (ModelState.IsValid){//your logic   }  return View(ModelName);}It is derived from System.Web.Mvc namespace.And in your view add this code to add the token so it is used to validate the form upon submission.@Html.AntiForgeryToken()
bundler including min files,i have weird issue mvc4 bundler including files extension min.jsin my bundleconfig class i declarepublic static void registerbundles bundlecollection bundles bundles.add new scriptbundle scripts jquery include scripts jquery-1.8.0.js include scripts jquery.tmpl.min.js my view i declare&lt html&gt lt head&gt scripts.render scripts jquery lt head&gt lt body&gt test&lt body&gt lt html&gt when renders only renders&lt html&gt lt head&gt lt script src scripts jquery-1.8.0.js gt lt script&gt lt head&gt lt body&gt test&lt body&gt lt html&gt i rename jquery.tmpl.min.js jquery.tmpl.js update path bundle accordingly both scripts rendered correctly.is some config setting causing ignore min.js files,Microsoft implies the following behavior (and I prefer to follow it in my projects):short versionYou have both debug and minified versions of a script in your project under the same folder:script.jsscript.min.jsYou add only script.js to a bundle in your code.As a result you will automatically have the script.js included in DEBUG mode and script.min.js in RELEASE mode.long versionYou can have also .debug.js version. In that case the file is included in the following priority in DEBUG:script.debug.jsscript.jsin RELEASE:script.min.jsscript.jsnoteAnd by the way the only reason to have a .min versions of your scripts in MVC4 is the case when the minified version can not be processed automatically. For example the following code can not be obfuscated automatically:if (DEBUG) console.log("Debug message");In all the other cases you can go with just a debug version of your script.
how accept file post,i'm using asp.net mvc 4 webapi beta build rest service i need able accept posted images files from client applications possible using webapi below how action i am currently using does anyone know example how should work httppost public string profileimagepost httppostedfile profileimage string extensions jpg jpeg gif bmp png extensions.any x gt x.equals path.getextension profileimage.filename.tolower stringcomparison.ordinalignorecase throw new httpresponseexception invalid file type httpstatuscode.badrequest other code goes herereturn path image.png,I'm surprised that a lot of you seem to want to save files on the server. Solution to keep everything in memory is as follows:[HttpPost Route("api/upload")]public async Task&lt;IHttpActionResult&gt; Upload(){if (!Request.Content.IsMimeMultipartContent())throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType); var provider = new MultipartMemoryStreamProvider();await Request.Content.ReadAsMultipartAsync(provider);foreach (var file in provider.Contents){var filename = file.Headers.ContentDisposition.FileName.Trim('\"');var buffer = await file.ReadAsByteArrayAsync();//Do whatever you want with filename and its binary data.}return Ok();}
connection string named 39 myentities 39 could found application config file,i am using entity framework asp.net mvc 4 build applicationmy solution split two projects class library includes my data model edmx file few custom interfacesthe container mvc project references class library abovemy problem when i attempt use myentites dbcontext i get following error connection string named myentities could found application config file.i guess problem has something do fact connection string lies within app.config class library rather than mvc project.does anyone have any suggestions,You are right this happens because the class library (where the .edmx file) is not your startup / main project.You'll need to copy the connection string to the main project config file.Incase your startup / main project does not have a config file (like it was in my Console Application case) just add one (Startup project - Add New Item -> Application Configuration File).More relevant information can be found here:MetadataException: Unable to load the specified metadata resource
how make custom error pages work asp.net mvc 4,i want custom error page shown 500 404 403 here what i have done enabled custom errors web.config follows lt customerrors mode defaultredirect views shared error.cshtml gt lt error statuscode 403 redirect views shared unauthorizedaccess.cshtml gt lt error statuscode 404 redirect views shared filenotfound.cshtml gt lt customerrors&gt registered handleerrorattribute global action filter filterconfig class follows public static void registerglobalfilters globalfiltercollection filters filters.add new customhandleerrorattribute filters.add new authorizeattribute created custom error page each above messages default one 500 already available out box.declared each custom error page view model page system.web.mvc.handleerrorinfofor 500 shows custom error page others doesn't something i am missing does look like all displaying custom errors i read through code onexception method handleerrorattribute class handling only 500.what do i have do handle other errors,I've done pablo solution and I always had the error (MVC4)  The view 'Error' or its master was not found or no view engine supports the searched location.To get rid of this remove the line  filters.Add(new HandleErrorAttribute());in FilterConfig.cs
what references.js used,what references.js file used new asp.net mvc 4 project,MSDN documentation: JavaScript IntelliSenseIn brief _references.js stores the list of JS files paths for which you want the Visual Studio to gather and build the intelisense (aka "code complete"). The VS project adds there some common JS libraries like jQuery to build the intellisense for it. You can add a reference to your custom JS file in form like this: /// &lt;reference path="MyScriptFile.js" /&gt;
owin startup class missing,i'm getting error my project able find reference owin startup class i've even installed all owin reference packages through nuget still getting same issue i'm using visual studio 2012 mvc4 following errors occurred while attempting load app.no assembly found containing owinstartupattribute assembly found containing startup assemblyname startup class disable owin startup discovery add appsetting owin automaticappstartup value false your webconfig specify owin startup assembly class method add appsetting owin appstartup fully qualified startup class configuration method name your webconfig,In our project we didn't need the OWIN functionality so we removed all the owin references from the initial ASP.NET MVC template project. The problem occured after removing the OWIN startup class.The problem was the extra owin dll's in my bin folder. When I deleted them the problem was resolved. You should delete them by deleting the bin folder. Clean Solution does not delete these dlls.Somehow IIS still executes the OWIN dll's when they are in the bin folder.
why use scripts.render ldquo bundles jquery&rdquo,how does scripts.render bundles jquery differ from just referencing script from html like this&lt script src bundles jquery.js type text javascript gt lt script&gt any performance gains,You can also use:@Scripts.RenderFormat("&lt;script type=\"text/javascript\" src=\"{0}\"&gt;&lt;/script&gt;" "~/bundles/mybundle")To specify the format of your output in a scenario where you need to use Charset Type etc.
how do i set cookie httpclient 39 s httprequestmessage,i am trying use web api httpclient do post endpoint requires login form http cookie identifies account only something ifdef'ed out release version how do i add cookie httprequestmessage,The accepted answer is the correct way to do this in most cases. However there are some situations where you want to set the cookie header manually. Normally if you set a "Cookie" header it is ignored but that's because HttpClientHandler defaults to using its CookieContainer property for cookies. If you disable that then by setting UseCookies to false you can set cookie headers manually and they will appear in the request e.g.var baseAddress = new Uri("http://example.com");using (var handler = new HttpClientHandler { UseCookies = false })using (var client = new HttpClient(handler) { BaseAddress = baseAddress }){var message = new HttpRequestMessage(HttpMethod.Get "/test");message.Headers.Add("Cookie" "cookie1=value1; cookie2=value2");var result = await client.SendAsync(message);result.EnsureSuccessStatusCode();}
mvc4 datatype.date editorfor won 39 t display date value chrome fine internet explorer,i'm using datatype.date attribute my model editorfor my view working fine internet&nbsp explorer&nbsp 8 internet&nbsp explorer&nbsp 9 google chrome showing date picker instead displaying value just displays month day year faded gray text.why won't google chrome display value model datatype datatype.date public nullable&lt system.datetime gt estpurchasedate get set view lt td class fieldlabel gt est pur date&lt td&gt lt td class field gt html.editorfor m gt m.estpurchasedate lt td&gt,In MVC5.2 add Date.cshtml to folder ~/Views/Shared/EditorTemplates:@model DateTime?@{IDictionary&lt;string object&gt; htmlAttributes;object objAttributes;if (ViewData.TryGetValue("htmlAttributes" out objAttributes)){htmlAttributes = objAttributes as IDictionary&lt;string object&gt; ?? HtmlHelper.AnonymousObjectToHtmlAttributes(objAttributes);}else{htmlAttributes = new RouteValueDictionary();}htmlAttributes.Add("type" "date");String format = (Request.UserAgent != null &amp;&amp; Request.UserAgent.Contains("Chrome")) ? "{0:yyyy-MM-dd}" : "{0:d}";@Html.TextBox("" Model format htmlAttributes)}
when should i use async controllers asp.net mvc,i have some concerns using async actions asp.net mvc when does improve performance my apps when does good use async action everywhere asp.net mvc regarding awaitable methods shall i use async await keywords when i want query database via ef nhibernate other orm how many times can i use await keywords query database asynchronously one single action method,You may find my MSDN article on the subject helpful; I took a lot of space in that article describing when you should use async on ASP.NET not just how to use async on ASP.NET.  I have some concerns using async actions in ASP.NET MVC. When it improves performance of my apps and when - not.First understand that async/await is all about freeing up threads. On GUI applications it's mainly about freeing up the GUI thread so the user experience is better. On server applications (including ASP.NET MVC) it's mainly about freeing up the request thread so the server can scale.In particular it won't:Make your individual requests complete faster. In fact they will complete (just a teensy bit) slower.Return to the caller/browser when you hit an await. await only "yields" to the ASP.NET thread pool not to the browser.  First question is - is it good to use async action everywhere in ASP.NET MVC?I'd say it's good to use it everywhere you're doing I/O. It may not necessarily be beneficial though (see below).However it's bad to use it for CPU-bound methods. Sometimes devs think they can get the benefits of async by just calling Task.Run in their controllers and this is a horrible idea. Because that code ends up freeing up the request thread by taking up another thread so there's no benefit at all (and in fact they're taking the penalty of extra thread switches)!  Shall I use async/await keywords when I want to query database (via EF/NHibernate/other ORM)?You could use whatever awaitable methods you have available. Right now most of the major players support async but there are a few that don't. If your ORM doesn't support async then don't try to wrap it in Task.Run or anything like that (see above).Note that I said "you could use". If you're talking about ASP.NET MVC with a single database backend then you're (almost certainly) not going to get any scalability benefit from async. This is because IIS can handle far more concurrent requests than a single instance of SQL server (or other classic RDBMS). However if your backend is more modern - a SQL server cluster Azure SQL NoSQL etc - and your backend can scale and your scalability bottleneck is IIS then you can get a scalability benefit from async.  Third question - How many times I can use await keywords to query database asynchronously in ONE single action method?As many as you like. However note that many ORMs have a one-operation-per-connection rule. In particular EF only allows a single operation per DbContext; this is true whether the operation is synchronous or asynchronous.Also keep in mind the scalability of your backend again. If you're hitting a single instance of SQL Server and your IIS is already capable of keeping SQLServer at full capacity then doubling or tripling the pressure on SQLServer is not going to help you at all.
asp.net bundles how disable minification,i have debug true both my web.config s i just don't want my bundles minified nothing i do seems disable i've tried enableoptimisations false here my code javascriptbundles.add new scriptbundle bundles mainjs include scripts regular lib mvc jquery.validate.unobtrusive.js include scripts regular lib mvc jquery.validate include scripts regular lib bootstrap.js includedirectory scripts regular modules js true includedirectory scripts regular pages js true includedirectory scripts regular misc js true cssbundles.add new stylebundle bundles maincss include content css regular lib bootstrap.css includedirectory content css regular modules css true includedirectory content css regular pages css true,Conditional compilation directives are your friend:#if DEBUGvar jsBundle = new Bundle("~/Scripts/js");#elsevar jsBundle = new ScriptBundle("~/Scripts/js");#endif
asp.net 4.5 has been registered web server,my win 7 development machine order use sql express instance instead localdb installed default i unchecked use iis express my mvc 4 project properties page web tab i got following error asp.net 4.5 has been registered web server you need manually configure your web server asp.net 4.5 order your site run correctly.i verified asp.net activated within iis features.please what could done resolve,On Windows 8.1 since .NET 4.5 is built-in the fix is to run this from an administrative command-prompt:dism.exe /Online /Enable-Feature /all /FeatureName:IIS-ASPNET45
test method inconclusive test wasn 39 t run error,i have test class below i have posted sample test from test classnamespace adminportal.tests.controller test.customer testclass public class businessunitcontrollertests private ibusinessunitrepository mockbusinessunitrepository private businessunitcontroller controller testinitialize public void testinitialize mockbusinessunitrepository mockrepository.generatemock lt ibusinessunitrepository&gt controller new businessunitcontroller mockbusinessunitrepository testcleanup public void testcleanup mockbusinessunitrepository null controller.dispose controller null region index action tests testmethod public void index action calls getallbusinessunit mockbusinessunitrepository.stub x gt x.getallbusinessunit controller.index mockbusinessunitrepository.assertwascalled x gt x.getallbusinessunit when i run project i get following screeni checked references test project has reference main project.any idea why test running saying were inconclusive edit 1 i saw post here changed my test setting default processor architecture x64 still doesn't work,Just in case none of the above options worked for anyone I fixed my instance of this error by noticing a corrupt entry in my App.Config due to a missing nuget package in the test project.
razor view throwing ldquo name 39 model 39 does exist current context&rdquo,after significant refactoring my mvc 4 application razor shows error while debugging views name model does exist current context.this offending line code model icollection&lt datasourcebyactive&gt i know usage model correct.why happening how can i fix,make sure you have the following in both your site web.config and views directory web.config in the appSettings section&lt;add key="webpages:Version" value="2.0.0.0" /&gt;For MVC5 use:&lt;add key="webpages:Version" value="3.0.0.0" /&gt;(And it only exists in the main Web.config file.)
how can i disable vwd js artery vs.net 2013,i've upgraded vs.net 2013 now every time i start debug asp.net mvc4 app iis some how vwd js artery created script interfering my requirejs setup crashes jquery reference does anyone know how can i get rid script vwd js arterywindow.vwdtempjquery window.jquery window window.jquery window null window.vwdtempjson window.json jquery v1.8.2 jquery.com jquery.org license restore original jquery references.window.jquery window window.vwdtempjquery window.vwdtempjquery null restore original json.if window.json window.vwdtempjson window.json window.vwdtempjson le has been fixed visual studio 2013 rtm,I found that it was still running until I actually added a value for it in the Web.config appSettings to turn it off.&lt;add key="vs:EnableBrowserLink" value="false" /&gt;
webapi 39 s ldquo message&rdquo ldquo error has occurred&rdquo iis7 iis express,i'm working asp.net mvc 4 webapi am having lot fun running my local computer iis express i've configured iis express serve remote machines too so other my company using my computer our webserver after deciding less than optimal solution we decided put webapi remote server after installing net 45 when i use fiddler sent post controller my local machine returns correct response yet when i change domain webserver running iis7 same post returns cryptic message error has occurred message anyone have any idea what could going,Basically:Use IncludeErrorDetailPolicy instead if CustomErrors doesn't solve it for you (e.g. if you're ASP.NET stack is >2012):GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;Note: Be careful returning detailed error info can reveal sensitive information to 'hackers'. See Simon's comment on this answer below.TL;DR versionFor me CustomErrors didn't really help. It was already set to Off but I still only got a measly an error has occurred message. I guess the accepted answer is from 3 years ago which is a long time in the web word nowadays. I'm using Web API 2 and ASP.NET 5 (MVC 5) and Microsoft has moved away from an IIS-only strategy while CustomErrors is old skool IIS ;).Anyway I had an issue on production that I didn't have locally. And then found I couldn't see the errors in Chrome's Network tab like I could on my dev machine. In the end I managed to solve it by installing Chrome on my production server and then browsing to the app there on the server itself (e.g. on 'localhost'). Then more detailed errors appeared with stack traces and all.Only afterwards I found this article from Jimmy Bogard (Note: Jimmy is mr. AutoMapper!). The funny thing is that his article is also from 2012 but in it he already explains that CustomErrors doesn't help for this anymore but that you CAN change the 'Error detail' by setting a different IncludeErrorDetailPolicy in the global WebApi configuration (e.g. WebApiConfig.cs):GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;Luckily he also explains how to set it up that webapi (2) DOES listen to your CustomErrors settings. That's a pretty sensible approach and this allows you to go back to 2012 :P.Note: The default value is 'LocalOnly' which explains why I was able to solve the problem the way I described before finding this post. But I understand that not everybody can just remote to production and startup a browser (I know I mostly couldn't until I decided to go freelance AND DevOps).
version wildcard mvc4 bundle,mvc 4 we have bundles while defining bundles we can use wildcards like all files folder.in example below what does version mean public static void registerbundles bundlecollection bundles bundles.add new scriptbundle bundles jquery include scripts jquery version js,This bundle is able to accomodate version numbers in script names. So updating jQuery to a new version in your application (via NuGet or manually) doesn't require any code / markup changes.See the following link for more information on bundling: http://weblogs.asp.net/jgalloway/archive/2012/08/16/asp-net-4-5-asp-net-mvc-4-asp-net-web-pages-2-and-visual-studio-2012-web-developer-features.aspx
asp.net mvc framework 4.5 css bundles does work hosting,i am runing app app harbor written mvc4.a bundle css files doesnt work my local computer debug mode i see code app i see files app works expected lt link href content css home basic jquery slider.css rel stylesheet gt lt link href content css home home.css rel stylesheet gt when i upload app appharbor i see bundle code app doesnt work lt link href content css home v zhvoipunuvcozhjybcqwpmlozayor4te6k-pm29whqi1 rel stylesheet gt when i browse link href i get 403 forbidden access denied.how troubleshoot,This issue is by default .NET does not "process" requests that have a .js or .css extension.There are two fixes for this (you only need to do ONE)A) Remove the extensions from the bundle names. (recommended) This will cause .NET to process the request and run it through the BundleModule.B) Add this to your web.config in the system.webServer section which will cause .NET to run .js and .css requests through the BundleModule.&lt;modules runAllManagedModulesForAllRequests="true"&gt;  &lt;remove name="BundleModule" /&gt;  &lt;add name="BundleModule" type="System.Web.Optimization.BundleModule" /&gt;&lt;/modules&gt;Big shout out to Ray Moro who figured out the actual cause and shared it with me on my blog:http://blog.cdeutsch.com/2012/11/fixing-404-errors-for-aspnet-mvc-apps.html
jsonp asp.net web api,i am working creating new set services asp.mvc mvc 4 using web api so far great i have created service gotten work now i am trying consume using jquery i can get back json string using fiddler seems ok because service exists separate site trying call jquery errors allowed so clearly case where i need use jsonp.i know web api new i'm hoping someone out can help me.how do i make call web api method using jsonp,Here is an updated version of the JsonpMediaTypeFormatter for use with WebAPI RC:public class JsonpMediaTypeFormatter : JsonMediaTypeFormatter{private string callbackQueryParameter;public JsonpMediaTypeFormatter(){SupportedMediaTypes.Add(DefaultMediaType);SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/javascript"));MediaTypeMappings.Add(new UriPathExtensionMapping("jsonp" DefaultMediaType));}public string CallbackQueryParameter{get { return callbackQueryParameter ?? "callback"; }set { callbackQueryParameter = value; }}public override Task WriteToStreamAsync(Type type object value Stream stream HttpContent content TransportContext transportContext){string callback;if (IsJsonpRequest(out callback)){return Task.Factory.StartNew(() =&gt;{var writer = new StreamWriter(stream);writer.Write(callback + "(");writer.Flush();base.WriteToStreamAsync(type value stream content transportContext).Wait();writer.Write(")");writer.Flush();});}else{return base.WriteToStreamAsync(type value stream content transportContext);}}private bool IsJsonpRequest(out string callback){callback = null;if (HttpContext.Current.Request.HttpMethod != "GET")return false;callback = HttpContext.Current.Request.QueryString[CallbackQueryParameter];return !string.IsNullOrEmpty(callback);}}
how can i pass parameters partial view mvc 4,i have link like lt href member memberhome profile id gt lt span&gt profile&lt span&gt lt a&gt when i click call partial page switch string viewbag.details case profile html.partial profile break partial page profile contains html.action action controller model.paramter example html.action memberprofile member new id 1 id always changingmy doubt how can i pass id model.parameter part my controllers public actionresult memberhome string id viewbag.details id return view public actionresult memberprofile int id 0 memberdata md new member getmemberprofile id return partialview profilepage md,One of The Shortest method i found for single value while i was searching for myself is just passing single string and setting string as model in view like this.In your Partial calling side@Html.Partial("ParitalAction" "String data to pass to partial")And then binding the model with Partial View like this @model stringand the using its value in Partial View like this@ModelYou can also play with other datatypes like array int or more complex data types like IDictionary or something else.Hope it helps
could load file assembly 39 system.net.http.formatting 39 one its dependencies system cannot find path specified,i have small mvc app i use practice reasons now i am encountering error every time i try debug could load file assembly system.net.http.formatting one its dependencies system cannot find path specified.i ve googled cannot find solution i'm using net 4.5.it can't dll file because i'm using net 45,Remove all code references to System.Net.*in the package window Install-Package Microsoft.AspNet.WebApi.ClientClean and rebuild your project
required anti forgery form field ldquo requestverificationtoken&rdquo present error user registration,i am using membership.create user function following error occurring required anti forgery form field requestverificationtoken presenthow can i fix,In my case I had this in my web.config:&lt;httpCookies requireSSL="true" /&gt;But my project was set to not use SSL. Commenting out that line or setting up the project to always use SSL solved it.
how add second css class conditional value razor mvc 4,while microsoft has created some automagic rendering html attributes razor mvc4 took me quite some time find out how render second css class element based conditional razor expression i would like share you.based model property model.details i want show hide list item details div should shown otherwise should hidden using jquery all i need do add class show hide respectively other purposes i also want add another class details so my mark up should lt div class details show gt details lt div&gt lt div class details hide gt details lt div&gt below i show some failed attempts resulting mark up assuming details lt div model.details.count gt 0 class details show class details hide gt render lt div class details hide gt lt div model.details.count gt 0 class details show class details hide gt render lt div class details hide&amp quot gt lt div model.details.count gt 0 class details show class details hide gt render lt div class details hide&amp 39 gt none correct mark up,This:&lt;div class="details @(@Model.Details.Count &gt; 0 ? "show" : "hide")"&gt;will render this:&lt;div class="details hide"&gt;and is the mark-up I want.
how call another controller action from controller mvc,i need call controller b action fileuploadmsgview from controller need pass parameter code its going controller b fileuploadmsgview controllera private void test try some codes hereviewbag.fileuploadmsg file uploaded successfully viewbag.fileuploadflag 2 redirecttoaction b fileuploadmsgview new fileuploadmsg file uploaded successfully controllerb receiving part public actionresult fileuploadmsgview string fileuploadmsg return view,As @mxmissile says in the comments to the accepted answer you shouldn't new up the controller because it will be missing dependencies set up for IoC and won't have the HttpContext.Instead you should get an instance of your controller like this:var controller = DependencyResolver.Current.GetService&lt;ControllerB&gt;();controller.ControllerContext = new ControllerContext(this.Request.RequestContext controller);
how should i pass multiple parameters asp.net web api get,i am using net mvc4 web api hopefully implement restful api i need pass few parameters system have perform some action return list objects results specifically i am passing two dates returning records fall between them i'm also keeping track records returned so subsequent calls do get reprocessed system.i ve considered few approaches serializing params one single json string picking apart api.http forums.asp.net t/1807316.aspx/1pass params query string.what best way pass multiple query parameters restful api defining params route api controller/date1/date2using post inherently lets me pass object params.researching odata since web api currently supports i haven't done much yet so i'm very familiar it.it seems proper rest practices indicate when data pulled you should use get however get should also nullipotent produces side effects i wonder my specific implementation violates since i mark records api system hence i am producing side effects.it also led me question supporting variable parameters input parameter list changes would tedious have re define your route choice 3 happens lot what might happen parameters defined run time any case my specific implementation which choice any seems best,I think the easiest way is to simply use AttributeRouting.It's obvious within your controller why would you want this in your Global WebApiConfig file?Example:[Route("api/YOURCONTROLLER/{paramOne}/{paramTwo}")]public string Get(int paramOne int paramTwo){return "The [Route] with multiple params worked";}The {} names need to match your parameters. Simple as that now you have a separate GET that handles multiple params in this instance.
windows update caused mvc3 mvc4 stop working,am i only one who installed windows update 8.1 october 15 suddenly mvc stop working because warning warning1 could resolve reference could locate assembly system.web.mvc version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 processorarchitecture msil check make sure assembly exists disk reference required your code you may get compilation errors.it seems windows update installs newer version mvc version number 4.0.0.1 removes old version from program files folder.someone know how fix without crawling each project,We had to manually touch each .csproj to update the version from 4.0.0.0 to 4.0.0.1 to get our builds going.  Quite a pain.New references should look like:&lt;Reference Include="System.Web.Mvc Version=4.0.0.1 Culture=neutral PublicKeyToken=31bf3856ad364e35 processorArchitecture=MSIL" /&gt;
where can i find nuget package upgrading system.web.http v5.0.0.0,just upgraded asp.net mvc4 project use unity.webapi version 5.0.0.0 requires system.web.http v 5.0.0.0 per following error assembly unity.webapi version 5.1.0.0 culture neutral publickeytoken 43da31bc42a85347 uses system.web.http version 5.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 which has higher version than referenced assembly system.web.http version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 i am currently referencing system.web.http v4.0 have following nuget packages upgraded respective latest versions antlrv3microsoft asp.net universal providers microsoft.web.infrastructure microsoft asp.net mvc microsoft asp.net razor microsoft asp.net universal providers core librariesmicrosoft asp.net universal providersmicrosoft asp.net web api 2 clientmicrosoft asp.net web api 2 core microsoft asp.net web api 2 web hostmicrosoft asp.net web api 2microsoft asp.net web pagemicrosoft.web.infrastructurewebgrease via nuget i have listed relevant javascript libraries micrososft.jquery.unobtrusive validation etc what nuget package upgrade system.web.http do i have do manually,I have several projects in a solution.  For some of the projects I previously added the references manually.  When I used NuGet to update the WebAPI package those references were not updated automatically.  I found out that I can either manually update those reference so they point to the v5 DLL inside the Packages folder of my solution or do the following. Go to the "Manage NuGet Packages" Select the Installed Package "Microsoft ASP.NET Web API 2.1"Click Manage and check the projects that I manually added before.
how ldquo warm up&rdquo entity framework when does get ldquo cold&rdquo,answer my second question winter.preface i've been doing lot research entity framework recently something keeps bothering me its performance when queries warmed up so called cold queries i went through performance considerations article entity framework 50 authors introduced concept warm cold queries how differ which i also noticed myself without knowing existence here probably worth mention i only have six months experience behind my back.now i know what topics i can research additionally i want understand framework better terms performance unfortunately most information internet outdated bloated subjectivity hence my inability find any additional information warm vs cold queries topic.basically what i've noticed so far whenever i have recompile recycling hits my initial queries getting very slow any subsequent data read fast subjective expected.we ll migrating windows server 2012 iis8 sql server 2012 junior i actually won myself opportunity test them before rest i'm very happy introduced warming up module get my application ready first request however i'm sure how proceed warming up my entity framework.what i already know worth doing generate my views advance suggested.eventually move my models separate assembly.what i consider doing going common sense probably wrong approach doing dummy data reads application start order warm thingsup generate validate models.questions what would best approach have high availability my entity framework anytime what cases does entity framework gets cold again recompilation recycling iis restart etc,If you are looking for maximum performance across all calls you should consider your architecture carefully.  For instance it might make sense to pre-cache often used look-ups in server RAM when the application loads up instead of using database calls on every request.  This technique will ensure minimum application response times for commonly used data.  However you must be sure to have a well behaved expiration policy or always clear your cache whenever changes are made which affect the cached data to avoid issues with concurrency. In general you should strive to design distributed architectures to only require IO based data requests when the locally cached information becomes stale or needs to be transactional. Any "over the wire" data request will normally take 10-1000 times longer to retrieve than an a local in memory cache retrieval.  This one fact alone often makes discussions about "cold vs. warm data" inconsequential in comparison to the "local vs. remote" data issue.
populating razor dropdownlist from list&lt object&gt mvc,i have model public class dbuserrole public int userroleid get set public string userrole get set public class dbuserroles public list&lt dbuserrole&gt getroles bugnetreports roledropdown new bugnetreports list&lt dbuserrole&gt roles new list&lt dbuserrole&gt dataset table roledropdown.userroledropdown foreach datarow item table.tables 0 rows dbuserrole ur new dbuserrole ur.userrole convert.tostring item userrolename ur.userroleid convert.toint32 item userroleid roles.add ur return roles here controller loads view get admin addnewuserpublic actionresult addnewuser dbuserroles roles new dbuserroles return view roles.getroles i can get items list display using foreach loop shown below foreach var item model lt tr&gt lt td&gt item.userroleid lt td&gt lt td&gt item.userrole lt td&gt lt tr&gt how do i populate dropdownlist model passed through i have tried html.dropdownlistfor x gt x.userrole i'm having luck,  @Html.DropDownList("ddl"Model.Select(item =&gt; new SelectListItem{Value = item.RecordID.ToString()Text = item.Name.ToString() Selected = "select" == item.RecordID.ToString()}))
asp.net mvc 4 custom authorize attribute permission codes without roles,i need control access views based users privilege levels roles only privilege levels crud operation levels assigned users my mvc 4 application example below authorizeuser my custom attribute i need use like authorizeuser accesslevels read invoice update invoice public actionresult updateinvoice int invoiceid some code return view authorizeuser accesslevels create invoice public actionresult createnewinvoice some code return view authorizeuser accesslevels delete invoice public actionresult deleteinvoice int invoiceid some code return view possible do way,Here is a modification for the prev. answer. The main difference is when the user is not authenticated it uses the original "HandleUnauthorizedRequest" method to redirect to login page:   protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext){if (filterContext.HttpContext.User.Identity.IsAuthenticated) {filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary(new{controller = "Account"action = "Unauthorised"}));}else{ base.HandleUnauthorizedRequest(filterContext);}}
anti forgery token meant user ldquo rdquo current user ldquo username&rdquo,i'm building single page application experiencing issue anti forgery tokens.i know why issue happens i just don't know how fix it.i get error when following happens non logged user loads dialog generated anti forgery token user closes dialoguser logs inuser opens same dialog user submits form dialog anti forgery token meant user current user username reason happens because my application 100 single page when user successfully logs through ajax post account jsonlogin i simply switch out current views authenticated views returned from server do reload page.i know reason because i simple reload page between steps 3 4 error.so seems html.antiforgerytoken loaded form still returns token old user until page reloaded.how can i change html.antiforgerytoken return token new authenticated user i inject new genericalprincipal custom iidentity every application authenticaterequest so time html.antiforgerytoken gets called httpcontext.current.user.identity fact my custom identity isauthenticated property set true yet html.antiforgerytoken still seems render token old user unless i do page reload,To fix the error you need to place the OutputCache Data Annotation on the Get ActionResult of Login page as:[OutputCache(NoStore=true Duration = 0 VaryByParam= "None")] public ActionResult Login(string returnUrl)
site stopped working asp.net system.web.webpages.razor.configuration.hostsection cannot cast,i have problem like server system.web.webpages.razor.configuration.hostsection cannot cast b systemwebwebpagesrazorconfigurationhostsection type originates from system.web.webpages.razor version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c windows microsoft.net assembly gac msil system.web.webpages.razor v4.0_2.0.0.0 31bf3856ad364e35 system.web.webpages.razor.dll type b originates from system.web.webpages.razor version 1.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c windows microsoft.net assembly gac msil system.web.webpages.razor v4.0_1.0.0.0 31bf3856ad364e35 system.web.webpages.razor.dll description unhandled exception occurred during execution current web request please review stack trace more information about error where originated code exception details system.invalidcastexception system.web.webpages.razor.configuration.hostsection cannot cast b systemwebwebpagesrazorconfigurationhostsection type originates from system.web.webpages.razor version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c windows microsoft.net assembly gac msil system.web.webpages.razor v4.0_2.0.0.0 31bf3856ad364e35 system.web.webpages.razor.dll type b originates from system.web.webpages.razor version 1.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c windows microsoft.net assembly gac msil system.web.webpages.razor v4.0_1.0.0.0 31bf3856ad364e35 system.web.webpages.razor.dll source error i have installed mvc 3 serer my computer i have tried replacing 15 days old codebase same problem exist.now i want solve do someone know how i can fix,In the root Web.config make sure assemblyBinding contains the proper version for the assembly "System.Web.WebPages.Razor" and "System.Web.Mvc".  Check for their actual existence as well as my "System.Web.WebPages.Razor" assembly tag was missing causing the error. I had my assembly versions set to 3.0 and 5.0 respectively in the time of this writing with full NuGet updates.  Code should look something like below. The publicKeyToken will stay the same between the versions.  Cheers!&lt;assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1"&gt;  &lt;!--some more bidings--&gt;  &lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Web.WebPages.Razor"publicKeyToken="31bf3856ad364e35" /&gt;&lt;bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0"/&gt;  &lt;/dependentAssembly&gt;  &lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" /&gt;&lt;bindingRedirect oldVersion="1.0.0.0-5.0.0.0" newVersion="5.0.0.0" /&gt;  &lt;/dependentAssembly&gt;&lt;!--some more bidings--&gt;&lt;/assemblyBinding&gt;
how return raw string apicontroller,i have apicontroller serves xml json i would like one my actions return pure html i tried below still return xml json.public string get return lt strong&gt test&lt strong&gt what above returns lt string xmlns http schemas.microsoft.com 2003/10/serialization gt amp lt strong&amp gt test&amp lt strong&amp gt lt string&gt way return just pure unescaped text without even surrounding xml tags maybe different return type action attribute,Another possible solution. In Web API 2 I used the base.Content() method of APIController:public IHttpActionResult Post(){return base.Content(HttpStatusCode.OK new {}  new JsonMediaTypeFormatter() "text/plain");}I needed to do this to get around an IE9 bug where it kept trying to download JSON content. This should also work for XML-type data by using the XmlMediaTypeFormatter media formatter.Hope that helps someone.
how create asp.net web api url,asp.net mvc we have url.action actions something similar like url.api which would route api controller,It works with the simpler form of Url.Action thus you don't have to reference any Routing names:Url.Action("ActionName" "ControllerName" new { httproute = "DefaultApi" })You might want to add an area = "" if the URL is needed within an Area. (Api controllers are outside of Areas by default.) I'm using MVC 4. 
getting checkbox value asp.net mvc 4,i'm working asp.net mvc 4 app app has basic form model my form looks like following public class mymodel public string name get set public bool remember get set my form i have following html lt input id name name name type text value model.name gt lt input id remember name remember type checkbox value model.remember gt lt label remember gt amp nbsp remember me lt label&gt when i post form remember value model always false however name property model has value i've tested setting breakpoint following httppost public actionresult myaction mymodel model console.writeline model.remember.tostring i can't figure out why isn't checkbox value getting set,Since you are using Model.Name to set the value. I assume you are passing an empty view model to the View. So the value for Remember is false and sets the value on the checkbox element to false. This means that when you then select the checkbox you are posting the value "false" with the form. When you don't select it it doesn't get posted so the model defaults to false. Which is why you are seeing a false value in both cases.The value is only passed when you check the select box. To do a checkbox in Mvc use@Html.CheckBoxFor(x =&gt; x.Remember)or if you don't want to bind the model to the view.@Html.CheckBox("Remember")Mvc does some magic with a hidden field to persist values when they are not selected.Edit if you really have an aversion to doing that and want to generate the element yourself you could do.&lt;input id="Remember" name="Remember" type="checkbox" value="true" @(Model.Remember ? "checked=\"checked\"" : "") /&gt;
pass data layout common all pages,i have website which have layout page however layout page have data which all pages model must provide page title page name location where we actually html helper i did which perform some action also each page have own view models properties.how can i do seems its bad idea type layout how do i pass theses infos,I used RenderAction html helper for razor in layout. @{   Html.RenderAction("Action" "Controller"); }I needed it for simple string. So my action returns string and writes it down easy in view. But if you need complex data you can return PartialViewResult and model. public PartialViewResult Action(){var model = someList;return PartialView("~/Views/Shared/_maPartialView.cshtml" model);}You just need to put your model begining of the partial view '_maPartialView.cshtml' that you created@model List&lt;WhatEverYourObjeIs&gt;Then you can use data in the model in that partial view with html.
enable bundling minification debug mode asp.net mvc 4,i can't believe i cannot find other questions about how does one enable bundling debug mode i know how enabled release mode debug mode i cannot find way enable bundling.is even possible am i missing something,add  BundleTable.EnableOptimizations = true; in Application_Start() method of Global.asax file
visual studio 2015 error ldquo object reference set instance object&rdquo after install asp.net web tools 2015 rc1 update 1,after installing asp.net web tools 2015 rc1 update 1 i get following error within asp.net mvc 4 projects when opening cshtml files object reference set instance objecti get same error message even i start new asp.net mvc 4 project try open cshtml file,Delete %LocalAppData%\Microsoft\VisualStudio\14.0\ComponentModelCache.Alternatively use the Clear MEF Component Cache extension.
directory does exist parameter name directoryvirtualpath,i just published my project my host arvixe get error works fine local server error application.directory does exist.parameter name directoryvirtualpathdescription unhandled exception occurred during execution current web request please review stack trace more information about error where originated code exception details system.argumentexception directory does exist.parameter name directoryvirtualpathsource error unhandled exception generated during execution current web request information regarding origin location exception can identified using exception stack trace below.stack trace argumentexception directory does exist.parameter name directoryvirtualpath system.web.optimization.bundle.includedirectory string directoryvirtualpath string searchpattern boolean searchsubdirectories 357 system.web.optimization.bundle.include string virtualpaths 287 iconbench.bundleconfig.registerbundles bundlecollection bundles 75 iconbench.mvcapplication.application start 128 httpexception 0x80004005 directory does exist.parameter name directoryvirtualpath system.web.httpapplicationfactory.ensureappstartcalledforintegratedmode httpcontext context httpapplication app 9160125 system.web.httpapplication.registereventsubscriptionswithiis intptr appcontext httpcontext context methodinfo handlers 131 system.web.httpapplication.initspecial httpapplicationstate state methodinfo handlers intptr appcontext httpcontext context 194 system.web.httpapplicationfactory.getspecialapplicationinstance intptr appcontext httpcontext context 339 system.web.hosting.pipelineruntime.initializeapplication intptr appcontext 253 httpexception 0x80004005 directory does exist.parameter name directoryvirtualpath system.web.httpruntime.firstrequestinit httpcontext context 9079228 system.web.httpruntime.ensurefirstrequestinit httpcontext context 97 system.web.httpruntime.processrequestnotificationprivate iis7workerrequest wr httpcontext context 256version information microsoft net framework version 4.0.30319 asp.net version 4.0.30319.237what does mean,I had this same issue and it was not a code problem. I was using the publish option (not the FTP one) and Visual Studio was not uploading some of my scripts/css to the azure server because they were not "included in my project".So locally it worked just fine because files were there in my hard drive.What solved this issue in my case was "Project > Show all files..." and right click the ones that were not included include them and publish again
webapi delete working 405 method allowed,i appreciate any help site supposed go live tonight i have web api controller delete method method executes fine my local machine running iis express windows 8 soon i deployed live iis server windows server 2008 r2 stopped working throws following error message http error 405.0 method allowedthe page you looking cannot displayed because invalid method http verb being usedi have looked around web solutions i implemented most reasonable ones my web config has following settings lt system.webserver gt lt validation validateintegratedmodeconfiguration false gt lt handlers&gt lt remove name extensionlessurlhandler isapi-4.0_32bit gt lt remove name extensionlessurlhandler isapi-4.0_64bit gt lt remove name extensionlessurlhandler integrated-4.0 gt lt add name extensionlessurlhandler isapi-4.0_32bit path verb getheadpostdebugputdeletepatchoptions modules isapimodule scriptprocessor windir microsoft.net framework v4.0.30319 aspnet isapi.dll precondition classicmoderuntimeversionv4.0bitness32 responsebufferlimit 0 gt lt add name extensionlessurlhandler isapi-4.0_64bit path verb getheadpostdebugputdeletepatchoptions modules isapimodule scriptprocessor windir microsoft.net framework64 v4.0.30319 aspnet isapi.dll precondition classicmoderuntimeversionv4.0bitness64 responsebufferlimit 0 gt lt add name extensionlessurlhandler integrated-4.0 path verb getheadpostdebugputdeletepatchoptions type system.web.handlers.transferrequesthandler precondition integratedmoderuntimeversionv4.0 gt lt handlers&gt lt system.webserver gt i have also tried change handler mappings request filtering iis avail please note webdav authoring rules iis seems disabled.any ideas greatly appreciatedthanks,In some cases removing it just from modules can produce next error:   500.21 Handler "WebDAV" has a bad module "WebDAVModule" in its module listModule: IIS Web Core Notification: ExecuteRequestHandler"solution was suggested here. Also need to remove it from handlers. &lt;system.webServer&gt;&lt;modules&gt;&lt;remove name="WebDAVModule" /&gt;&lt;/modules&gt;&lt;handlers&gt;&lt;remove name="WebDAV" /&gt;&lt;/handlers&gt;&lt;/system.webServer&gt;
how use sessions asp.net mvc 4 application,i am new asp.net mvc i have used php before easy create session select user records based current session variables i have looked everywhere internet simple step step tutorial can show me how create use sessions my c asp.net mvc 4 application i want create session user variables i can access from anywhere my controllers able use variables my linq queries thanks advance,Due to the stateless nature of the web sessions are also an extremely useful way of persisting objects across requests by serialising them and storing them in a session.A perfect use case of this could be if you need to access regular information across your application to save additional database calls on each request this data can be stored in an object and unserialised on each request like so:Our reusable serializable object:[Serializable]public class UserProfileSessionData{public int UserId { get; set; }public string EmailAddress { get; set; }public string FullName { get; set; }}Use case:public class LoginController : Controller {[HttpPost]public ActionResult Login(LoginModel model){if (ModelState.IsValid){var profileData = new UserProfileSessionData {UserId = model.UserIdEmailAddress = model.EmailAddressFullName = model.FullName}this.Session["UserProfile"] = profileData;}}public ActionResult LoggedInStatusMessage(){var profileData = this.Session["UserProfile"] as UserProfileSessionData;/* From here you could output profileData.FullName to a view andsave yourself unnecessary database calls */}}Once this object has been serialised we can use it across all controllers without needing to create it or query the database for the data contained within it again.Inject your session object using Dependency InjectionIn a ideal world you would 'program to an interface not implementation' and inject your serializable session object into your controller using your Inversion of Control container of choice like so (this example uses StructureMap as it's the one I'm most familiar with).public class WebsiteRegistry : Registry{public WebsiteRegistry(){this.For&lt;IUserProfileSessionData&gt;().HybridHttpOrThreadLocalScoped().Use(() =&gt; GetUserProfileFromSession());   }public static IUserProfileSessionData GetUserProfileFromSession(){var session = HttpContext.Current.Session;if (session["UserProfile"] != null){return session["UserProfile"] as IUserProfileSessionData;}/* Create new empty session object */session["UserProfile"] = new UserProfileSessionData();return session["UserProfile"] as IUserProfileSessionData;}}You would then register this in your Global.asax.cs file.For those that aren't familiar with injecting session objects you can find a more in-depth blog post about the subject here.A word of warning:It's worth noting that sessions should be kept to a minimum large sessions can start to cause performance issues.It's also recommended to not store any sensitive data in them (passwords etc).
how set default controller asp.net mvc 4 amp mvc 5,how do i set default controller my asp.net mvc 4 project without making homecontroller how should i setup default area when application starts,Set below code in RouteConfig.cs in App_Start folderpublic static void RegisterRoutes(RouteCollection routes){ routes.IgnoreRoute("{resource}.axd/{*pathInfo}"); routes.MapRoute( name: "Default" url: "{controller}/{action}/{id}" defaults: new { controller = "Account" action = "Login" id = UrlParameter.Optional });}IF still not working then do below stepsSecond Way : You simple follow below steps1) Right click on your project solution2) Select Property3) Select Web option and then Select Specific Page (Controller/View) and then set your login pageHere Account is my controller and Login is my action method (saved in Account Controller)Please take a look attached screenshot.
redirect from asp.net web api post action,i'm very new asp.net 4.0 web api can we redirect another url end post action something like response.redirect url actually i upload file from mvc application say www.abcmvc.com through web api say www.abcwebapi.com upload here upload post action i post multi part form web api upload controller post action after uploading i would like redirect back wwwabcmvccom possible,Here is another way you can get to the root of your website without hard coding the url:var response = Request.CreateResponse(HttpStatusCode.Moved);string fullyQualifiedUrl = Request.RequestUri.GetLeftPart(UriPartial.Authority);response.Headers.Location = new Uri(fullyQualifiedUrl);Note:Will only work if both your MVC website and WebApi are on the same URL
error request header field content type allowed access control allow headers,i created mvc4 web api project using vs2012 i used following tutorial solve cross origin resource sharing http blogs.msdn.com b carlosfigueira archive/2012/07/02/cors support asp net web api rc version.aspx working successfully i post data from client side server successfully.after implementing autherization my project i used following tutorial implement oauth2 http community.codesmithtools.com codesmith community b tdupont archive/2011/03/18/oauth-2-0 mvc two legged implementation.aspx help me getting requesttoken client side.but when i post data from client side i got error xmlhttprequest cannot load http request header field content type allowed access control allow headers my client side code look like function postlogin var emp emp.username txtusername val var pass txtpassword val var hash sha1 requesttoken pass txtpassword val hash emp.password hash emp.requesttoken requesttoken var createurl http localhost 54/api login ajax type post url createurlcontenttype application json charset utf-8 data json.stringify emp statuscode 200 function txtmsg val done toastr.success success error function res toastr.error error sorry either your username password incorrect my api controller look like allowanonymous httppost public loginmodeloauth postlogin frombody loginmodeloauth model var accessresponse oauthservicebase.instance.accesstoken model.requesttoken user model.username model.password model.rememberme accessresponse.success oauthservicebase.instance.unauthorizetoken model.requesttoken var requestresponse oauthservicebase.instance.requesttoken model.errormessage invalid credentials return model else do return accessresponsereturn model my webconfig file look like lt configuration&gt lt configsections&gt lt section name entityframework type system.data.entity.internal.configfile.entityframeworksection entityframework version 4.4.0.0 culture neutral publickeytoken b77a5c561934e089 requirepermission false gt lt section name oauth type millionnodes.configuration.oauthsection millionnodes version 1.0.0.0 culture neutral gt lt sectiongroup name dotnetopenauth type dotnetopenauth.configuration.dotnetopenauthsection dotnetopenauth.core gt lt section name messaging type dotnetopenauth.configuration.messagingelement dotnetopenauth.core requirepermission false allowlocation true gt lt section name reporting type dotnetopenauth.configuration.reportingelement dotnetopenauth.core requirepermission false allowlocation true gt lt sectiongroup&gt lt configsections&gt lt oauth defaultprovider demoprovider defaultservice demoservice gt lt providers&gt lt add name demoprovider type millionnodes.oauth.demoprovider millionnodes gt lt providers&gt lt services&gt lt add name demoservice type millionnodes.oauth.demoservice millionnodes gt lt services&gt lt oauth&gt lt system.web gt lt httpmodules&gt lt add name oauthauthentication type millionnodes.module.oauthauthenticationmodule millionnodes version 1.0.0.0 culture neutral gt lt httpmodules&gt lt compilation debug true targetframework 4.0 gt lt authentication mode forms gt lt forms loginurl account login timeout 2880 gt lt authentication&gt lt pages&gt lt namespaces&gt lt add namespace system.web.helpers gt lt add namespace system.web.mvc gt lt add namespace system.web.mvc.ajax gt lt add namespace system.web.mvc.html gt lt add namespace system.web.optimization gt lt add namespace system.web.routing gt lt add namespace system.web.webpages gt lt namespaces&gt lt pages&gt lt system.web gt lt system.webserver gt lt validation validateintegratedmodeconfiguration false gt lt modules&gt lt add name oauthauthentication type millionnodes.module.oauthauthenticationmodule millionnodes version 1.0.0.0 culture neutral precondition gt lt modules&gt lt httpprotocol&gt lt customheaders&gt lt add name access control allow origin value gt lt customheaders&gt lt httpprotocol&gt lt system.webserver gt lt dotnetopenauth&gt lt messaging&gt lt untrustedwebrequest&gt lt whitelisthosts&gt lt uncomment enable communication localhost should generally activate production gt lt lt add name localhost gt gt lt whitelisthosts&gt lt untrustedwebrequest&gt lt messaging&gt lt allow dotnetopenauth publish usage statistics library authors improve library gt lt reporting enabled true gt,As hinted at by this post Error in chrome: Content-Type is not allowed by Access-Control-Allow-Headers just add the additional header to your web.config like so...   &lt;httpProtocol&gt;  &lt;customHeaders&gt;&lt;add name="Access-Control-Allow-Origin" value="*" /&gt;&lt;add name="Access-Control-Allow-Headers" value="Origin X-Requested-With Content-Type Accept" /&gt;  &lt;/customHeaders&gt;&lt;/httpProtocol&gt;
dot character 39 39 mvc web api 2 request api people staff.45287,url i'm trying let work one style http somedomain.com api people staff.33311 just like sites last.fm allow all sort signs restful amp webpage urls example http www.last.fm artist psy'aviah valid url last.fm what works following scenarios http somedomain.com api people which returns all people http somedomain.com api people/staff33311 would work well what i'm afteri'd want url accept dot like example below http somedomain.com api people staff.33311 gives me http error 404.0 foundthe resource you looking has been removed had its name changed temporarily unavailable.i ve set up following things controller peoplecontroller public ienumerable&lt person&gt getallpeople return people public ihttpactionresult getperson string id var person people.firstordefault p gt p.id.tolower equals id.tolower person null return notfound return ok person webapiconfig.cspublic static void register httpconfiguration config web api configuration services web api routesconfig.maphttpattributeroutes config.routes.maphttproute name defaultapi routetemplate api controller id defaults new id routeparameter.optional i already tried following all tips blogpost http www.hanselman.com blog experimentsinwackinessallowingpercentsanglebracketsandothernaughtythingsintheaspnetiisrequesturl.aspx still won't work i also think quite tedious i wonder isn't another better more secure way.we have our id internally like so we're going have find solution fit dot one way another preferably style i'm open alternative suggestions urls need,Suffix the URL with a slash e.g. http://somedomain.com/api/people/staff.33311/ instead of http://somedomain.com/api/people/staff.33311.
return html from asp.net web api,how return html from asp.net mvc web api controller i tried code below got compile error since response.write defined public class mycontroller apicontroller httppost public httpresponsemessage post response.write lt p&gt test&lt p&gt return request.createresponse httpstatuscode.ok,Starting with AspNetCore 2.0 it's recommended to use ContentResult instead of the Produce attribute in this case. See: https://github.com/aspnet/Mvc/issues/6657#issuecomment-322586885  This doesn't rely on serialization nor on content negotiation.[HttpGet]public ContentResult Index() {return new ContentResult {ContentType = "text/html"StatusCode = (int)HttpStatusCode.OKContent = "&lt;html&gt;&lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt;"};}
pass parameter controller from html.actionlink mvc 4,line html.actionlink reply blogreplycommentadd blog new blogpostid blogpostid replyblogpostmodel model captchavalid model.addnewcomment.displaycaptcha i get following runtime error blogpostid parameters dictionary contains null entry parameter blogpostid non nullable type system.int32 method system.web.mvc.actionresult blogreplycommentadd int32 nop.web.models.blogs.blogpostmodel boolean nop.web.controllers.blogcontroller optional parameter must reference type nullable type declared optional parameter parameter name parametersi have already assign value top var blogpostid model.id my controller public actionresult blogreplycommentadd int blogpostid blogpostmodel model bool captchavalid am i doing something wrong please give me example,I have to pass two parameters like:  /Controller/Action/Param1Value/Param2ValueThis way:@Html.ActionLink(linkTextactionNamecontrollerNamerouteValues: new {Param1Name= Param1Value Param2Name = Param2Value }htmlAttributes: null)will generate this url  /Controller/Action/Param1Value?Param2Name=Param2ValueI used a workaround method by merging parameter two in parameter one and I get what I wanted:@Html.ActionLink(linkTextactionNamecontrollerNamerouteValues: new {Param1Name= "Param1Value / Param2Value"   }htmlAttributes: null)And I get :   /Controller/Action/Param1Value/Param2Value
wcf vs asp net web api,what pros cons using each technology wcf web api now merged asp.netasp.net web api now supports self hosting.i still imagine i want expose multiple protocol schemas same operation i would still lean towards wcf can mvc end point do too also does new asp.net web api expose wsdl how would client figure out what operation available them arguably best feature mvc modelbinder how robust wcf equivalent so can someone tell me what advantage does asp.net web api bring table wcf seems overwhelmingly more powerful scalable choice imo about only thing mvc web api has over wcf model probably ease development means squat ends up being serious design limitation down road,The choice depends on what we want to do.ASP.NET Web API is a framework for building non-SOAP based services over HTTP only - so there aren't more transport protocols available using this framework.WCF / Windows Communication Foundation is a framework for exchanging SOAP-based messages - here we use a lot of transport protocols: HTTP TCP Named pipes MSMQ etc... I am not sure about which one has better performance regarding the amount of data maybe WCF since we can use low protocols. Any comments are appreciated.
ldquo exception occurred while processing your request additionally another exception occurred while executing custom error page&hellip rdquo,i'm trying publish mvc website azure webrole.when i run locally everything works fine once i publish azure surf some mvc action i get error server error application.runtime errordescription exception occurred while processing your request additionally another exception occurred while executing custom error page first exception request has been terminated.i don't understand how error handler can encounter exception because errors handled default way public class filterconfig public static void registerglobalfilters globalfiltercollection filters filters.add new handleerrorattribute my web.config lt xml version 1.0 gt lt configuration&gt lt configsections&gt lt sectiongroup name system.web.webpages.razor type system.web.webpages.razor.configuration.razorwebsectiongroup system.web.webpages.razor version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 gt lt section name host type system.web.webpages.razor.configuration.hostsection system.web.webpages.razor version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 requirepermission false gt lt section name pages type system.web.webpages.razor.configuration.razorpagessection system.web.webpages.razor version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 requirepermission false gt lt sectiongroup&gt lt configsections&gt lt system.web.webpages.razor gt lt host factorytype system.web.mvc.mvcwebrazorhostfactory system.web.mvc version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 gt lt pages pagebasetype system.web.mvc.webviewpage gt lt namespaces&gt lt add namespace system.web.mvc gt lt add namespace system.web.mvc.ajax gt lt add namespace system.web.mvc.html gt lt add namespace system.web.routing gt lt namespaces&gt lt pages&gt lt system.web.webpages.razor gt lt appsettings&gt lt add key webpages enabled value false gt lt appsettings&gt lt system.web gt lt httphandlers&gt lt add path verb type system.web.httpnotfoundhandler gt lt httphandlers&gt lt pagesvalidaterequest false pageparserfiltertype system.web.mvc.viewtypeparserfilter system.web.mvc version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 pagebasetype system.web.mvc.viewpage system.web.mvc version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 usercontrolbasetype system.web.mvc.viewusercontrol system.web.mvc version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 gt lt controls&gt lt add assembly system.web.mvc version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 namespace system.web.mvc tagprefix mvc gt lt controls&gt lt pages&gt lt system.web gt lt system.webserver gt lt validation validateintegratedmodeconfiguration false gt lt handlers&gt lt remove name blockviewhandler gt lt add name blockviewhandler path verb precondition integratedmode type system.web.httpnotfoundhandler gt lt handlers&gt lt system.webserver gt lt configuration&gt error.cshtml model system.web.mvc.handleerrorinfo viewbag.title error lt h2 gt sorry error occurred while processing your request lt h2 gt what can cause exception why can't i reproduce locally,I wasn't using Azure but I got the same error locally.  Using &lt;customErrors mode="Off" /&gt; seemed to have no effect but checking the Application logs in Event Viewer revealed a warning from ASP.NET which contained all the detail I needed to resolve the issue.
add data annotations class generated entity framework,i have following class generated entity framework public partial class itemrequest public int requestid get set i would like make required field required public int requestid get set however because generated code get wiped out i can't imagine way create partial class because property defined generated partial class how can i define constraint safe way,As MUG4N answered you can use partial classes but will be better use interfaces instead. In this case you will have compilation errors if EF model doesn't correspond to validation model. So you can modify your EF models without fear that validation rules are outdated.using System.Collections.Generic;using System.ComponentModel.DataAnnotations;namespace YourApplication.Models{public interface IEntityMetadata{[Required]Int32 Id { get; set; }}[MetadataType(typeof(IEntityMetadata))]public partial class Entity : IEntityMetadata{/* Id property has already existed in the mapped class */}}P.S. If you are using project type which is differ from ASP.NET MVC (when you perform manual data validation) don't forget to register your validators/* Global.asax or similar */TypeDescriptor.AddProviderTransparent(new AssociatedMetadataTypeTypeDescriptionProvider(typeof(Entity) typeof(IEntityMetadata)) typeof(Entity));
how do i add bundleconfig.cs my project,i have asp.net mvc project i want implement bundling everything i can find internet directs me open bundleconfig.cs app start however file does exist my project i have only three files folder filterconfig routeconfig webapiconfig.bundle config wasn't generated when i created solution iirc blank asp.net mvc project beginning seems like should really easy do i just plain cannot figure outps just clarify those reading closely mvc4 net 4.5 app created from scratch solution marked below,If you are using "MVC 5" you may not see the file and you should follow these steps: http://www.techjunkieblog.com/2015/05/aspnet-mvc-empty-project-adding.htmlIf you are using "ASP.NET 5" it has stopped using "bundling and minification" instead was replaced by gulp bower and npm. More information see https://jeffreyfritz.com/2015/05/where-did-my-asp-net-bundles-go-in-asp-net-5/
could load file assembly 39 system.net.http version 2.0.0.0 mvc4 web api,i have bit weird problem.i developed app mvc 4 new web api works fine locally i installed mvc4 server deployed app now i get following error could load file assembly system.net.http version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 description unhandled exception occurred during execution current web request please review stack trace more information about error where originated infunny enough version system.net.http i locally have either my package folder asp.net mvc 4 assemblies folder 1000 i actually removed reference system.net.http from my project i still get same message i'm bit confused about where gets 2.0.0.0 reference from why would work locally server.looking nuget dependencies asp.net web api core libraries beta depends system.net.http.formatting.and system.net.http.formatting depends system.net.http.i guess where comes from i do have version 2.0.20126.16343 package installed just dll inside has version 1.0.0.0 am i missing something update sub application another asp.net app other one still based webforms so something getting messed up i do clean under assembly section web.config does even find app itself anymore,I had the same error while deploying previously converted (from .NET 4.5 to 4.0) web app on IIS 6.0. In the web.config runtime section I've found&lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Net.Http" publicKeyToken="b03f5f7f11d50a3a" culture="neutral"/&gt;&lt;bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0"/&gt;&lt;/dependentAssembly&gt;which I've changed to&lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Net.Http" publicKeyToken="b03f5f7f11d50a3a" culture="neutral"/&gt;&lt;bindingRedirect oldVersion="0.0.0.0-1.0.0.0" newVersion="2.0.0.0"/&gt;&lt;/dependentAssembly&gt;Now works like charm.
how add global asp.net web api filters,i've created web api filter using system.web.http.filters.actionfilterattribute i am unable get work inside asp.net mvc 4 i tried adding registerglobalfilters method didn't work.so one using web api hosted asp.net mvc how does one register filters,note that this answer holds true up to MVC 5/Web API 2Short answer: MVC and Web API filters are not cross compatible and if you want to register them globally you must use the appropriate configuration classes for each.Long answer: ASP.NET MVC and Web API are purposely designed to work in a similar way but they are in fact different creatures. Web API lives under the System.Web.Http namespace whereas MVC lives under the System.Web.Mvc namespace. The two will happily live side by side but one does not contain the other and despite the similarities in the programming model the underlying implementations are different. Just as MVC controllers and Web API controllers inherit different base controller classes (MVC's is simply named Controller and Web API's is named ApiController) MVC filters and Web API filters inherit from different FilterAttribute classes (both share the same name in this case but are separate classes which live in their respective namespaces).Web API global filters are registered through the HttpConfiguration object available to you in the Register method WebApiConfig.cs if you're using a project template with WebActivator:public static void Register(HttpConfiguration config){//stuff beforeconfig.Filters.Add(new MyWebApiFilter());//stuff after}or otherwise in the global.asax.cs:GlobalConfiguration.Configuration.Filters.Add(new MyWebApiFilter());Mvc global filters are registered by way of a GlobalFilterCollection object which is available to you through the RegisterGlobalFilters method of FilterConfig.cs for projects that are using WebActivator:public class FilterConfig{public static void RegisterGlobalFilters(GlobalFilterCollection filters){//stuff beforefilters.Add(new MyMvcFilter());//stuff after}}or in the global.asax.cs file by way of GlobalFilters.Filters collection for those without WebActivator:GlobalFilters.Filters.Add(new MyMvcFilter());It's worth noting that in both cases you do not need to inherit from the appropriate FilterAttribute type. Web API Filters need only implement the System.Web.Http.IFilter interface while MVC filter registration checks to ensure that your class inherits one of a handful of filter interfaces defined in the System.Web.Mvc namespace.
how remove error about glyphicons halflings regular.woff2 found,asp.net mvc4 bootstrap 3 application running from microsoft visual studio express 2013 web ide.chrome console shows always errorhttp localhost 52216/admin fonts glyphicons halflings regular.woff2failed load resource server responded status 404 found file exists fonts directory solution explorer build action set content copy output directory do copy like other font files bootstrap 3 added solution using nuget.how fix so error does occur application shows glyphicon fontawesome icons properly error always occurs application startup,In my case I've just downloaded the missing file directly from here: https://github.com/twbs/bootstrap/blob/master/dist/fonts/glyphicons-halflings-regular.woff2
how can i specify explicit scriptbundle include order,i'm trying out mvc4 system.web.optimization 1.0 scriptbundle feature i have following configuration public class bundleconfig public static void registerbundles bundlecollection bundles shared scriptsbundle canvasscripts new scriptbundle bundlepaths.canvasscripts include scripts modernizr include scripts/json2.js include scripts columnizer.js include scripts jquery.ui.message.min.js include scripts shared achievements.js include scripts shared canvas.js bundles.add canvasscripts following view lt script type text javascript src scripts.url bundlepaths.canvasscripts gt lt script&gt where bundlepaths.canvasscripts bundles scripts canvas renders lt script type text javascript src bundles scripts canvas v uth3xqh0uxwjjzi-gtx03eu183bjnpfng8aniog14_41 gt lt script&gt so far so good except scripts shared achievements.js first script bundled source depends every script included before scriptbundle how can i ensure honors order which i add include statements bundle updatethis relatively new asp.net mvc 4 application referencing optimization framework pre release package i removed added rtm package from http nuget.org packages microsoftaspnetweboptimization rtm version debug true web.config scripts.render bundles scripts canvas renders individual script tags correct order debug false web.config combined script has achievements.js script first since its function definition object constructor called later runs without error perhaps minifier smart enough figure out dependencies i also tried ibundleorderer implementation darin dimitrov suggested rtm both debug options behaved same.so minified version order i expect works,You could write a custom bundle orderer (IBundleOrderer) that will ensure bundles are included in the order you register them:public class AsIsBundleOrderer : IBundleOrderer{public virtual IEnumerable&lt;FileInfo&gt; OrderFiles(BundleContext context IEnumerable&lt;FileInfo&gt; files){return files;}}and then:public class BundleConfig{public static void RegisterBundles(BundleCollection bundles){var bundle = new Bundle("~/bundles/scripts/canvas");bundle.Orderer = new AsIsBundleOrderer();bundle.Include("~/Scripts/modernizr-*").Include("~/Scripts/json2.js").Include("~/Scripts/columnizer.js").Include("~/Scripts/jquery.ui.message.min.js").Include("~/Scripts/Shared/achievements.js").Include("~/Scripts/Shared/canvas.js");bundles.Add(bundle);}}and in your view:@Scripts.Render("~/bundles/scripts/canvas")
unobtrusive validation working dynamic content,i'm having problems trying get unobtrusive jquery validation work partial view loaded dynamically through ajax call.i ve been spending days trying get code work luck.here s view model mvcapplication2.models.test using html.beginform html.validationsummary true lt div id res gt lt div&gt lt input id submit type submit value submit gt partial view model mvcapplication2.models.test@html.textareafor m gt m.myproperty html.validationmessagefor m gt m.myproperty lt script type text javascript gt validator.unobtrusive.parse document lt script&gt model public class test required errormessage required field public int myproperty get set controller public actionresult getview return partialview test finally javascript doument ready function ajax url test getview'success function res res html res validator.unobtrusive.parse res submit click function form valid alert valid return true else alert valid return false validation does work even i don't fill any information texbox submit event shows alert valid however instead loading dynamically view i use html.partial test model render partial view main view i don't do ajax call validation works just fine.this probably because i load content dynamically controls don't exist dom yet i do call validator.unobtrusive.parse res which should enough let validator about newly loaded controls can anyone help,If you try to parse a form that is already parsed it won't updateWhat you could do when you add dynamic element to the form is either You could remove the form's validation and re validate it like this:var form = $(formSelector).removeData("validator") /* added by the raw jquery.validate plugin */.removeData("unobtrusiveValidation");  /* added by the jquery unobtrusive plugin*/$.validator.unobtrusive.parse(form);Access the form's unobtrusiveValidation data using the jquery data method:$(form).data('unobtrusiveValidation')then access the rules collection and add the new elements attributes (which is somewhat complicated). You can also check out this article on Applying unobtrusive jquery validation to dynamic content in ASP.Net MVC for a plugin used for adding dynamic elements to a form. This plugin uses the 2nd solution.
mvc4 http error 403.14 forbidden,i have build net4.5 asp.net mvc4 web app which works fine locally iis express amp dev server once i deploy my web server throws 403 error i have installed net 4.5rc server even tried aspnet regiis ibit everyone recommended issues previous versions mvc net did help.any ideas edit more info about situation server 32bit i have 4 other mvc3 applications work fine just my mvc4 app working,Error 403.14 is the HTTP error code for not being allowed to list the contents of a directory.  Please be sure that You have setup the website as an application in IIS You have .NET 4.5 installed on the serverYou have set the application pool to run the proper version of the.NET framework (ie. it is not set  to .NET 2.0You are using the integrated pipeline on your application pool.NET 4.5 is actually registered in IIS.  Please see this post for a similar issue/resolutionUsually a and d are the biggest issues surrounding MVC deployments to IIS
asp.net mvc razor concatenation,i'm trying render html list looks like following using razor view engine lt ul&gt lt li id item_1 gt item 1 lt li&gt lt li id item_2 gt item 2 lt li&gt lt ul&gt code i am attempting use render list lt ul&gt foreach var item model.theitems lt li id item item.theitemid gt item item.theitemid lt li&gt lt ul&gt parser choking because thinks everything right underscore id attribute plain text should parsed i'm uncertain how instruct parser render theitemid.i don't want property model object includes item prefix.i also have keep syntax i am using list jquery sortable serialize function requires id attribute formatted syntax,How about using String.Format? like this:&lt;li id="@String.Format("item_{0}" item.TheItemId)"&gt;
mixing angular asp.net mvc web api,i come from using asp.net mvc web api now i am starting use angular i am clear proper way mix them.once i am using angular does mvc sever side concepts still provide any value should i strictly using web api purely get data angular http calls any tips you have asp.net mvc guy transitioning angular would helpful,Pure Web APII used to be pretty hardcore with ASP.NET MVC but since I've met Angular I do not see one reason why I would use any server side content generation framework. Pure Angular/REST(WebApi) gives a richer and smoother result. It's much faster and allows you to build websites that come quite close to desktop applications without any funky hacks. Angular does have a little learning curve but once your team has mastered it you'll build much better websites in less time. Mainly this has to do with the fact that you don't have all these state(less) issues anymore. For example imagine a wizard form with any traditional server side framework. Each page needs to be validated and submitted separately. Maybe the content of the page is dependent on values from a previous page. Maybe the user pressed the back button and is re-submitting an previous form. Where do we store the state of the client? All these complications do not exist when using Angular and REST.So ... come over to the dark side ... we've got cookies.Similar question
execute insert command return inserted id sql,hi i am inserting some values sql table using c mvc4 actually i want insert values return id last inserted record i use following code.public class memberbasicdata public int id get set public string mem na get set public string mem occ get set id automatically increment database when inserted.public int createnewmember string mem na string mem occ using sqlconnection con new sqlconnection config.connectionstring using sqlcommand cmd new sqlcommand insert mem basic mem namem occ values na@occ con cmd.parameters.addwithvalue na mem na cmd.parameters.addwithvalue occ mem occ con.open int modified cmd.executenonquery con.state system.data.connectionstate.open con.close return modified i know executenonquery denotes numbers affecting row instead i useint modified int cmd.executescalar working please help me solving any code like cmd.executeinsertandgetid working my code,Change the query to"INSERT INTO Mem_Basic(Mem_NaMem_Occ) VALUES(@na@occ); SELECT SCOPE_IDENTITY()"This will return the last inserted ID which you can then get with ExecuteScalar
logging request response messages when using httpclient,i have method does post like belowvar response await client.postasjsonasync url entity response.issuccessstatuscode read response strongly typed objectreturn await response.content.readasasync lt t&gt my question how can i obtain actual json got posted from entity object i would like log json gets posted so nice have without me having do json serialize myself,See http://mikehadlow.blogspot.com/2012/07/tracing-systemnet-to-debug-http-clients.htmlTo configure a System.Net listener to output to both the console and a log file add the following to your assembly configuration file:&lt;system.diagnostics&gt;  &lt;trace autoflush="true" /&gt;  &lt;sources&gt;&lt;source name="System.Net"&gt;  &lt;listeners&gt;&lt;add name="MyTraceFile"/&gt;&lt;add name="MyConsole"/&gt;  &lt;/listeners&gt;&lt;/source&gt;  &lt;/sources&gt;  &lt;sharedListeners&gt;&lt;add  name="MyTraceFile"  type="System.Diagnostics.TextWriterTraceListener"  initializeData="System.Net.trace.log" /&gt;&lt;add name="MyConsole" type="System.Diagnostics.ConsoleTraceListener" /&gt;  &lt;/sharedListeners&gt;  &lt;switches&gt;&lt;add name="System.Net" value="Verbose" /&gt;  &lt;/switches&gt;&lt;/system.diagnostics&gt;
ldquo templates can used only field access property access single dimension array index single parameter custom indexer expressions&rdquo error,why am i receiving error templates can used only field access property access single dimension array index single parameter custom indexer expressionsat code model ienumerable&lt artschoolproject.models.trainer gt viewbag.title index layout views shared pagelayout.cshtml lt h2 gt index&lt h2 gt lt p&gt html.actionlink create new create lt p&gt lt ul class trainers gt foreach var item model lt li&gt lt div&gt lt div class left gt lt href url.action details details new id item.id gt lt img src images trainer item.picture gt lt a&gt lt div&gt lt div class right gt html.actionlink item.name details new id item.id lt br gt html.displayfor modelitem gt string item.description.tostring substring 0100 lt div&gt lt div&gt lt li&gt lt ul&gt line html.displayfor modelitem gt item.description.tostring substring 0100 update problem solved i added my code string parametervalue item.description.tostring substring 0 100 html.displayfor modelitem gt parametervalue my new code foreach var item model lt li&gt lt div&gt lt div class left gt lt href url.action details details new id item.id gt lt img src images trainer item.picture gt lt a&gt lt div&gt lt div class right gt html.actionlink item.name details new id item.id lt br gt string parametervalue item.description.tostring substring 0 100 html.displayfor modelitem gt parametervalue lt div&gt lt div&gt lt li&gt only one possibility just curiosity another solution solving error,I had the same problem with something like @foreach (var item in Model){@Html.DisplayFor(m =&gt; !item.IsIdle "BoolIcon")}I solved this just by doing@foreach (var item in Model){var active = !item.IsIdle;@Html.DisplayFor(m =&gt; active  "BoolIcon")}When you know the trick it's simple.The difference is that in the first case I passed a method as a parameter whereas in the second case it's an expression.
mvc4 style bundle giving 403,when bundling minification enabled some my bundles seem have invalid url browser ending iis gives 403 forbidden error trying list folder contents.there s difference way my bundles set up min.css access permissions correct etc,In my case bundle was specified as a directory @Scripts.Render("~/scripts") so IIS did not know how to serve the actual js file I changed the bundle name to represent a javascript file @Scripts.Render("~/scripts.js") and that fixed it. The same was true for my style bundle.
how can i change iis express port site,i want change port number which my website runs while debugging from visual studio i am using visual studio 2012 i am using asp.net mvc 4 my projects i want change port random port fixed anyone work just want change port,Here's a more manual method that works both for Website projects and Web Application projects. (you can't change the project URL from within Visual Studio for Website projects.)To specify a port for any web project that uses IIS Express:In Solution Explorer right-click the project name and then click Remove or Delete; don't worry this removes the project from your solution but does not delete the corresponding files on disk.Navigate to the IIS Express ApplicationHost.config file. By default this file is located in:%userprofile%\Documents\IISExpress\configOpen the ApplicationHost.config file in a text editor. In the &lt;sites&gt; section search for your site's name. In the &lt;bindings&gt; section of your site you will see an element like this:&lt;binding protocol="http" bindingInformation="*:56422:localhost" /&gt;Change the port number (56422 in the above example) to anything you want. e.g.:&lt;binding protocol="http" bindingInformation="*:44444:localhost" /&gt;(Bonus: You can even bind to a different host name and do cool things like:&lt;binding protocol="http" bindingInformation="*:80:mysite.dev" /&gt;and then map mysite.dev to 127.0.0.1 in your hosts file and then open your website from "http://mysite.dev"; but that's outside the scope of this answer so I won't go into any more details)If you had a Website project:In Solution Explorer right-click the solution select Add and then select Existing Web Site.... In the Add Existing Web Site dialog box make sure that the Local IIS tab is selected. Under IIS Express Sites select the site for which you have changed the port number then click OK.If you had a Web Application project:In Solution Explorer right-click the solution select Add and then select Existing Project... browse to and select your web application's project file. Then:In Solution Explorer right-click the name of the project and then select Properties. Click the Web tab.In the Servers section under Use Local IIS Web server in the Project URL box enter a URL to match the hostname and port you entered in the ApplicationHost.config file from before.To the right of the Project URL box click Create Virtual Directory and then click OK.In the File menu click Save Selected Items.Now you can access your website from your new hostname/port.
web api mvc solution separate project,i am creating new mvc4 project research has lead me believe communicating from javascript server side better achieved now through web api framework rather than controller actions my understanding correct i am presuming i can share all my attributes etc between web api mvc controllers so face does seem massive change me.when i am setting up applications i like split components out projects my plan have mvc project web api project i have ran issues example i have ended up 2 apps separate routing set up etc etc.so my question mvc application should web api framework sit within same project should web api separated project its own work around issues,IMO security and deployment should drive your decision.  E.g. if your MVC app uses Forms authentication but you're interested in using Basic authentication (with SSL) for your API separate projects are going to make your life easier.  If you want to host yout site at www.example.com but host your API as api.example.com (vs. www.example.com/api) separate projects will make your life easier.  If you separate your projects and subdomain them accordingly and you intend to leverage your own API from your MVC app you will have to figure out how to deal with the Same Origin Policy issue for client-side calls to your API.  Common solutions to this are to leverage jsonp or CORS (preferably if you can).Update (3/26/2013): Official CORS support is coming: http://aspnetwebstack.codeplex.com/wikipage?title=CORS%20support%20for%20ASP.NET%20Web%20API
could load file assembly 39 dotnetopenauth.core,i get following error when i start my asp net mvc 4 application could load file assembly dotnetopenauth.core version 4.0.0.0 culture neutral publickeytoken 2780ccd10d57b246 one its dependencies system cannot find file specifiedthis error logassembly manager loaded from c windows microsoft.net framework v4.0.30319 clr.dllrunning under executable c windows syswow64 inetsrv w3wp.exe detailed error log follows pre bind state information log user notebook guilhermelog displayname dotnetopenauth.core version 4.0.0.0 culture neutral publickeytoken 2780ccd10d57b246 fully specified log appbase file c users guilherme documents visual studio 2012/projects gedi gedi log initial privatepath c users guilherme documents visual studio 2012 projects gedi gedi bincalling assembly microsoft.web.webpages.oauth version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 log bind starts default load context.log using application configuration file c users guilherme documents visual studio 2012 projects gedi gedi web.configlog using host configuration file c windows microsoft.net framework v4.0.30319 aspnet.configlog using machine configuration file from c windows microsoft.net framework v4.0.30319 config machine.config.log post policy reference dotnetopenauth.core version 4.0.0.0 culture neutral publickeytoken 2780ccd10d57b246log attempting download new url file c windows microsoft.net framework/v4.0.30319/temporary asp.net files root/2635bb56/154c3fbb dotnetopenauth.core.dll.log attempting download new url file c windows microsoft.net framework/v4.0.30319/temporary asp.net files root/2635bb56/154c3fbb dotnetopenauth.core dotnetopenauth.core.dll.log attempting download new url file c users guilherme documents visual studio 2012/projects gedi gedi bin dotnetopenauth.core.dll.log attempting download new url file c users guilherme documents visual studio 2012/projects gedi gedi bin dotnetopenauth.core dotnetopenauth.core.dll.log attempting download new url file c windows microsoft.net framework/v4.0.30319/temporary asp.net files root/2635bb56/154c3fbb dotnetopenauth.core.exe.log attempting download new url file c windows microsoft.net framework/v4.0.30319/temporary asp.net files root/2635bb56/154c3fbb dotnetopenauth.core dotnetopenauth.core.exe.log attempting download new url file c users guilherme documents visual studio 2012/projects gedi gedi bin dotnetopenauth.core.exe.log attempting download new url file c users guilherme documents visual studio 2012/projects gedi gedi bin dotnetopenauth.core dotnetopenauth.core.exe.i have already remove all references from dotnetopenauth packager manager also i checked my self references every auth assembly i had my project none.this my packages.config lt packages&gt lt package id automapper version 2.2.0 targetframework net45 gt lt package id entityframework version 5.0.0 targetframework net45 gt lt package id jquery version 1.7.1.1 targetframework net45 gt lt package id jquery.ui.combined version 1.8.20.1 targetframework net45 gt lt package id jquery.validation version 1.9.0.1 targetframework net45 gt lt package id knockoutjs version 2.1.0 targetframework net45 gt lt package id microsoft.aspnet.mvc version 4.0.20710.0 targetframework net45 gt lt package id microsoft.aspnet.razor version 2.0.20710.0 targetframework net45 gt lt package id microsoft.aspnet.web.optimization version 1.0.0 targetframework net45 gt lt package id microsoft.aspnet.webapi version 4.0.20710.0 targetframework net45 gt lt package id microsoft.aspnet.webapi.client version 4.0.20710.0 targetframework net45 gt lt package id microsoft.aspnet.webapi.core version 4.0.20710.0 targetframework net45 gt lt package id microsoft.aspnet.webapi.webhost version 4.0.20710.0 targetframework net45 gt lt package id microsoft.aspnet.webpages version 2.0.20710.0 targetframework net45 gt lt package id microsoft.aspnet.webpages.data version 2.0.20710.0 targetframework net45 gt lt package id microsoft.aspnet.webpages.webdata version 2.0.20710.0 targetframework net45 gt lt package id microsoft.jquery.unobtrusive.ajax version 2.0.20710.0 targetframework net45 gt lt package id microsoft.jquery.unobtrusive.validation version 2.0.20710.0 targetframework net45 gt lt package id microsoft.net.http version 2.0.20710.0 targetframework net45 gt lt package id microsoft.web.infrastructure version 1.0.0.0 targetframework net45 gt lt package id modernizr version 2.5.3 targetframework net45 gt lt package id newtonsoft.json version 4.5.11 targetframework net45 gt lt package id repository version 1.0.2.12 targetframework net45 gt lt package id restsharp version 103.4 targetframework net45 gt lt package id webgrease version 1.1.0 targetframework net45 gt lt packages&gt thanks,I had similar problem. It was really strange as the project was running OK a day before. Removing obj and bin folders from the project folder cleaning the solution and rebuilding it worked. Hope that helps.
redirect hash from controller using ldquo redirecttoaction&rdquo,hello i want return anchor from mvc controller controller name defaultcontroller public actionresult myaction int id return redirecttoaction index region so url when directed index http localhost default regionso lt href region&gt content should focus here&lt a&gt i am asking you can do like how can i add anchor tag my url,Great answer gdoron. Here's another way that I use (just to add to the available solutions here).return Redirect(String.Format("{0}#{1}" Url.RouteUrl(new { controller = "MyController" action = "Index" }) "anchor_hash");Obviously with gdoron's answer this could be made a cleaner with the following in this simple case;return new RedirectResult(Url.Action("Index") + "#anchor_hash");
how force bundlecollection flush cached script bundles mvc4,how i learned stop worrying just write code against completely undocumented apis from microsoft any actual documentation official system.web.optimization release cuz i sure can't find any xml docs all blog posts refer rc api which substantially different anyhoo i am writing some code automatically resolve javascript dependencies am creating bundles fly from those dependencies everything works great except you edit scripts otherwise make changes would affect bundle without restarting application changes won't reflected so i added option disable caching dependencies use development.however apparently bundletables caches url even bundle collection has changed example my own code when i want re create bundle i do something like remove existing bundlebundletable.bundles.remove bundletable.bundles.getbundlefor bundlealias recreate it.var bundle new scriptbundle bundlealias dependencies collection objects representing scripts creates new bundle from list foreach var item dependencies bundle.include item.path add new bundle collectionbundletable.bundles.add bundle bundlealias same alias used previously create bundle like mybundle1 var bundleurl bundletable.bundles.resolvebundleurl bundlealias returns something like mybundle1 v hzbkdmqvac8r_nme4oyz5qoq5flbihagguka28lylfq1 whenever i remove amp recreate bundle same alias absolutely nothing happens bundleurl returned from resolvebundleurl same before i removed amp recreated bundle same i mean content hash unchanged reflect new contents bundle edit actually much worse than bundle itself cached somehow outside bundles collection i just generate my own random hash prevent browser from caching script asp.net returns old script so apparently removing bundle from bundletable.bundles does actually do anything i can simply change alias get around problem ok development i don't like idea since means either i have deprecate aliases after each page load have bundlecollection grows size every page load you left production environment would disaster.so seems when script served gets cached independent actual bundletables.bundles object so you re use url even you've removed bundle referred before reusing responds whatever its cache altering bundles object does flush cache so only new items rather new items different name would ever used.the behavior seems odd removing something from collection should remove from cache doesn't must way flush cache have use current contents bundlecollection instead what cached when bundle first accessed any idea how i would do resetall method which has unknown purpose just breaks things anyway so isn't,I've got a similar problem.In my class BundleConfig I was trying to see what was the effect of using BundleTable.EnableOptimizations = true.  public class BundleConfig{public static void RegisterBundles(BundleCollection bundles){BundleTable.EnableOptimizations = true;bundles.Add(...);}}Everything was working fine.At some point I was doing some debugging and set the property to false.I struggled to understand what was happening cause it seemed that the bundle for jquery (the first one) wouldn't be resolved and loaded (/bundles/jquery?v=).After some swearing I think(?!) I've managed to sort things out.Try to add bundles.Clear() and bundles.ResetAll() at the beginning of the registration and things should start to work again.public class BundleConfig{public static void RegisterBundles(BundleCollection bundles){bundles.Clear();bundles.ResetAll();BundleTable.EnableOptimizations = false;bundles.Add(...);}}I've realized I need to run these two methods only when I change the EnableOptimizations property.  UPDATE:Digging deeper I've found out that BundleTable.Bundles.ResolveBundleUrl and @Scripts.Url seem to have problems to resolve the bundle path.  For sake of simplicity I've added a few images:I have turned off the optimization and bundled a few scripts.  The same bundle is included in the body.@Scripts.Url gives me the "optimized" path of the bundle while @Scripts.Render generates the proper one.Same thing happens with BundleTable.Bundles.ResolveBundleUrl.I am using Visual Studio 2010 + MVC 4 + Framework .Net 4.0.
could load file assembly system.net.http version 4.0.0.0 asp.net mvc 4 web api odata prerelease,problemafter installing microsoft asp.net web api odata package 5.0.0-rc1 prerelease i end up following exception could load file assembly system.web.http version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 my mvc 4 project brand new really small nothing fancy i target net framework 4.5i need nuget package implement patch using delta class when i use version 4.0.0.0 package delta class working how can i fix my versions system.web.httpin gac i have version 5.0.0.0 system.web.http gacutil l system.web.http global assembly cache contains following assemblies system.web.http version 5.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 processorarchitecture msilin visual studio when i browse assemblies given version system.web.http 4.0.0.0 why my project reference system.web.httphas version 5.0.0.0points lib net45 folder packagehas copylocal truethings i triedi tried bind redirect v 4.0.0.0 5.0.0.0 web.config lt dependentassembly&gt lt assemblyidentity name system.web.http publickeytoken 31bf3856ad364e35 culture neutral gt lt bindingredirect oldversion 4.0.0.0-4.0.0.0 newversion 5.0.0.0 gt lt dependentassembly&gt gives me another exception attempt method systemwebhttpglobalconfiguration cctor access field system.web.http.globalconfiguration.cs lt 9 cachedanonymousmethoddelegate2 failed.i guess v 4.0.0.0 really need used core web api engine.linked questionscode analysis error could load file assembly 39 system.net.http version 2.0.0.0 mvc4 web apicould load file assembly 39 system.net.http version 2.0.0.0 mvc4 web api,I made it work by upgrading the WebApi package to the prerelease version using nuget:PM&gt; Microsoft.AspNet.WebApi -PreIn order to force the project using the latest version of WebApi some modifications to the root Web.config were necessary: 1) Webpages Version from 2.0.0.0 to 3.0.0.0&lt;appSettings&gt;&lt;add key="webpages:Version" value="3.0.0.0" /&gt;&lt;/appSettings&gt;2) Binding redirect to 5.0.0.0 for System.Web.Http and System.Net.Http.Formatting&lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Web.Http" publicKeyToken="31bf3856ad364e35" culture="neutral" /&gt;&lt;bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" /&gt;&lt;/dependentAssembly&gt;&lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Net.Http.Formatting" publicKeyToken="31bf3856ad364e35" culture="neutral" /&gt;&lt;bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" /&gt;&lt;/dependentAssembly&gt;I think that's itPS: Solution highly inspired from WebAPI OData 5.0 Beta - Accessing GlobalConfiguration throws Security Error
invalidcastexception thrown after installing asp.net mvc 4 beta,i get following exception after installing asp.net mvc 4 beta machine asp.net mvc 3 system.invalidcastexception unhandled user codemessage system.web.webpages.razor.configuration.hostsection cannot cast b systemwebwebpagesrazorconfigurationhostsection type originates from system.web.webpages.razor version 1.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c windows microsoft.net assembly gac msil system.web.webpages.razor v4.0_1.0.0.0 31bf3856ad364e35 system.web.webpages.razor.dll type b originates from system.web.webpages.razor version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c windows microsoft.net assembly gac msil system.web.webpages.razor v4.0_2.0.0.0 31bf3856ad364e35 system.web.webpages.razor.dll source system.web.webpages.razorstacktrace system.web.webpages.razor.webrazorhostfactory.getrazorsection string virtualpath system.web.webpages.razor.webrazorhostfactory.createhostfromconfig string virtualpath string physicalpath system.web.webpages.razor.razorbuildprovider.gethostfromconfig system.web.webpages.razor.razorbuildprovider.createhost system.web.webpages.razor.razorbuildprovider.ensuregeneratedcode system.web.webpages.razor.razorbuildprovider.get codecompilertype system.web.compilation.buildprovider.getcompilertypefrombuildprovider buildprovider buildprovider system.web.compilation.buildproviderscompiler.processbuildproviders system.web.compilation.buildproviderscompiler.performbuild system.web.compilation.buildmanager.compilewebfile virtualpath virtualpath system.web.compilation.buildmanager.getvpathbuildresultinternal virtualpath virtualpath boolean nobuild boolean allowcrossapp boolean allowbuildinprecompile boolean throwifnotfound boolean ensureisuptodate system.web.compilation.buildmanager.getvpathbuildresultwithnoassert httpcontext context virtualpath virtualpath boolean nobuild boolean allowcrossapp boolean allowbuildinprecompile boolean throwifnotfound boolean ensureisuptodate system.web.compilation.buildmanager.getvirtualpathobjectfactory virtualpath virtualpath httpcontext context boolean allowcrossapp boolean throwifnotfound system.web.mvc.buildmanagerwrapper.system.web.mvc.ibuildmanager.fileexists string virtualpath system.web.mvc.buildmanagerviewengine.fileexists controllercontext controllercontext string virtualpath system.web.mvc.virtualpathproviderviewengine.getpathfromgeneralname controllercontext controllercontext list 1 locations string name string controllername string areaname string cachekey string amp searchedlocations system.web.mvc.virtualpathproviderviewengine.getpath controllercontext controllercontext string locations string arealocations string locationspropertyname string name string controllername string cachekeyprefix boolean usecache string amp searchedlocations system.web.mvc.virtualpathproviderviewengine.findview controllercontext controllercontext string viewname string mastername boolean usecache systemwebmvcviewenginecollection lt c displayclassc.b b iviewengine e system.web.mvc.viewenginecollection.find func 2 lookup boolean tracksearchedpaths system.web.mvc.viewenginecollection.findview controllercontext controllercontext string viewname string mastername system.web.mvc.viewresult.findview controllercontext context system.web.mvc.viewresultbase.executeresult controllercontext context system.web.mvc.controlleractioninvoker.invokeactionresult controllercontext controllercontext actionresult actionresult systemwebmvccontrolleractioninvoker lt c displayclass1c.b 19 system.web.mvc.controlleractioninvoker.invokeactionresultfilter iresultfilter filter resultexecutingcontext precontext func 1 continuation systemwebmvccontrolleractioninvoker lt c displayclass1c lt c displayclass1e.b 1b system.web.mvc.controlleractioninvoker.invokeactionresultwithfilters controllercontext controllercontext ilist 1 filters actionresult actionresult system.web.mvc.controlleractioninvoker.invokeaction controllercontext controllercontext string actionname system.web.mvc.controller.executecore project namespace controllers.globalizationcontroller.executecore file path system.web.mvc.controllerbase.execute requestcontext requestcontext system.web.mvc.controllerbase.system.web.mvc.icontroller.execute requestcontext requestcontext systemwebmvcmvchandler lt c displayclass6 lt c displayclassb.b 5 systemwebmvcasyncasyncresultwrapper lt c displayclass1.b 0 systemwebmvcasyncasyncresultwrapper lt c displayclass8 1.b 7 iasyncresult system.web.mvc.async.asyncresultwrapper.wrappedasyncresult 1.end systemwebmvcmvchandler lt c displayclasse.b d system.web.mvc.securityutil.b 0 action f system.web.mvc.securityutil.processinapplicationtrust action action system.web.mvc.mvchandler.endprocessrequest iasyncresult asyncresult system.web.mvc.mvchandler.system.web.ihttpasynchandler.endprocessrequest iasyncresult result system.web.httpapplication.callhandlerexecutionstep.system.web.httpapplication.iexecutionstep.execute system.web.httpapplication.executestep iexecutionstep step boolean&amp completedsynchronously blocks me completely while i would like keep beta i might need remove completely order get rid exception,I had the same problem but when migrating ASP.NET MVC 3 to ASP.NET MVC 4. This way I got on this topic.I have found a solution to the problem but its source is different it is not from WebPages version.I have followed the official guide (so to say) Upgrading an ASP.NET MVC 3 Project to ASP.NET MVC 4.To resolve the problem you have to add in Web.Config (probably around previously added ones):&lt;runtime&gt;&lt;!-- Should be there by default near end --&gt;&lt;assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1"&gt;&lt;!-- Should be there by default --&gt;&lt;dependentAssembly&gt;..&lt;/dependentAssembly&gt;&lt;!-- Should be there by default --&gt;... some other dependecy redirects ...&lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Web.WebPages.Razor"publicKeyToken="31bf3856ad364e35" /&gt;&lt;bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/&gt;&lt;/dependentAssembly&gt;... some other dependency redirects ...&lt;/assemblyBinding&gt;&lt;/runtime&gt;Also in the notes is not mentioned to change the Reference of System.Web.Helpers from 1.0.0.0 to 2.0.0.0 (delete and add the new one).
razor mvc populating javascript array model array,i'm trying load javascript array array from my model its seems me should possible.neither below ways work.cannot create javascript loop increment through model array javascript variablefor var j 0 j&lt 255 j jsarray model.data j cannot create razor loop javascript out scope@foreach var d model.data jsarray d i can get work withvar jsdata html.raw json.encode model.data i don't know why i should have use json also while moment i'm restricting 255 bytes future could run many mbs,JSON syntax is pretty much the JavaScript syntax for coding your object.  Therefore in terms of conciseness and speed your own answer is the best bet.  I use this approach when populating dropdown lists in my KnockoutJS model.  E.g. var desktopGrpViewModel = {availableComputeOfferings: ko.observableArray(@Html.Raw(JsonConvert.SerializeObject(ViewBag.ComputeOfferings)))desktopGrpComputeOfferingSelected: ko.observable()};ko.applyBindings(desktopGrpViewModel);...&lt;select name="ComputeOffering" class="form-control valid" id="ComputeOffering" data-val="true" data-bind="options: availableComputeOffering   optionsText: 'Name'   optionsValue: 'Id'   value: desktopGrpComputeOfferingSelect   optionsCaption: 'Choose...'"&gt;&lt;/select&gt;Note that I'm using Json.NET NuGet package for serialization and the ViewBag to pass data.
display string html asp.net mvc view,i have controller which generate string containing html markups.now when i am displaying views displayed simple string containing all tags i tried use html helper encode decode display properly working.string str lt href home profile seeker gt seeker&lt a&gt has applied lt href jobs details/9 gt job&lt a&gt floated you lt br&gt my views html.encode str,You should be using IHtmlString instead:IHtmlString str = new HtmlString("&lt;a href="/Home/Profile/seeker"&gt;seeker&lt;/a&gt; has applied to &lt;a href="/Jobs/Details/9"&gt;Job&lt;/a&gt; floated by you.&lt;/br&gt;");Whenever you have model properties or variables that need to hold HTML I feel this is generally a better practice. First of all it is a bit cleaner. For example:@Html.Raw(str)Compared to:@strAlso I also think it's a bit safer vs. using @Html.Raw() as the concern of whether your data is HTML is kept in your controller. In an environment where you have front-end vs. back-end developers your back-end developers may be more in tune with what data can hold HTML values thus keeping this concern in the back-end (controller).I generally try to avoid using Html.Raw() whenever possible.One other thing worth noting is I'm not sure where you're assigning str but a few things that concern me with how you may be implementing this.First this should be done in a controller regardless of your solution (IHtmlString or Html.Raw). You should avoid any logic like this in your view as it doesn't really belong there.Additionally you should be using your ViewModel for getting values to your view (and again ideally using IHtmlString as the property type). Seeing something like @Html.Encode(str) is a little concerning unless you were doing this just to simplify your example.
asp mvc href controller view,i have lt li&gt lt href users index class elements gt lt span&gt clients&lt span&gt lt a&gt lt li&gt which works fine i am already page controller eg users details i click link redirects me users index.how can i get correct path href regardless my current position site,how about&lt;li&gt;&lt;a href="@Url.Action("Index" "Users")" class="elements"&gt;&lt;span&gt;Clients&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
using partial views asp.net mvc 4,i have recently started playing around asp.net mvc 4 i can't wrap my head around one issue i'm having i'm sure easy when you know it.i m essentially trying do following my index view list current items database type note index view easy creating new items same index view so easy so i figured i needed partial view i have created following createnote.cshtml model quicknotes.models.note using html.beginform html.validationsummary true lt fieldset&gt lt legend&gt note&lt legend&gt lt div class editor label gt html.labelfor model gt model.content lt div&gt lt div class editor field gt html.editorfor model gt model.content html.validationmessagefor model gt model.content lt div&gt lt p&gt lt input type submit value create gt lt p&gt lt fieldset&gt my original index view index.cshtml i'm trying render partial view model ienumerable&lt quicknotes.models.note gt viewbag.title personal notes lt h2 gt personal notes&lt h2 gt lt p&gt html.actionlink create new create lt p&gt lt table&gt lt tr&gt lt th&gt html.displaynamefor model gt model.content lt th&gt lt th&gt lt th&gt lt tr&gt foreach var item model lt tr&gt lt td&gt html.displayfor modelitem gt item.content lt td&gt lt td&gt html.actionlink edit edit new id item.id html.actionlink details details new id item.id html.actionlink delete delete new id item.id lt td&gt lt tr&gt lt table&gt lt div&gt html.partial createnote lt div&gt using html.partial createnote however doesn't seem work i get following error message line 35 line 36 lt div&gt line 37 html.partial createnote line 38 lt div&gt source file c dropbox projects workspace net mvc quicknotes quicknotes views notes index.cshtmlline 37 stack trace invalidoperationexception model item passed dictionary type system.data.entity.dbset 1 quicknotes.models.note dictionary requires model item type quicknotes.models.note system.web.mvc.viewdatadictionary 1.setmodel object value 405487my notescontroller looks like public actionresult index var model db.notes return view model get notes createpublic actionresult create return view get notes createnote partial viewpublic viewresult createnote return view createnote i think has do fact index view using model differently model ienumerable matter how i change around using renderpartial renderaction changing actionresult viewresult etc i can't get work.any tips would greatly appreciated please let me know you need any more information i'd happy zip down entire project needed,You're passing the same model to the partial view as is being passed to the main view and they are different types. The model is a DbSet of Notes where you need to pass in a single Note. You can do this by adding a parameter which I'm guessing as it's the create form would be a new Note@Html.Partial("_CreateNote" new QuickNotes.Models.Note())
uploading displaying images mvc 4,anyone know any step step tutorials how upload display images from database using entity framework i've checked out code snippets i'm still clear how works i have code because aside from writing upload form i'm lost any i mean any help greatly appreciated sidenote why don't any books cover topic i have both pro asp.net mvc 4 professional mvc4 make mention,Here is a short tutorial:Model:namespace ImageUploadApp.Models{using System;using System.Collections.Generic;public partial class Image{public int ID { get; set; }public string ImagePath { get; set; }}}View:Create:@model ImageUploadApp.Models.Image@{ViewBag.Title = "Create";}&lt;h2&gt;Create&lt;/h2&gt;@using (Html.BeginForm("Create" "Image" null FormMethod.Post   new { enctype = "multipart/form-data" })) {@Html.AntiForgeryToken()@Html.ValidationSummary(true)&lt;fieldset&gt;&lt;legend&gt;Image&lt;/legend&gt;&lt;div class="editor-label"&gt;@Html.LabelFor(model =&gt; model.ImagePath)&lt;/div&gt;&lt;div class="editor-field"&gt;&lt;input id="ImagePath" title="Upload a product image"   type="file" name="file" /&gt;&lt;/div&gt;&lt;p&gt;&lt;input type="submit" value="Create" /&gt;&lt;/p&gt;&lt;/fieldset&gt;}&lt;div&gt;@Html.ActionLink("Back to List" "Index")&lt;/div&gt;@section Scripts {@Scripts.Render("~/bundles/jqueryval")}Index (for display):@model IEnumerable&lt;ImageUploadApp.Models.Image&gt;@{ViewBag.Title = "Index";}&lt;h2&gt;Index&lt;/h2&gt;&lt;p&gt;@Html.ActionLink("Create New" "Create")&lt;/p&gt;&lt;table&gt;&lt;tr&gt;&lt;th&gt;@Html.DisplayNameFor(model =&gt; model.ImagePath)&lt;/th&gt;&lt;/tr&gt;@foreach (var item in Model) {&lt;tr&gt;&lt;td&gt;@Html.DisplayFor(modelItem =&gt; item.ImagePath)&lt;/td&gt;&lt;td&gt;@Html.ActionLink("Edit" "Edit" new { id=item.ID }) |@Html.ActionLink("Details" "Details" new { id=item.ID }) |@Ajax.ActionLink("Delete" "Delete" new {id = item.ID} })&lt;/td&gt;&lt;/tr&gt;}&lt;/table&gt;Controller (Create)public ActionResult Create(Image img HttpPostedFileBase file){if (ModelState.IsValid){if (file != null){file.SaveAs(HttpContext.Server.MapPath("~/Images/")   + file.FileName);img.ImagePath = file.FileName;}  db.Image.Add(img);db.SaveChanges();return RedirectToAction("Index");}return View(img);}Hope this will help :)
how add get header values webapi,i need create post method webapi so i can send data from application webapi method i'm able get header value.here i have added header values application using var client new webclient set header so knows we sending json.client.headers httprequestheader.contenttype application json client.headers.add custom sample make requestvar response client.uploadstring url jsonobj following webapi post method public string postsam frombody object jsondata httprequestmessage re new httprequestmessage var headers re.headers headers.contains custom string token headers.getvalues custom first what correct method getting header values thanks,Suppose we have a API Controller ProductsController : ApiControllerThere is a Get function which returns some value and expects some input header (for eg. UserName &amp; Password)[HttpGet]public IHttpActionResult GetProduct(int id){System.Net.Http.Headers.HttpRequestHeaders headers = this.Request.Headers;string token = string.Empty;string pwd = string.Empty;if (headers.Contains("username")){token = headers.GetValues("username").First();}if (headers.Contains("password")){pwd = headers.GetValues("password").First();}//code to authenticate and return some thingif (!Authenticated(token pwd)return Unauthorized();var product = products.FirstOrDefault((p) =&gt; p.Id == id);if (product == null){return NotFound();}return Ok(product);}Now we can send the request from page using JQuery:$.ajax({url: 'api/products/10'type: 'GET'headers: { 'username': 'test''password':'123' }success: function (data) {alert(data);}failure: function (result) {alert('Error: ' + result);}});Hope this helps someone ...
using msbuild.exe ldquo publish&rdquo asp.net mvc 4 project cmd line,i'm looking command run against msbuild.exe just takes mvc 4 project publishes given directory.for example msbuild lt solution&gt lt project&gt csproj publish output c folderthis obviously incorrect syntax i'm trying simplify my question.this question talks build xml i'm trying do anything much detail.i m simply trying do deploy.further down question someone speaks msdeploy i can look only option i do have ability install web deploy server which case all i really need do publish send contents published project given directory server file system.does anyone have one liner i can use do i have use msdeploy does msdeploy require web deploy installed server doesn't setting up web deploy server require setting up some ports permissions installing some iis add ons i'd love just execute something simple,Create a build.xml file thats look like belowStart Visual Studio command promptRun msbuild build.xml&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" DefaultTargets="Build"&gt;  &lt;PropertyGroup&gt;&lt;Build&gt;$(MSBuildProjectDirectory)\Build&lt;/Build&gt;&lt;ProjectFile&gt;MyProject.csproj&lt;/ProjectFile&gt; &lt;ProjectName&gt;MyProjectNameInVisualStudio&lt;/ProjectName&gt;&lt;CopyTo&gt;$(MSBuildProjectDirectory)\CopyTo&lt;/CopyTo&gt;  &lt;/PropertyGroup&gt;   &lt;Target Name="Build"&gt; &lt;RemoveDir Directories="$(Build)"/&gt;  &lt;MSBuild Projects="$(ProjectFile)" Properties="Configuration=Release;OutputPath=$(Build);OutDir=$(Build)/"&gt;&lt;/MSBuild&gt;  &lt;Exec Command="robocopy.exe  $(Build)\_PublishedWebsites\$(ProjectName) $(CopyTo) /e /is  if %errorlevel% leq 4 exit 0 else exit %errorlevel%"/&gt;  &lt;/Target&gt;&lt;/Project&gt;
how allow only numbers textbox mvc4 razor,i have 3 text box which takes values postal code amp mobile number amp residential number.i got solution allowing only number text box using jquery from bellow post.i would like make editfor textbox accept numbers onlybut can we do using data annotations i am using mvc4 razor,i was just playing around with HTML5 input type=number. while its not supported by all browsers I expect it is the way going forward to handle type specific handling (number for ex). pretty simple to do with razor (ex is VB)@Html.TextBoxFor(Function(model) model.Port New With {.type = "number"})and thanks to Lee Richardson the c# way@Html.TextBoxFor(i =&gt; i.Port new { @type = "number" }) beyond the scope of the question but you could do this same approach for any html5 input type
asp.net mvc 4 intercept all incoming requests,way me catch all incoming requests my asp.net mvc 4 app run some code before continuing request onward specified controller action i need run some custom auth code existing services do properly i'll need able intercept all incoming requests from all clients double check some things other service,You can use a HttpModule to accomplish this. Here is a sample I use to calculate the process time for all requests:using System;using System.Diagnostics;using System.Web;namespace Sample.HttpModules{public class PerformanceMonitorModule : IHttpModule{public void Init(HttpApplication httpApp){httpApp.BeginRequest += OnBeginRequest;httpApp.EndRequest += OnEndRequest;httpApp.PreSendRequestHeaders += OnHeaderSent;}public void OnHeaderSent(object sender EventArgs e){var httpApp = (HttpApplication)sender;httpApp.Context.Items["HeadersSent"] = true;}// Record the time of the begin request event.public void OnBeginRequest(Object sender EventArgs e){var httpApp = (HttpApplication)sender;if (httpApp.Request.Path.StartsWith("/media/")) return;var timer = new Stopwatch();httpApp.Context.Items["Timer"] = timer;httpApp.Context.Items["HeadersSent"] = false;timer.Start();}public void OnEndRequest(Object sender EventArgs e){var httpApp = (HttpApplication)sender;if (httpApp.Request.Path.StartsWith("/media/")) return;var timer = (Stopwatch)httpApp.Context.Items["Timer"];if (timer != null){timer.Stop();if (!(bool)httpApp.Context.Items["HeadersSent"]){httpApp.Context.Response.AppendHeader("ProcessTime"  ((double)timer.ElapsedTicks / Stopwatch.Frequency) * 1000 +  " ms.");}}httpApp.Context.Items.Remove("Timer");httpApp.Context.Items.Remove("HeadersSent");}public void Dispose() { /* Not needed */ }}}And this is how you register the module in Web.Config:&lt;system.webServer&gt;&lt;modules runAllManagedModulesForAllRequests="true"&gt;&lt;add name="PerformanceMonitorModule" type="Sample.HttpModules.PerformanceMonitorModule" /&gt;&lt;/modules&gt;&lt;//system.webServer&gt;
angular.js asp.net mvc 4 closed,i have asp.net mvc 4 project i'm stuck architectural decision which javascript framework library use angular.js knockjs i am currently leaning towards using angular.js over knockout.js don't want find out midway during project development i made mistake.here some background we need two way model data bindingwe need ability test views i want able do end end unit testing also we using continuous integration save changes functionality ie user makes changes page we need ability detect any changes prompt user save changes before navigate away from page notifications functionality ie user logged approximately 8 hours need notified updated changes made other users errors data status changes like we need future proof our application currently business unit hasn't decided we need support mobile devices i know just matter time.our team consists developers varying experience levels from very junior senior developers.currently our models complicated may get even more sowe need also consider rad code reuse maintainabilityi have read excellent answer here watched scott allen interview about angular heresince we unable change from our current asp.net mvc 4 architecture use something server side like web api i have some concerns trying implement angular.js mvc 4 cause us have two models one server one client i am looking which better discussion about angular knockout because i think both have pros cons i am looking actual code implementing javascript framework library asp.net mvc 4 application i need solution i can live 2 years from now any ideas suggestions maybe answer knock angular some other javascript framework,my 2 cents worth.preamble - i have worked with both angular and knockout.I'm on my 3rd non trivial front end built with a MVVM/MVC lib.I started with knockout because its MVVM is very similar to the wpf/silverlight mechanics. And it works well.  The tutorials and documentation are top notch.  All your coders will be able to work with knockout.js within days or if they have used mvvm under .net then within hours.However these days I am using angular and will probably stick with it for the following reasons.angular is a complete framework - knockout is really about just the 2way binding. you still need other libraries like backbone.js/jqueryto do the rest of your work.angular has dependency injection.  which is perfect for addingmocking for testing as well as giving structure to your code.angular treats normal JS variables as observables within its $scopeobject. that means you dont have to declare them in a special wayI'm not an angular fanboy i still think they could move more over to the MVVM architecture instead of the "funky" MVVM/MVC hybrid architecture they currently have.The biggest problem with angular is the documentation.  Compared to knockout it is woeful. It will add additional time and cost to getting your coders up to speed.  Once they are there however it is currently the best choice IMHO.
how update claim asp.net identity,i'm using owin authentication my mvc5 project.this my signinasync private async task signinasync applicationuser user bool ispersistent var accountno 101 authenticationmanager.signout defaultauthenticationtypes.externalcookie var identity await usermanager.createidentityasync user defaultauthenticationtypes.applicationcookie identity.addclaim new claim claimtypes.userdata accountno authenticationmanager.signin new authenticationproperties ispersistent ispersistent redirecturi account index identity you can see i added accountno claims list.now how can i update claim some point my application so far i have public string accountno get var cp claimsprincipal.current.identities.first var account cp.claims.firstordefault p gt p.type claimtypes.userdata return account.value set var cp claimsprincipal.current.identities.first var accountno cp.claims.firstordefault p gt p.type claimtypes.userdata value cp.removeclaim new claim claimtypes.userdataaccountno cp.addclaim new claim claimtypes.userdata value when i try remove claim i get exception claim http schemas.microsoft.com ws/2008/06 identity claims userdata 101 able removed either part identity claim owned principal contains identity example principal own claim when creating genericprincipal roles roles exposed through identity passed constructor actually owned identity similar logic exists roleprincipal.could someone help me figure out how update claim,I created a Extension method to Add/Update/Read Claims based on a given ClaimsIdentitynamespace Foobar.Common.Extensions{public static class Extensions{public static void AddUpdateClaim(this IPrincipal currentPrincipal string key string value){var identity = currentPrincipal.Identity as ClaimsIdentity;if (identity == null)return;// check for existing claim and remove itvar existingClaim = identity.FindFirst(key);if (existingClaim != null)identity.RemoveClaim(existingClaim);// add new claimidentity.AddClaim(new Claim(key value));var authenticationManager = HttpContext.Current.GetOwinContext().Authentication;authenticationManager.AuthenticationResponseGrant = new AuthenticationResponseGrant(new ClaimsPrincipal(identity) new AuthenticationProperties() { IsPersistent = true });}public static string GetClaimValue(this IPrincipal currentPrincipal string key){var identity = currentPrincipal.Identity as ClaimsIdentity;if (identity == null)return null;var claim = identity.Claims.FirstOrDefault(c =&gt; c.Type == key);return claim.Value;}}}and then to use itusing Foobar.Common.Extensions;namespace Foobar.Web.Main.Controllers{public class HomeController : Controller{public ActionResult Index(){// add/updating claimsUser.AddUpdateClaim("key1" "value1");User.AddUpdateClaim("key2" "value2");User.AddUpdateClaim("key3" "value3");}public ActionResult Details(){// reading a claimvar key2 = User.GetClaim("key2");   }}}
view its master found view engine supports searched locations,error like view loginregister its master found view engine supports searched locations following locations were searched views myaccount loginregister.aspx views myaccount loginregister.ascx views shared loginregister.aspx views shared loginregister.ascx views myaccount loginregister.cshtml views myaccount loginregister.vbhtml views shared loginregister.cshtml views shared loginregister.vbhtmlactually my page view page views home loginregister.cshtml so what i doand my routeconfig public class routeconfig public static void registerroutes routecollection routes routes.ignoreroute resource axd pathinfo routes.maproute name default url controller action id defaults new controller myaccount action loginregister id urlparameter.optional,Be careful if your model type is String because the second parameter of View(string string) is masterName not model. You may need to call the overload with object(model) as the second paramater:Not correct : protected ActionResult ShowMessageResult(string msg){return View("Message"msg);}Correct : protected ActionResult ShowMessageResult(string msg){return View("Message"(object)msg);}OR (provided by bradlis7): protected ActionResult ShowMessageResult(string msg){return View("Message"model:msg);}
creating service layer my mvc application,from what i understand mvc separates class definitions model from presentation view via glue controller controller should have single responsibility therefore testable viewmodels used bring together data from multiple entities massage data from controller view seems like business logic doesn't really have place so i'm thinking another layer services would suitable i'm just sure where place layer how build services should class called services contains bunch functions i'm bit new mvc so any reading material samples general newcomer kind tips would awesome,My advice is to create a separate classes called "services". Put them in different class library (or namespace) project and make them independent on MVC framework infrastructure. I recommend to use also some kind of dependency injection (the best is constructor injection). Then your service classes may look like: public class MyService : IMyService { IFirstDependency _firstService; ISecondDependency _secondService; public MyService(IFirstDependency firstService ISecondDependency secondService) { } public Result DoStuf(InputDTO) { // some important logic  } }Then you consume these service from your controllers. Look here for complete example. According Repositories - my advice is to do not use them if you are going to use some modern ORM (NHibernate EntityFramework) because your business logic will be encapsulated in the Service Layer and your database will be already encapsulated with the ORM framework.
asp.net mvc how disable automatic caching option,how disable automatic browser caching from asp.net mvc application because i am having problem caching caches all links sometimes redirected default index page automatically which stored caching all time i click link redirect me default index page.so some one know how manually disable caching option from asp.net mvc 4,HackedByChinese is missing the point. He mistook server cache with client cache. OutputCacheAttribute controls server cache (IIS http.sys cache) not browsers (clients) cache.I give you a very small part of my codebase. Use it wisely. [AttributeUsage(AttributeTargets.Method | AttributeTargets.Class)]public sealed class NoCacheAttribute : FilterAttribute IResultFilter{public void OnResultExecuting(ResultExecutingContext filterContext){}public void OnResultExecuted(ResultExecutedContext filterContext){var cache = filterContext.HttpContext.Response.Cache;cache.SetCacheability(HttpCacheability.NoCache);cache.SetRevalidation(HttpCacheRevalidation.ProxyCaches);cache.SetExpires(DateTime.Now.AddYears(-5));cache.AppendCacheExtension("private");cache.AppendCacheExtension("no-cache=Set-Cookie");cache.SetProxyMaxAge(TimeSpan.Zero);}}Usage:/// will be applied to all actions in MyController[NoCache]public class MyController : Controller{// ... }Use it wisely as it really disables all client cache. The only cache not disabled is the "back button" browser cache. But is seems there is really no way to get around it. Maybe only by using javascript to detect it and force page or page zones refresh.
controller path found does implement icontroller,i have mvc4 project language selection ennlfrde1 main part aboutcommon menu contactfaqhomeand 3 areas admincustomersshopin each area i have least one controller example admin i have controller overview corresponding view folder overview which contains index.aspx page.the home page all main pages about faq etc work can visited however when i follow url localhost xxxx en admin overviewi get error controller path en admin overview found does implement icontroller.even though route correct i can see route debugger error page also shows error thrown when i wanted load my main menu items lt nav id site navigation class eightcol gt html.action menuitems common lt nav&gt code removed because irrelevant everything seems order mvc doesn't seem able load menu which located main part.so root problem can i grant area eg admin access controllers main part home common about etc my project,In my case the same error was not related to Area but thought to post the error caused in my case which may be helpful for the people who come to this thread by searching "The controller for path was not found or does not implement IController"The error was caused because of wrong entry in _Layout.cshtml file. @Styles.Render("~/Content/misc")The bundle with that name was removed in BundleConfig.cs but forgot to remove it in _Layout.cshtmlIt was silly but we programmers always do lot of silly mistakes :)
how mock createresponse&lt t&gt extension method httprequestmessage,i'm using asp.net mvc 4 rc apicontroller i'm trying unit test get method.this method uses createresponse&lt t&gt method httprequestmessage i've idea how mock make function correctly method body contains mediatypeheadervalue header new mediatypeheadervalue versionedsmartblock.contenttype var response request.createresponse lt smartblock&gt httpstatuscode.ok versionedsmartblock header within my unit test i create empty httprequestmessage callscontroller api new callscontroller managermock.object config adapterfactorymock.object api.request new httprequestmessage httpmethod.get http localhost initiate ern 2b44123456789 var response api.get 44123456789 null just generates invalidoperationexception request does have associated configuration object provided configuration null.has anyone got any pointers how i can configure httprequestmessage so createresponse method actually does its job,WebAPI 1 with VB here!I managed to hybrid responses from your link above to get this to work as simple as this:Dim request As HttpRequestMessage = New HttpRequestMessage()Return request.CreateResponse(HttpStatusCode.BadRequest myCustomClassObject GlobalConfiguration.Configuration)Just posting in case it helps anyone.
passing data between different controller action methods,i'm using asp.net mvc 4 i am trying pass data from one controller another controller i'm getting right i'm sure possible here my source action method where i want pass data from public class servercontroller controller httppost public actionresult applicationpoolsupdate serviceviewmodel viewmodel xdocument updatedresultsdocument myservice.updateapplicationpools redirect applicationpool controller pass updatedresultsdocument used updateconfirmation action method i need pass action method controller public class applicationpoolcontroller controller public actionresult updateconfirmation xdocument xdocument add implementation code return view i have tried following applicationpoolsupdate action method doesn't work return redirecttoaction updateconfirmation applicationpool new xdocument updatedresultsdocument return redirecttoaction updateconfirmation new controller applicationpool xdocument updatedresultsdocument how would i achieve,Have you tried using ASP.NET MVC TempData ?  ASP.NET MVC TempData dictionary is used to share data between controller actions. The value of TempData persists until it is read or until the current user’s session times out. Persisting data in TempData is useful in scenarios such as redirection when values are needed beyond a single request.The code would be something like this:[HttpPost]public ActionResult ApplicationPoolsUpdate(ServiceViewModel viewModel){XDocument updatedResultsDocument = myService.UpdateApplicationPools();TempData["doc"] = updatedResultsDocument;return RedirectToAction("UpdateConfirmation");}And in the ApplicationPoolController:public ActionResult UpdateConfirmation(){if (TempData["doc"] != null){XDocument updatedResultsDocument = (XDocument) TempData["doc"];...return View();}}
razor views seeing system.web.mvc.htmlhelper,i am process upgrading mvc4 i have followed instructions http www.asp.net whitepapers/mvc4-release notes toc303253806 my razor views layouts i have errors like system.web.webpages.html.htmlhelper does contain definitionfor beginrouteform extension method beginrouteform'accepting first argument type'system web.webpages.html.htmlhelper could found you missinga using directive assembly reference i also have errors like name viewbag does exist current contextwhen i hover over html i can see type system.web.webpages.html.htmlhelper system.web.mvc.htmlhelpernot really sure what other information pertinent where i am i haven't updated class librarys etc sln net 4.5 yet.the project created vs2010 i am doing migration invs2012 project opens runs ok vs2012 net 4.0 mvc 3any pointers appreciated.edit all references files web.config upgraded system.web.mvc version 4.0.0.0 system.web.webpages version 2.0.0.0system.web.helpers version 2.0.0.0 system.web.webpages.razorversion 2.0.0.0edit 2 my views web.config views shared web.config i try paul s solution below element i have my own base type which inherits from system.web.mvc.webviewpage references containing library have been updated mvc4 go definition takes me mvc4 dll.has anything changed area new release i couldn't see anything pertinent release notes,I ran into this issue with a Web Application - my .cshtml files got stuck on the System.Web.WebPages.WebViewPage base class when I needed the System.Web.Mvc.WebViewPage.  First ensure your ~/Views/web.config file has the correct pageBaseType. In my case I set to System.Web.Mvc.WebViewPage.&lt;configuration&gt;  &lt;system.web.webPages.razor&gt;&lt;pages pageBaseType="System.Web.Mvc.WebViewPage"&gt;  &lt;!-- ... --&gt;&lt;/pages&gt;  &lt;/system.web.webPages.razor&gt;&lt;/configuration&gt;Then importantly some people have found this is key if the above is already good:Run a clean on the solutionUnload the project with the issuesDelete the .user file that Visual Studio generated next to the project. Reload the project with the issuesBuild the solutionFor VS2015 the .user and .sln files have moved to the .vs hidden folder that is created next to the .sln file. However from comments below the error messages imply to me that the tooling is using the wrong version of MVC entirely and deleting this folder does not fix the issue.  To my knowledge there is not a known solution.
how do you debug mvc 4 api routes,i have wp7 game uses restsharp communicate my mvc4 restful server i often have issues making requests work therefore i want debug where fails.this example where constructor my gamecontroller hit post method hit i don't understand why.client code public void joinrandomgame client new restclient cookiecontainer new cookiecontainer baseurl http localhost 21688/api client.authenticator getauth restrequest request new restrequest method.post requestformat dataformat.json resource game client.postasync request response ds gt server code public void post int id controllercontext.request.headers.authorization null auth loginmanager.verifylogin controllercontext.request.headers.authorization.parameter failed login string username string password loginmanager.decodebase64 controllercontext.request.headers.authorization.parameter out username out password gamemanager.joinrandomgame username my routes like thisroutes.maphttproute name gameapi routetemplate api game gameid defaults new controller game gameid routeparameter.optional,Another way is to add an event handler in Global.asax.cs to pick up the incoming request and then look at the route values in the VS debugger. Override the Init method as follows: public override void Init(){base.Init();this.AcquireRequestState += showRouteValues;}protected void showRouteValues(object sender EventArgs e){var context = HttpContext.Current;if (context == null)return;var routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(context)); }Then set a breakpoint in showRouteValues and look at the contents of routeData.  Keep in mind that in a Web API project the Http routes are in WebApiConfig.cs not RouteConfig.cs.
login request validation token issue,i have been going through error logs development project found following error name changed protect guilty innocent provided anti forgery token meant user current user admin especially difficult issue reproduce open application login pageopen second window tab same browser same computer login page before logging inlogin first window indeed second order doesn't matter attempt login remaining login windowthe stack trace system.web.mvc.httpantiforgeryexception 0x80004005 provided anti forgery token meant user current user admin system.web.helpers.antixsrf.tokenvalidator.validatetokens httpcontextbase httpcontext iidentity identity antiforgerytoken sessiontoken antiforgerytoken fieldtoken system.web.helpers.antixsrf.antiforgeryworker.validate httpcontextbase httpcontext system.web.helpers.antiforgery.validate system.web.mvc.validateantiforgerytokenattribute.onauthorization authorizationcontext filtercontext system.web.mvc.controlleractioninvoker.invokeauthorizationfilters controllercontext controllercontext ilist 1 filters actiondescriptor actiondescriptor systemwebmvcasyncasynccontrolleractioninvoker lt c displayclass25.b 1e asynccallback asynccallback object asyncstate login method signature httppost allowanonymous validateantiforgerytoken public actionresult login loginmodel model string returnurl exactly same signature method internet asp.net mvc 4 web application templated project which indicates microsoft either felt validateantiforgerytoken necessary best practice simply added attribute here because used everywhere else.obviously nothing i can do handle problem within method isn't reached validateantiforgerytoken pre request filter blocking request before reaches controller.i could check user authenticated via ajax before submitting form attempt redirect them so simply remove attribute.the question i understand token design prevent requests from another site csrf when user already authenticated against your site so basis issue remove from form which definition used unauthenticated users presumably attribute instance designed mitigate malicious actors providing fake login forms your application although time exception thrown presumably user has already entered his her details which have been recorded might alert them something wrong otherwise submitting incorrect credentials form from external site result exactly same result site itself surely i am relying client validation sanitation clean up potentially unsafe input.have other devs come across issue do we have unusually creative users so how have you resolved mitigated update issue still exists mvc5 entirely intentionally now error message provided anti forgery token meant different claims based user than current user when using default template identity providers relevant question interesting answer from microsoft developer evangelist troy fellow pluralsight author adam tuliper anti forgery token login page which recommends simply removing token,The validation code that runs against an AntiForgeryToken also checks your logged in user credentials haven’t changed – these are also encrypted in the cookie. This means that if you logged in or out in a popup or another browser tab your form submission will fail with the following exception:System.Web.Mvc.HttpAntiForgeryException (0x80004005):The provided anti-forgery token was meant for user "" but the current user is "SomeOne".You can turn this off by putting AntiForgeryConfig.SuppressIdentityHeuristicChecks = true; in Application_Start method inside Global.asax file.When a AntiForgeryToken doesn’t validate your website will throw an Exception of type System.Web.Mvc.HttpAntiForgeryException. You can make this a little easier by at least giving the user a more informative page targeted at these exceptions by catching the HttpAntiForgeryException.private void Application_Error(object sender EventArgs e){Exception ex = Server.GetLastError();if (ex is HttpAntiForgeryException)  {Response.Clear();Server.ClearError(); //make sure you log the exception firstResponse.Redirect("/error/antiforgery" true);  }}
asp.net webapi publish xml files copy,i have mvc 4.0 webapi project auto generated help based this.my model classes stored another projects my solution generation xml file enabled every project project properties build output xml documentation file enabled local debug all ok xml files copied project directory i see comments fields classes from another projects.but when i use publish profile folder xml files don't copy output folder only one xml file from main webapi project copied so i don't see comments classes from other projects,I had a similar issue for the me the answer was a bit of a "doh!" moment.In the project settings I had only enabled the XML documentation file under the Debug configuration and not under Release. I was deploying with Release and so the XML documentation was not actually getting generated. So the fix was making sure to enable the XML documentation for both Debug and Release configurations.
could load file assembly 39 webgrease version 1.5.1.25624 culture neutral publickeytoken 31bf3856ad364e35 39 one its dependencies,i have mvc4 web api project while running service project i am getting error could load file assembly webgrease version 1.5.1.25624 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies system cannot find file specified.i have added webgrease.dll file still its coming errorand tried changing web.config lt bindingredirect oldversion 0.0.0.0-1.3.0.0 gt and&lt bindingredirect oldversion 0.0.0.0-1.5.2.14234 newversion 1.5.2.14234 gt please advice what i am missing,I know it's kind of late for the OP but I ran into the same problem while trying out the Bootstrap 3 for MVC 4 NuGet package in my case it had something to do with the Microsoft.AspNet.Web.Optimization package and managed to find a simple solution.Try executing the following commands in the package manager console:Install-Package Microsoft.AspNet.Web.OptimizationUpdate-Package WebGreaseUninstall-Package Microsoft.AspNet.Web.OptimizationUninstall-Package WebGreaseInstall-Package Microsoft.AspNet.Web.OptimizationUpdate-Package WebGreaseThe first two lines had no effect for me since those packages were already installed and updated by the Bootstrap 3 for MVC 4 package but I ran them anyway and then it all compiled and ran great.
why my css bundling working bin deployed mvc4 app,i have bin deployed mvc4 application my hosting provider based advice given here one two fly fixes most immediately apparent problem bundling css doesn't work when i replace bundle ref explicit file refs my css works again.i am using standard mvc4 rtm project template from vs2012 provider running iis 7.5 asp.net 4 my previous mvc3 version same app worked fine i am guessing i have grabbed dependency somewhere too low version might also contribute my area based action link problem.technical symptoms line styles.render content css renders lt link href content css v rel stylesheet gt,UPDATE 11/4/2013:The reason why this happens is because you have .js or .css at the end of your bundle name which causes ASP.NET to not run the request through MVC and the BundleModule.The recommended way to fix this for better performance is to remove the .js or .css from your bundle name.So /bundle/myscripts.js becomes /bundle/myscriptsAlternatively you can modify your web.config in the system.webServer section to run these requests through the BundleModule (which was my original answer)&lt;modules runAllManagedModulesForAllRequests="true"&gt;  &lt;remove name="BundleModule" /&gt;  &lt;add name="BundleModule" type="System.Web.Optimization.BundleModule" /&gt;&lt;/modules&gt;Edit: I also noticed that if the name ends with 'css' (without the dot) that is a problem as well. I had to change my bundle name from 'DataTablesCSS' to 'DataTablesStyles' to fix my issue.
adding css class html.beginform,how add class attribute following situation using returnurl only using html.beginform new returnurl viewbag.returnurl i want something like using html.beginform new returnurl viewbag.returnurl new class login form,Or simply using html :&lt;form action="/ActionName/ControllerName" method="post" class="login-form"&gt;&lt;/form&gt;
cannot attach file mdf database,basically i've followed tutorial decided delete mdf file afterwards.now whenever i try run application i get following error title thread code where i get error shown below asp.net mvc 4 odetofooddb db new odetofooddb public actionresult index var model db.restaurants.tolist return view model my connection string following lt add name defaultconnection connectionstring data source localdb v11.0 initial catalog odetofooddb integrated security sspi attachdbfilename datadirectory odetofooddb.mdf providername system.data.sqlclient gt i've tried looking sql server object explorer looks following also server explorer i don't see any data connections.and when i try add new connection server explorer i don't see any databases named odetofooddb.sorry wide question i'm new entity framework don't quite get what wrong here,I think that for SQL Server Local Db you shouldn't use the Initial Catalog property.I suggest to use:&lt;add name="DefaultConnection"  connectionString="Data Source=(LocalDb)\v11.0;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\OdeToFoodDb.mdf"  providerName="System.Data.SqlClient" /&gt;I think that local db doesn't support multiple database on the same mdf file so specify an initial catalog is not supported (or not well supported and I have some strange errors).
deserialize json array list httpclient readasasync using net 4.0 task pattern,i'm trying deserialize json returned from http api.usa.gov jobs search.json query nursing jobs using net 4.0 task pattern returns json load json data http jsonviewer.stack.hu id usajobs 353400300 position title nurse organization name indian health service rate interval code pa minimum 42492 maximum 61171 start date 2013-10-01 end date 2014-09-30 locations gallup nm url https www.usajobs.gov getjob viewdetails/353400300 id usajobs 359509200 position title nurse organization name indian health service rate interval code pa minimum 42913 maximum 61775 start date 2014-01-16 end date 2014-12-31 locations gallup nm url https www.usajobs.gov getjob viewdetails/359509200 index action public class homecontroller controller public actionresult index jobs model null var client new httpclient var task client.getasync http api.usa.gov jobs search.json query nursing jobs continuewith taskwithresponse gt var response taskwithresponse.result var jsontask response.content.readasasync lt jobs&gt jsontask.wait model jsontask.result task.wait jobs job class jsonarray public class jobs public list&lt job&gt json public class job jsonproperty organization name public string organization get set jsonproperty position title public string title get set when i set breakpoint jsontask.wait examine jsontask status isfaulted innerexception type projectname.jobs collection i started jobs type without jsonarray attribute jobs array job got error public class jobs public job json innerexception cannot deserialize current json array eg 123 type projectname.models.jobs because type requires json object eg name value deserialize correctly r nto fix error either change json json object eg name value change deserialized type array type implements collection interface eg icollection ilist like list&lt t&gt can deserialized from json array jsonarrayattribute can also added type force deserialize from json array r npath line 1 position 1 system.exception newtonsoft.json.jsonserializationexception how would i process site json net 4.0 task pattern i would like get working before moving onto await async pattern net 4.5.answer update here example using net 4.5 async await pattern brumscouse answer public async task&lt actionresult&gt index list&lt job&gt model null var client newhttpclient net 4.5 async await patternvar task await client.getasync http api.usa.gov jobs search.json query nursing jobs var jsonstring await task.content.readasstringasync model jsonconvert.deserializeobject lt list&lt job&gt gt jsonstring returnview model you need bring system.threading.tasks namespace.note readasstring method available content which why i used readasstringasync method,var response = taskwithresponse.Result;  var jsonString = response.ReadAsAsync&lt;List&lt;Job&gt;&gt;().Result;
enable migrations context separate assembly,i have one project i want run my update database against i have my models context separate project.if i run enable migrations i get error context type found assembly myproject presumably because my context myproject.mvc.if i run enable migrations against myproject.mvc i have add app config file i don't want do i want use code across many projects.so can i run enable migrations against myproject somehow tell look myproject.mvc context,This will only work in EF 6 but there was a release that added the -ContextProjectName parameter to the -enable-migrations command. By using this command you could do the following:enable-migrations -ContextProjectName MyProject.MVC -StartUpProjectName MyProject.MVC -ContextTypeName MyProject.MVC.MyContextFolder.MyContextName -ProjectName MyProjectThis will add migrations to your MyProject project using the context in the MyProject.MVC.You need to make sure that the project with the Migrations has a reference to the project with your Context i.e. MyProject references MyProject.MVC
difference between asp.net mvc 3 4 closed,comprehensive list explains all new features mvc4 what all has changed from mvc3 release notes much helpful,Copy and paste from Whats new in MVC4 - MVC3 Vs MVC4  Whats new in MVC4 - MVC3 Vs MVC4Enhancements to Default Project TemplatesThe template that is used to create new ASP.NET MVC 4 projects has been updated to create a more modern-looking websiteMobile Project TemplateIf you’re starting a new project and want to create a site specifically for mobile and tablet browsers you can use the new Mobile Application project template. This is based on jQuery Mobile an open-source library for building touch-optimized UIDisplay ModesThe new Display Modes feature lets an application select views depending on the browser that's making the request. For example if a desktop browser requests the Home page the application might use the Views\Home\Index.cshtml template. If a mobile browser requests the Home page the application might return the Views\Home\Index.mobile.cshtml template.DisplayModes.Modes.Insert(0 new DefaultDisplayMode("iPhone"){  ContextCondition = (context =&gt; context.Request.UserAgent.IndexOf("iPhone" StringComparison.OrdinalIgnoreCase) &gt;= 0)});jQuery Mobile the View Switcher and Browser OverridingjQuery Mobile is an open source library for building touch-optimized web UI. If you want to use jQuery Mobile with an ASP.NET MVC 4 application you can download and install a NuGet package that helps you get started. To install it from the Visual Studio Package Manager Console type the following command:Install-Package jQuery.Mobile.MVCThis installs jQuery Mobile and some helper files including the following:Views/Shared/Layout.Mobile.cshtml which is a jQuery Mobile-based layout.A view-switcher component which consists of the Views/Shared/ViewSwitcher.cshtml partial view and the ViewSwitcherController.cs controller.After you install the package run your application using a mobile browser (or equivalent like the Firefox User Agent Switcher add-on). You'll see that your pages look quite different because jQuery Mobile handles layout and styling. To take advantage of this you can do the followingIf visitors click the link they’re switched to the desktop version of the same page.Because your desktop layout will not include a view switcher by default visitors won't have a way to get to mobile mode. To enable this add the following reference to _ViewSwitcher to your desktop layout just inside the element:@Html.Partial("_ViewSwitcher")...Browser Overriding is a core feature of ASP.NET MVC 4 and is available even if you don't install the jQuery.Mobile.MVC package. However it affects only view layout and partial-view selection — it does not affect any other ASP.NET feature that depends on the Request.Browser object.Recipes for Code Generation in Visual StudioThe new Recipes feature enables Visual Studio to generate solution-specific code based on packages that you can install using NuGet. The Recipes framework makes it easy for developers to write code-generation plugins which you can also use to replace the built-in code generators for Add Area Add Controller and Add View. Because recipes are deployed as NuGet packages they can easily be checked into source control and shared with all developers on the project automatically. They are also available on a per-solution basis.Task Support for Asynchronous ControllersYou can now write asynchronous action methods as single methods that return an object of type Task or Task.For example if you're using Visual C# 5 (or using the Async CTP) you can create an asynchronous action method that looks like the following:public async Task Index(string city) {var newsService = new NewsService();var sportsService = new SportsService();return View("Common" new PortalViewModel {  NewsHeadlines = await newsService.GetHeadlinesAsync()  SportsScores = await sportsService.GetScoresAsync()});}In the previous action method the calls to newsService.GetHeadlinesAsync and sportsService.GetScoresAsync are called asynchronously and do not block a thread from the thread pool.Asynchronous action methods that return Task instances can also support timeouts. To make your action method cancellable add a parameter of type CancellationToken to the action method signature. The following example shows an asynchronous action method that has a timeout of 2500 milliseconds and that displays a TimedOut view to the client if a timeout occurs.[AsyncTimeout(2500)][HandleError(ExceptionType = typeof(TaskCanceledException) View = "TimedOut")]public async Task Index(string city CancellationToken cancellationToken) {var newsService = new NewsService();var sportsService = new SportsService();return View("Common" new PortalViewModel {  NewsHeadlines = await newsService.GetHeadlinesAsync(cancellationToken)  SportsScores = await sportsService.GetScoresAsync(cancellationToken)});}Hope this helps. Thanks
asp.net mvc get textbox input value,i have textbox input some radio buttons example my textbox input html looks like lt input type text name ip id ip gt once user clicks button web page i want pass data my controller lt input type button name add value resource.buttontitleadd onclick location.href url.action add configure new ipvalue valueoftextbox typeid 1 gt maybe trivial my problem i do know how get textbox value pass through controller how can i read textbox value pass controller through ipvalue valueoftextbox,You may use jQuery:&lt;input type="text" name="IP" id="IP" value=""/&gt;@Html.ActionLink(@Resource.ButtonTitleAdd "Add" "Configure" new { ipValue ="xxx" TypeId = "1" } new {@class = "link"})&lt;script&gt;  $(function () {$('.link').click(function () {  var ipvalue = $("#IP").val();  this.href = this.href.replace("xxx" ipvalue);});  });&lt;/script&gt;
how get controller action name onactionexecuting,possible figure out currently executing controller action onactionexecuting,You could try the ActionDescriptor of the ActionExecutingContext as follows:protected override void OnActionExecuting(ActionExecutingContext filterContext){   string actionName = filterContext.ActionDescriptor.ActionName;   string controllerName = filterContext.ActionDescriptor.ControllerDescriptor.ControllerName   .....   base.OnActionExecuting(filterContext);}
asp.net mvc 5 web application template vs 2012,i'm using visual studio 2012 have just installed microsoft asp.net web frameworks 2013.1 visual studio expected added option create asp.net mvc 5 empty project thing i see way jump starting already functional base application i had when i using mvc 4 eg asp.net mvc 4 web application i only see empty template.i ve seen answers how can i add mvc 5 project template vs 2012 create run mvc 5 project vs 2012direct download link asp.net mvc 5 vs 2012and found article matter.this obviously show stopper i can always create application from scratch i still would like know possible achieve vs 2012 did i miss step do i need vs 2013 fully functional web application template authentication etc would nice dabble around mvc 5 s new features prototyping,The answer from Sean Lynch is nice but not really complete.However there is this nice guy that took the time to prepare the template just like in Visual Studio 2013. You will get everything down to the bootstrap template and pre-configured database table for authentication.All you need to do is change the DefaultConnection in Web.Config to you SQL Server and voila all the relevant authentication table will be created for you.Archive of the original blog (by web.archive.org)UpdateThe original blog is no longer online but thankfully his template is still online. You can download the MVC5 Template for Visual Studio 2012 Here:Direct link to MVC5 Template For Visual Studio 2012And here is the excerpt from the original blog:Installing the template is very simple there are just two steps:Copy it into the following folder of your computer (creating the directory structure if necessary):%USERPROFILE%\Documents\Visual Studio 2012\Templates\ProjectTemplates\Visual C#\WebOnce you’ve done this simply restart Visual Studio and you will have this template available in the dialog box to create a new project under “Visual C# > Web”.Now you can create applications with a little more shape than the mere empty structure provided by default and enjoy the benefits of adopting Bootstrap and its responsive design a full membership system and user authentication bundles filters some content pages etc.
display datetime value dd mm yyyy format asp.net mvc,possible display datetime value dd mm yyyy format help html hepler methods asp.net mvc i tried do using some formats html.labelfor adding some annotations related property like below does make any sense any help solve problem would appreciated.model datatype datatype.date displayformat dataformatstring 0 dd mm yyyy applyformatineditmode true public nullable&lt system.datetime gt registrationdate get set,After few hours of searching I just solved this issue with a few lines of code Your model  [Required(ErrorMessage = "Enter the issued date.")]  [DataType(DataType.Date)]  public DateTime IssueDate { get; set; }Razor Page @Html.TextBoxFor(model =&gt; model.IssueDate) @Html.ValidationMessageFor(model =&gt; model.IssueDate)Jquery DatePicker&lt;script type="text/javascript"&gt;$(document).ready(function () {$('#IssueDate').datepicker({dateFormat: "dd/mm/yy"showStatus: trueshowWeeks: truecurrentText: 'Now'autoSize: truegotoCurrent: trueshowAnim: 'blind'highlightWeek: true});});&lt;/script&gt;Webconfig File&lt;system.web&gt;&lt;globalization uiCulture="en" culture="en-GB"/&gt;&lt;/system.web&gt;Now your text-box will accept "dd/MM/yyyy" format.
attempt 39 system.web.mvc.preapplicationstartcode.start 39 critical method 39 system.web.webpages.razor.preapplicationstartcode.start 39 failed,my application working fine after i did some upgrades i am getting error server error application.attempt security transparent method system.web.mvc.preapplicationstartcode.start access security critical method system.web.webpages.razor.preapplicationstartcode.start failed description unhandled exception occurred during execution current web request please review stack trace more information about error where originated code exception details system.methodaccessexception attempt security transparent method system.web.mvc.preapplicationstartcode.start access security critical method system.web.webpages.razor.preapplicationstartcode.start failed.source error unhandled exception generated during execution current web request information regarding origin location exception can identified using exception stack trace below.version information microsoft net framework version 4.0.30319 asp.net version 4.0.30319.18055i cannot remember updates i did way fix,tried . . . Install-Package Microsoft.AspNet.Mvc -Version 5.0.0and. . . Install-Package -Id  Microsoft.AspNet.WebHelpersboth with no success finally had to update all packages via nuget. . worked!!http://www.3dbuzz.com/forum/threads/202082-ASP-net-MVC-Error-before-application-start  If you're using visual studio open the nuget packages windows and run  Update-Package this will update all your dll to the last version. If  it still not work see this page:  http://www.asp.net/mvc/tutorials/mvc-5/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2
cssrewriteurltransform without virtual directory,we using mvc bundling our site cssrewriteurltransform makes sure image urls work from dynamic bundle css file only works when using virtual directory i.e http localhost virttualdir does work http localhost does because cssrewriteurltransform tranform does take virtual folder account when rewriting url so image real path localhost vdir content img foo.png rewrite localhost content img foo.png which wrong,I had the same problem. This is how I fixed it:private class ProperUrlRewrite : IItemTransform{private static string RebaseUrlToAbsolute(string baseUrl string url){if (string.IsNullOrWhiteSpace(url) || string.IsNullOrWhiteSpace(baseUrl) || url.StartsWith("/" StringComparison.OrdinalIgnoreCase) || url.Contains(':'))return url;return VirtualPathUtility.Combine(baseUrl url);}private static Regex UrlPattern = new Regex("url\\s*\\(['\"]?(?&lt;url&gt;[^)]+?)['\"]?\\)");public string Process(string includedVirtualPath string input){if (includedVirtualPath == null)throw new ArgumentNullException("includedVirtualPath");if (string.IsNullOrWhiteSpace(input))return input;string directory = VirtualPathUtility.GetDirectory(VirtualPathUtility.ToAbsolute(includedVirtualPath));if (!directory.EndsWith("/" StringComparison.OrdinalIgnoreCase))directory += "/";return UrlPattern.Replace(input match =&gt; "url(" + ProperUrlRewrite.RebaseUrlToAbsolute(directory match.Groups["url"].Value) + ")");}}I know it's far from perfect and there are plenty of edge cases where this can go wrong (I'm not sure you can parse a CSS file with a regex in the first place - though this is exactly what the original CssRewriteUrlTransform does) but so far it holds...
type namespace iappbuilder could found missing using directive pr assembly reference,i am working asp.net mvc 4 application which i am using signalr 2.0.1 i mapped using owin startup class worked fine first.all sudden when i tried rebuild my app said type namespace iappbuilder could found.following my start up classusing microsoft.owin using owin using whiteboardapp namespace whiteboardapp public class startup public void configuration iappbuilder app app.mapsignalr i have installed owin package too some reasons i could find owin startup class so i just added normal class included all references needed may i know where i am making mistake,I was having similar issue. But instead Owin problem was causing Microsoft.Owin obviously Update-Package Owin -ReinstallDidn't work neither did Update-Package OwinBUTInstall-Package Microsoft.Owindid work fine for me thanks.
how get query string parameter from mvc razor markup,i want check url parameter my razor markup example how do i do something like lt div id wrap class url iframe parameter equals 1 iframe page gt,If you are using .net core 2.0 this would be:Context.Request.Query["id"]Sample usage:&lt;a href="@Url.Action("Query"new {parm1=Context.Request.Query["queryparm1"]})"&gt;GO&lt;/a&gt;
asp.net mvc 4 application calling remote webapi,i've created couple asp.net mvc applications past i've never used webapis before i'm wondering how i could create simple mvc 4 app does simple crud stuff via webapi instead through normal mvc controller trick webapi should separate solution fact could very well different server domain how do i do what am i missing just matter setting up routes point webapi server all examples i've found showing how consume webapis using mvc application seem assume webapi baked mvc application least same server.oh clarify i'm talking about ajax calls using jquery i mean mvc application controller should use webapi get put data,Thanks everyone for the responses. @tugberk led me down the right path I think. This worked for me...For my CarsRESTService helper:public class CarsRESTService{readonly string baseUri = "http://localhost:9661/api/cars/";public List&lt;Car&gt; GetCars(){string uri = baseUri;using (HttpClient httpClient = new HttpClient()){Task&lt;String&gt; response = httpClient.GetStringAsync(uri);return JsonConvert.DeserializeObjectAsync&lt;List&lt;Car&gt;&gt;(response.Result).Result;}}public Car GetCarById(int id){string uri = baseUri + id;using (HttpClient httpClient = new HttpClient()){Task&lt;String&gt; response = httpClient.GetStringAsync(uri);return JsonConvert.DeserializeObjectAsync&lt;Car&gt;(response.Result).Result;}}}And then for CarsController.cs:public class CarsController : Controller{private CarsRESTService carsService = new CarsRESTService();//// GET: /Cars/public ActionResult Index(){return View(carsService.GetCars());}//// GET: /Cars/Details/5public ActionResult Details(int id = 0){Car car = carsService.GetCarById(id);if (car == null){return HttpNotFound();}return View(car);}}
url.action including route values,i have asp.net mvc 4 app am using url.action helper like url.action information admin page used both adding new edit admin profile urls follows adding new http localhost 4935/admin information editing existing http localhost 4935/admin information/5 lt admin idwhen i'm editing existing section site decide i would like add new admin i click following link lt href url.action information admin gt add admin&lt a&gt problem however above link actually going http localhost 4935/admin information/5 only happens when i'm page editing existing admin anywhere else site links correctly http localhost 4935/admin informationhas anyone else seen update routeconfig routes.maproute name default url controller action id defaults new controller home action index id urlparameter.optional,You also can use in this form: &lt;a href="@Url.Action("Information" "Admin" null)"&gt; Admin&lt;/a&gt;
how add jqueryui library mvc 5 project,i've just installed visual studio 2013 started new mvc 5 project i'm kind new mvc developing i can't figure out how add libraries my project.i see some similar parts example layout.cshtml i have code styles.render content css scripts.render bundles modernizr packages.config file lt packages&gt lt package id antlr version 3.4.1.9004 targetframework net45 gt lt package id bootstrap version 3.0.0 targetframework net45 gt lt package id entityframework version 6.0.0 targetframework net45 gt lt package id jquery version 1.10.2 targetframework net45 gt lt package id jquery.validation version 1.11.1 targetframework net45 gt lt packages&gt far i know something happens global.asaxso i've downloaded jquery ui libraries js css files my question where what should i add term use libraries everywhere like default libraries bootstrap jquery jquery ui has 3 folders content i added folders all content my project i just need add references,The css bundle should look as follows for version 1.11.1 now:bundles.Add(new StyleBundle("~/Content/themes/base/css").Include("~/Content/themes/base/accordion.css""~/Content/themes/base/all.css""~/Content/themes/base/autocomplete.css""~/Content/themes/base/base.css""~/Content/themes/base/button.css""~/Content/themes/base/core.css""~/Content/themes/base/datepicker.css""~/Content/themes/base/dialog.css""~/Content/themes/base/draggable.css""~/Content/themes/base/menu.css""~/Content/themes/base/progressbar.css""~/Content/themes/base/resizable.css""~/Content/themes/base/selectable.css""~/Content/themes/base/selectmenu.css""~/Content/themes/base/slider.css""~/Content/themes/base/sortable.css""~/Content/themes/base/spinner.css""~/Content/themes/base/tabs.css""~/Content/themes/base/theme.css""~/Content/themes/base/tooltip.css"));`
can 39 t access httpcontext.current duplicate,question already has answer here httpcontext.current resolving mvc 4 project3 answersi can't access httpcontext.current my project mvc4 c 4.5i ve added my reference system.web my project added using instruction my controller page i can access currenthandler only var context httpcontext.currenthandler currentis httpcontext.current deprecated c 4.5 i've looked help page http msdn.microsoft.com en us library system.web.httpcontext.aspx,This is because you are referring to property of controller named HttpContext. To access the current context use full class name:System.Web.HttpContext.CurrentHowever this is highly not recommended to access context like this in ASP.NET MVC so yes you can think of System.Web.HttpContext.Current as being deprecated inside ASP.NET MVC. The correct way to access current context isthis.ControllerContext.HttpContextor if you are inside a Controller just use memberthis.HttpContext
how does mvc 4 list model binding work,i want set inputs form bind list mvc 4 i know following naming convention input name attributes work lt input name 0 id type text gt lt input name 1 id type text gt lt input name 2 id type text gt i am curious about how forgiving model binder example what about following lt input name 0 id type text gt lt input name 3 id type text gt lt input name 8 id type text gt how would model binder handle would bind list length 9 nulls would still bind list length 3 would choke altogether why i carei want implement dynamic form which user may add rows form also may delete rows from form so i user deletes row 2 out 8 total rows i want know i'll need renumber all subsequent inputs,I followed this approach linked in the blogs above and added a few details that might be helpful to some - especially as I wanted to dynamically add any number of rows but did not want to use AJAX to do so (I wanted the form to only submit in the post). I also did not want to worry about maintaining sequential ids. I was capturing a list of start and end dates:View Model:public class WhenViewModel : BaseViewModel {public List&lt;DateViewModel&gt; Dates { get; set; }//... Other properties}Start / End Date View Model:public class DateViewModel {public string DateID { get; set; }public DateTime? StartDate { get; set; }public DateTime? EndDate { get; set; }}Then using them in the page (with datepicker):&lt;div class="grid-8-12 clear" id="DatesBlock"&gt;@{foreach (DateViewModel d in Model.Dates) {@:&lt;div class="grid-5-12 left clear"&gt;@Html.Hidden("Dates.Index" d.DateID)@Html.Hidden("Dates[" + d.DateID + "].DateID" d.DateID) //ID again to populate the view model@Html.TextBox("Dates[" + d.DateID + "].StartDate"   d.StartDate.Value.ToString("yyyy-MM-dd"))@:&lt;/div&gt;@:&lt;div class="grid-5-12"&gt;@Html.TextBox("Dates[" + d.DateID + "].EndDate"   d.EndDate.Value.ToString("yyyy-MM-dd"))@:&lt;/div&gt;&lt;script type="text/javascript"&gt;$('input[name="Dates[@d.DateID].StartDate"]')   .datepicker({ dateFormat: 'yy-mm-dd'});$('input[name="Dates[@d.DateID].EndDate"]')   .datepicker({dateFormat: 'yy-mm-dd'});&lt;/script&gt; }}&lt;/div&gt;&lt;a href="#" onclick="AddDatesRow()"&gt;Add Dates&lt;/a&gt;As the blog post linked in the @ErikTheVikings post above describe the collection is created by the repeated hidden element: @Html.Hidden("Dates.Index" d.DateID) for each entry in the collection on the page. I wanted to arbitrarily add rows without using AJAX to post data back to the server which I did by creating a hidden div containing a template of one "row" / item in the collection:Hidden "Template" row:&lt;div id="RowTemplate" style="display: none"&gt;&lt;div class="grid-5-12 clear"&gt;@Html.Hidden("Dates.Index" "REPLACE_ID")@Html.Hidden("Dates[REPLACE_ID].DateID" "REPLACE_ID") @Html.TextBox("Dates[REPLACE_ID].StartDate" "")&lt;/div&gt;&lt;div class="grid-5-12"&gt;@Html.TextBox("Dates[REPLACE_ID].EndDate" "")&lt;/div&gt;&lt;/div&gt;Then used jQuery which clones the template provides a random id to use for a new row and appends the now visible cloned row to the containing div above:jQuery to complete the process:&lt;script type="text/javascript"&gt;function AddDatesRow() {var tempIndex = Math.random().toString(36).substr(2 5);var template = $('#RowTemplate');var insertRow = template.clone(false);insertRow.find('input').each(function(){ //Run replace on each inputthis.id = this.id.replace('REPLACE_ID' tempIndex);this.name = this.name.replace('REPLACE_ID' tempIndex);this.value = this.value.replace('REPLACE_ID' tempIndex);});insertRow.show();$('#DatesBlock').append(insertRow.contents());//Attach datepicker to new elements$('input[name="Dates['+tempIndex+'].StartDate"]').datepicker({dateFormat: 'yy-mm-dd' });$('input[name="Dates['+tempIndex+'].EndDate"]').datepicker({dateFormat: 'yy-mm-dd' });}&lt;/script&gt;JSFiddle example of the result: http://jsfiddle.net/mdares/7JZh4/
context menu add controller view missing,i have integrated asp.net mvc 4 existing asp.net web site both works fine i don't see any menu shortcuts create controller view within visual studio ide those only available asp.net mvc template,Step to change the GUIDRight click on the project in solution explorerClick unload projectRight click again on the project in solution explorerEdit projectfolder/projectname.csprojChagne GUIDRight click and select "Reload Project"In &lt;ProjectTypeGuids&gt; tag add any of these GUIDs in beginning {E3E379DF-F4C6-4180-9B81-6769533ABE47};{E53F8FEA-EAE0-44A6-8774-FFD645390401};
all asp.net web api controllers return 404,i'm trying get api controller work inside asp.net mvc 4 web app however every request results 404 i'm stumped i have standard api controller route from project template defined like public static class webapiconfig public static void register httpconfiguration config config.routes.maphttproute name defaultapi routetemplate api controller id defaults new id routeparameter.optional registration invoked global.asax protected void application start arearegistration.registerallareas register api routeswebapiconfig.register globalconfiguration.configuration filterconfig.registerglobalfilters globalfilters.filters routeconfig.registerroutes routetable.routes i have basic api controller like namespace website.controllers public class favoritescontroller apicontroller get api lt controller&gt public ienumerable&lt string&gt get return new first second put api lt controller&gt 5public void put int id delete api lt controller&gt 5public void delete int id now when i browse localhost 59900/api favorites i expect get method invoked instead i get 404 status code following response lt error&gt lt message&gt http resource found matches request uri http localhost 59900/api favorites lt message&gt lt messagedetail&gt type found matches controller named favorites lt messagedetail&gt lt error&gt any help would greatly appreciated i'm losing my mind little bit over here thanks,Had essentially the same problem solved in my case by adding:&lt;modules runAllManagedModulesForAllRequests="true" /&gt;to the &lt;system.webServer&gt;&lt;/system.webServer&gt;section of web.config
nuget error creating mvc4 project vs 2012,i tried create mvc4 empty project visualstudio 2012 ultimate i got error error template attempted load component assembly nuget.visualstudio.interop version 1.0.0.0 culture neutral publickeytoken b03f5f7f11d50a3a,i) Open Visual Studio > Tools > Extensions and Updates > select 'NuGet Package Manager' and uninstall it.(if it's not installed go to step 2)ii) Open this url 'http://nuget.org' and you will see an 'Install NuGet' link  download it(NuGet.Tools.vsix) and install it on your Visual Studio .iii) Close and Re-open the Visual Studio and i believe you will never see that error Dialog again just like me ;-)
format datetime asp.net mvc 4,how can i force format datetime asp.net mvc 4 display mode shows i want edit model doesn't i am using displayfor editorfor applyformatineditmode true dataformatstring 0 dd mm yyyy what i have tried globalization web.config both them my culture uiculture.modifying culture uiculture application start custom modelbinder datetimei have idea how force i need input date dd mm yyyy default.more info my viewmodel like displayname date birth datatype datatype.date displayformat dataformatstring 0 dd mm yyyy applyformatineditmode true public datetime birth get set view i use html.displayfor m gt m.birth works expected i see formatting input date i use html.editorfor m gt m.birth i try input something like 13/12/2000 fails error valid date 12/13/2000 2000/12/13 working expected i need dd mm yyyy custom modelbinder called application start b c i don't know where else.using lt globalization gt i have tried culture ro ro uiculture ro other cultures would give me dd mm yyyy.i have also tried set per thread basis application start lot examples here how do all read question seems darin dimitrov answer work long i don't have client validation.another approach use custom validation including client side validation.i m glad i found out before recreating entire application,Client validation issues can occur because of MVC bug (even in MVC 5) in jquery.validate.unobtrusive.min.js which does not accept date/datetime format in any way. Unfortunately you have to solve it manually. My finally working solution:$(function () {$.validator.methods.date = function (value element) {return this.optional(element) || moment(value "DD.MM.YYYY" true).isValid();}});You have to include before:@Scripts.Render("~/Scripts/jquery-3.1.1.js")@Scripts.Render("~/Scripts/jquery.validate.min.js")@Scripts.Render("~/Scripts/jquery.validate.unobtrusive.min.js")@Scripts.Render("~/Scripts/moment.js")You can install moment.js using:Install-Package Moment.js
razor actionlink autogenerating length 7 url,i have link razor page below html.actionlink create new profile create profile new class toplink i see page view source which below&lt href admin profile create length 7 class toplink gt create new profile&lt a&gt when i click link url like below.http localhost 54876/admin profile create length 7i don't want length 7 why auto generated,I'm not sure the exact cause of this but change it to:@Html.ActionLink("Create New Profile" "Create" "Profile" new {} new { @class="toplink" })I don't know which overload MVC is picking when you leave off the last parameter (htmlattributes is the added one) but that will fix it. One of these days I'll investigate and figure out exactly what's going on.
accessing post get parameters custom authorization mvc4 web api,possible access post get parameters via httpactioncontext object i have set sensors loggs data web server provides rest api i would like introduce some sort authentication authorization letting sensors include hardware id data make lookup database see id exists since api provides many web api action methods i would ideally like use custom authorization attributepublic class apiauthorizationfilter authorizeattribute protected override bool isauthorized httpactioncontext actioncontext return false how can i access post get data from actioncontext edit example postpost api api actionmethod http/1.1 r ncontent type application json r nhost localhost r naccept r ncontent length 52 r n r n id 121a222bc time 2012-02-02 12 00 00 r nhave nice day,I accessed the context route data to get the parameters from within a custom AuthorizeAttribute when calling something like /api/client/123/users:public class CustomAuthorizeAttribute : AuthorizeAttribute  { protected override bool IsAuthorized(System.Web.Http.Controllers.HttpActionContext actionContext) {var clientId = Convert.ToInt32(actionContext.ControllerContext.RouteData.Values["clientid"]);// Check if user can access the client account. }  }
setting default json serializer asp.net mvc,i'm working existing application has been partially converted over mvc whenever controller responds json actionresult enums sent numbers opposed string name sounds like default serializer should json.net which should sending enums over names opposed integer representation case here.am i missing web.config setting sets default serializer another setting needs changed,ASP.NET MVC 5 Fix:I wasn't ready to change to Json.NET just yet and in my case the error was occurring during the request. Best approach in my scenario was modifying the actual JsonValueProviderFactory which applies the fix to the global project and can be done by editing the global.cs file as such.JsonValueProviderConfig.Config(ValueProviderFactories.Factories);add a web.config entry:&lt;add key="aspnet:MaxJsonLength" value="20971520" /&gt;and then create the two following classespublic class JsonValueProviderConfig{public static void Config(ValueProviderFactoryCollection factories){var jsonProviderFactory = factories.OfType&lt;JsonValueProviderFactory&gt;().Single();factories.Remove(jsonProviderFactory);factories.Add(new CustomJsonValueProviderFactory());}}This is basically an exact copy of the default implementation found in System.Web.Mvc but with the addition of a configurable web.config appsetting value aspnet:MaxJsonLength.public class CustomJsonValueProviderFactory : ValueProviderFactory{/// &lt;summary&gt;Returns a JSON value-provider object for the specified controller context.&lt;/summary&gt;/// &lt;returns&gt;A JSON value-provider object for the specified controller context.&lt;/returns&gt;/// &lt;param name="controllerContext"&gt;The controller context.&lt;/param&gt;public override IValueProvider GetValueProvider(ControllerContext controllerContext){if (controllerContext == null)throw new ArgumentNullException("controllerContext");object deserializedObject = CustomJsonValueProviderFactory.GetDeserializedObject(controllerContext);if (deserializedObject == null)return null;Dictionary&lt;string object&gt; strs = new Dictionary&lt;string object&gt;(StringComparer.OrdinalIgnoreCase);CustomJsonValueProviderFactory.AddToBackingStore(new CustomJsonValueProviderFactory.EntryLimitedDictionary(strs) string.Empty deserializedObject);return new DictionaryValueProvider&lt;object&gt;(strs CultureInfo.CurrentCulture);}private static object GetDeserializedObject(ControllerContext controllerContext){if (!controllerContext.HttpContext.Request.ContentType.StartsWith("application/json" StringComparison.OrdinalIgnoreCase))return null;string fullStreamString = (new StreamReader(controllerContext.HttpContext.Request.InputStream)).ReadToEnd();if (string.IsNullOrEmpty(fullStreamString))return null;var serializer = new JavaScriptSerializer(){MaxJsonLength = CustomJsonValueProviderFactory.GetMaxJsonLength()};return serializer.DeserializeObject(fullStreamString);}private static void AddToBackingStore(EntryLimitedDictionary backingStore string prefix object value){IDictionary&lt;string object&gt; strs = value as IDictionary&lt;string object&gt;;if (strs != null){foreach (KeyValuePair&lt;string object&gt; keyValuePair in strs)CustomJsonValueProviderFactory.AddToBackingStore(backingStore CustomJsonValueProviderFactory.MakePropertyKey(prefix keyValuePair.Key) keyValuePair.Value);return;}IList lists = value as IList;if (lists == null){backingStore.Add(prefix value);return;}for (int i = 0; i &lt; lists.Count; i++){CustomJsonValueProviderFactory.AddToBackingStore(backingStore CustomJsonValueProviderFactory.MakeArrayKey(prefix i) lists[i]);}}private class EntryLimitedDictionary{private static int _maximumDepth;private readonly IDictionary&lt;string object&gt; _innerDictionary;private int _itemCount;static EntryLimitedDictionary(){_maximumDepth = CustomJsonValueProviderFactory.GetMaximumDepth();}public EntryLimitedDictionary(IDictionary&lt;string object&gt; innerDictionary){this._innerDictionary = innerDictionary;}public void Add(string key object value){int num = this._itemCount + 1;this._itemCount = num;if (num &gt; _maximumDepth){throw new InvalidOperationException("The length of the string exceeds the value set on the maxJsonLength property.");}this._innerDictionary.Add(key value);}}private static string MakeArrayKey(string prefix int index){return string.Concat(prefix "[" index.ToString(CultureInfo.InvariantCulture) "]");}private static string MakePropertyKey(string prefix string propertyName){if (string.IsNullOrEmpty(prefix)){return propertyName;}return string.Concat(prefix "." propertyName);}private static int GetMaximumDepth(){int num;NameValueCollection appSettings = ConfigurationManager.AppSettings;if (appSettings != null){string[] values = appSettings.GetValues("aspnet:MaxJsonDeserializerMembers");if (values != null &amp;&amp; values.Length != 0 &amp;&amp; int.TryParse(values[0] out num)){return num;}}return 1000;}private static int GetMaxJsonLength(){int num;NameValueCollection appSettings = ConfigurationManager.AppSettings;if (appSettings != null){string[] values = appSettings.GetValues("aspnet:MaxJsonLength");if (values != null &amp;&amp; values.Length != 0 &amp;&amp; int.TryParse(values[0] out num)){return num;}}return 1000;}}
how get public ip address user c,i want public ip address client who using my website.the code below showing local ip lan i want public ip client get mac addressnetworkinterface nics networkinterface.getallnetworkinterfaces string smacaddress string.empty foreach networkinterface adapter nics smacaddress string.empty only return mac address from first card ipinterfaceproperties properties adapter.getipproperties smacaddress adapter.getphysicaladdress tostring get ip addressstring iphost dns.gethostname string ip dns.gethostbyname iphost addresslist 0 tostring output ip address 192.168.1.7please help me get public ip address,This is what I use:protected void GetUser_IP(){string VisitorsIPAddr = string.Empty;if (HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"] != null){VisitorsIPAddr = HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"].ToString();}else if (HttpContext.Current.Request.UserHostAddress.Length != 0){VisitorsIPAddr = HttpContext.Current.Request.UserHostAddress;}uip.Text = "Your IP is: " + VisitorsIPAddr;}"uip" is the name of the label in the aspx page that shows the user IP.
upgrading from mvc4 mvc5,i have made dreadful error upgrading from mvc4 mvc5 pre release updating razor mvc webpage my references i have system.web.mvc system.web.webpages system.web.webpages.razor system.web.razor version v4.0.30319 when i run my application i get system.web.webpages.razor.configuration.hostsection cannot cast b system.web.webpages.razor.configuration.hostsection.type originates from system.web.webpages.razor version 2.0.0.0 culture neutralpublickeytoken 31bf3856ad364e35 context default location'c windows microsoft.net assembly gac msil system.web.webpages.razor v4.0_2.0.0.0 31bf3856ad364e35 system.web.webpages.razor.dll type b originates from'system web.webpages.razor version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c windows microsoft.net framework64 v4.0.30319 temporary asp.net files membership c70f06fe 9163b1ca assembly dl3 291c956e 73c25daa_cf74ce01 system.web.webpages.razor.dll same http www.asp.net whitepapers/mvc4-release notesthanksadding stacktrace invalidcastexception system.web.webpages.razor.configuration.hostsection cannot cast b systemwebwebpagesrazorconfigurationhostsection type originates from system.web.webpages.razor version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c windows microsoft.net assembly gac msil system.web.webpages.razor v4.0_2.0.0.0 31bf3856ad364e35 system.web.webpages.razor.dll type b originates from system.web.webpages.razor version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location'c windows microsoft.net framework64 v4.0.30319 temporary asp.net files c70f06fe 9163b1ca assembly dl3 291c956e 73c25daa_cf74ce01 system.web.webpages.razor.dll system.web.webpages.razor.webrazorhostfactory.createhostfromconfig string virtualpath string physicalpath 193system.web.webpages.razor.razorbuildprovider.gethostfromconfig 51system.web.webpages.razor.razorbuildprovider.createhost 24system.web.webpages.razor.razorbuildprovider.get host 34system.web.webpages.razor.razorbuildprovider.ensuregeneratedcode 85system.web.webpages.razor.razorbuildprovider.get codecompilertype 34system.web.compilation.buildprovider.getcompilertypefrombuildprovider buildprovider buildprovider 189system.web.compilation.buildproviderscompiler.processbuildproviders 265system.web.compilation.buildproviderscompiler.performbuild 21system.web.compilation.buildmanager.compilewebfile virtualpath virtualpath 580system.web.compilation.buildmanager.getvpathbuildresultinternal virtualpath virtualpath boolean nobuild boolean allowcrossapp boolean allowbuildinprecompile boolean throwifnotfound boolean ensureisuptodate 571system.web.compilation.buildmanager.getvpathbuildresultwithnoassert httpcontext context virtualpath virtualpath boolean nobuild boolean allowcrossapp boolean allowbuildinprecompile boolean throwifnotfound boolean ensureisuptodate 203system.web.compilation.buildmanager.getvirtualpathobjectfactory virtualpath virtualpath httpcontext context boolean allowcrossapp boolean throwifnotfound 249system.web.compilation.buildmanager.getcompiledtype virtualpath virtualpath 17system.web.mvc.buildmanagercompiledview.render viewcontext viewcontext textwriter writer 90system.web.mvc.viewresultbase.executeresult controllercontext context 380system.web.mvc.controlleractioninvoker.invokeactionresultfilterrecursive ilist 1 filters int32 filterindex resultexecutingcontext precontext controllercontext controllercontext actionresult actionresult 109system.web.mvc.controlleractioninvoker.invokeactionresultfilterrecursive ilist 1 filters int32 filterindex resultexecutingcontext precontext controllercontext controllercontext actionresult actionresult 890system.web.mvc.controlleractioninvoker.invokeactionresultwithfilters controllercontext controllercontext ilist 1 filters actionresult actionresult 97systemwebmvcasync lt gt c displayclass1e lt begininvokeaction&gt b 1b iasyncresult asyncresult 241systemwebmvccontroller lt beginexecutecore&gt b 1d iasyncresult asyncresult executecorestate innerstate 29system.web.mvc.async.wrappedasyncvoid 1.callenddelegate iasyncresult asyncresult 111system.web.mvc.controller.endexecutecore iasyncresult asyncresult 53system.web.mvc.async.wrappedasyncvoid 1.callenddelegate iasyncresult asyncresult 19systemwebmvcmvchandler lt beginprocessrequest&gt b 4 iasyncresult asyncresult processrequeststate innerstate 51system.web.mvc.async.wrappedasyncvoid 1.callenddelegate iasyncresult asyncresult 111system.web.callhandlerexecutionstep.system.web.httpapplication.iexecutionstep.execute 606system.web.httpapplication.executestep iexecutionstep step boolean&amp completedsynchronously 288,i suggest to see this from http://asp.net websitehttp://www.asp.net/mvc/tutorials/mvc-5/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2
razor 2 razor 3 mvc 5,i've been working mvc 4 solution i've been trying upgrade mvc 5 i've followed steps outlined here.i ve followed now whenever i run mvc application gives me error message system.web.webpages.razor.configuration.hostsection cannot cast b systemwebwebpagesrazorconfigurationhostsection type originates from system.web.webpages.razor version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c windows microsoft.net assembly gac msil system.web.webpages.razor v4.0_2.0.0.0 31bf3856ad364e35 system.web.webpages.razor.dll type b originates from system.web.webpages.razor version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 context default location c users user appdata local temp temporary asp.net files root 665ac028 de53a189 assembly dl3 c2c0a4b5 56e8099e_40e0ce01 system.web.webpages.razor.dll does anyone know how could have originated how can solved i've looked around thus far i've tried changing web.config files avail,Check for version in web.config. If it again gives an error try to clean the solution and rebuild it. Also check for project's Bin folder removes old references from bin folder and rebuild the project solution.
posting form different mvc post action depending clicked submit button,i am using asp.net mvc 4 i have multiple buttons view present i am calling same action method i am distinguishing clicked button using name attribute using html.beginform submit searchdisplay new id model null guid.newguid tostring model.savedsearch formmethod.post lt div class leftsidediv gt lt input type submit id btnexport class exporttoexcelbutton name command value export excel gt lt div&gt lt div class pagewrapperforsearchsubmit gt lt input type submit class submitbutton value submit id btnsubmitchange gt lt div&gt action httppost public actionresult submit searchcostpage searchmodel string command sessionhelper.projectcase searchmodel.projectcasenumber string.equals command constants.searchpage.exporttoexcel questionsis way direct different post action methods different button clicks without custom routing way without custom routing how can we do custom routing references jimmy bogard cleaning up posts asp.net mvc,You can choose the url where the form must be posted (and thus the invoked action) in different ways depending on the browser support:for newer browsers that support HTML5 you can use formaction attribute of a submit buttonfor older browsers that don't support this you need to use some JavaScript that changes the form's action attribute when the button is clicked and before submittingIn this way you don't need to do anything special on the server side.Of course you can use Url extensions methods in your Razor to specify the form action.For browsers supporting HMTL5: simply define your submit buttons like this:&lt;input type='submit' value='...' formaction='@Url.Action(...)' /&gt;For older browsers I recommend using an unobtrusive script like this (include it in your "master layout"):$(document).on('click' '[type="submit"][data-form-action]' function (event) {  var $this = $(this);  var formAction = $this.attr('data-form-action');  $this.closest('form').attr('action' formAction);});NOTE: This script will handle the click for any element in the page that has type=submit and data-form-action attributes. When this happens it takes the value of data-form-action attribute and set the containing form's action to the value of this attribute. As it's a delegated event it will work even for HTML loaded using AJAX without taking extra steps.Then you simply have to add a data-form-action attribute with the desired action URL to your button like this:&lt;input type='submit' data-form-action='@Url.Action(...)' value='...'/&gt;Note that clicking the button changes the form's action and right after that the browser posts the form to the desired action.As you can see this requires no custom routing you can use the standard Url extension methods and you have nothing special to do in modern browsers.
asp.net mvc 4 throw httpexception vs return httpstatuscoderesult,i am developing restful service i want return 400 all unsupported urls.my question when should i choose method 1 over method 2 vice versa method 1public actionresult index url unsupportedthrow new httpexception 400 bad request one seems better method 2public actionresult index url unsupportedreturn new httpstatuscoderesult httpstatuscode.badrequest bad request,Being in a DevOps team we are all in the mind-set where throwing more hardware at something to get a slightly better result is always a good cause. So I'm intentionally ignoring the micro-cost of firing a .NET exception.If you're leveraging a telemetry framework like ApplicationInsights then just returning the status code gives you nothing more than a "failed request". It doesn't give you any useful information that allows you to either compile or get any information on the "why" of the failed request.Telemetry platforms expect and want you to throw because error telemetry is usually around .NET exceptions so if you're not throwing you're creating a problem for operations.I actually landed here because I'm in the process of writing a Roslyn analyser and CodeFix for a project where folks love to write try{} catch { return BadRequest("put_the_reason_here"); } and neither DevOps or the Dev teams see nothing useful in the system telemetry in ApplicationInsights.
when should i create new dbcontext,i am currently using dbcontext similar namespace models public class contextdb dbcontext public dbset&lt user&gt users get set public dbset&lt userrole&gt userroles get set public contextdb i am using following line top all my controllers need access database im also using my userrepository class which contains all methods relating user getting active user checking what roles he has etc contextdb db new contextdb thinking about occations when one visitor can have multiple dbcontexts active ie hes visiting controller uses userrepository might best ideas i've got few questions about itwhen should i make new dbcontext should i have one global context i pass around can i have one global context i reuse all places does cause performance hit how everyone else doing,I try to answer out of my own experience.1. When should I make a new DbContext / should I have one global context that I pass around?The Context should be injected by the dependency-injection and should not be instantiated by yourself. Best-Practice is to have it created as a scoped service by the dependency-injection. (See my answer to Question 4)Please also consider using a proper layered application structure like Controller > BusinessLogic > Repository. In this case it would not be the case that your controller receives the db-context but the repository instead. Getting injected / instantiating a db-context in a controller tells me that your application architecture mixes many responsibilities in one place which - under any circumstances - I cannot recommend.2. Can i have one global Context that I reuse in all places?Yes you can have but the question should be "Should I have..." -> NO. The Context is meant to be used per request to change your repository and then its away again.3. Does this cause a performance hit?Yes it does because the DBContext is simply not made for being global. It stores all the data that has been entered or queried into it until it is destroyed. That means a global context will get larger and larger operations on it will get slower and slower until you will get an out of memory exceptions or you die of age because it all slowed to a crawl.You will also get exceptions and many errors when multiple threads access the same context at once. 4. How is everyone else doing this?DBContext injected through dependency-injection by a factory; scoped: services.AddDbContext&lt;UserDbContext&gt;(o =&gt; o.UseSqlServer(this.settings.DatabaseOptions.UserDBConnectionString));I hope my answers where of help.
possible embed youtube vimeo videos markdown using c markdown library,i'm writing web app net mvc4 would like use markdown i understand few open source c markdown libraries i haven't found one obviously supports embedding youtube vimeo videos inside markdown text.does anyone know possible,You can use inline HTML to embed your video.# this is a *markdown* document&lt;iframe  title="YouTube video player" width="480" height="390" src="http://www.youtube.com/watch?v=TheVideoID?autoplay=1" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;with a **youtube** video embedded
how do you create visual model entityframework code first,you look here you notice guy showing entity model diagrams i would like know how i can create entity model diagram from my entityframework code first classes just gets frustrating trying remember how everything links together just looking code,An Entity Data Model Diagram is just a visual display of an EDMX file. In order to get such a diagram from a Code-First model you must create an EDMX file from it:using System.Data.Entity.Infrastructure; // namespace for the EdmxWriter classusing (var ctx = new MyContext()){using (var writer = new XmlTextWriter(@"c:\Model.edmx" Encoding.Default)){EdmxWriter.WriteEdmx(ctx writer);}}This code creates a file Model.edmx that you can open in Visual Studio. It will display the model diagram. The EDMX file is a snapshot of your current Code-First model. When you change the model in code you must create a new EDMX file to reflect those changes in the diagram.
can we pass model parameter redirecttoaction,i want know any technique so we can pass model parameter redirecttoactionfor example public class student public int id get set public string name get set controllerpublic class studentcontroller controller public actionresult fillstudent return view httppost public actionresult fillstudent student student1 return redirecttoaction getstudent student new student student1 public actionresult getstudent student student return view my question can i pass student model redirecttoaction,Just call the action no need for redirect to action or the new keyword for model. [HttpPost]public ActionResult FillStudent(Student student1){return GetStudent(student1); //this will also work}public ActionResult GetStudent(Student student){return View(student);}
role based authentication new mvc 4 internet template using simplemembership,i like new simplemembership feature mvc 4 internet template links oauth external logins vs 2012 rtm most part authentication feature working however even after spending over 8 hours i am unable implement roles based authorization work my controllers simplemembership turning out anything simple.i have searched stackoverflow googled have read latest john galloway tried many suggestions still have been able resovle issue all started getting sql connection error could figure out why when connection string everything else good took many hours figure out roles class causing problem.the authorize attribute controllers works before basic authentication any time i try use roles give sql connection error because reverts old defaultrolesprovider which tries connect default sqlexpress aspnetdb file fails so something like authorize roles admin does work work i go back old asp.net membership providers i lose simple database tables token bases confirmation recovery more secure password hashing more importantly external logins via oauth.the only thing works inside code razor views user.isinrole admin which ok menu items ver cumbersome implement inside every single action controller i do like only tests single role time i greatly appreciate any guidance resovle issue,Had the same problem when I was moving my web app from VS2010/MVC3 to VS2012/MVC4. And couldn´t get [InitializeSimpleMembership] to work.Found out that adding this to your web.config does the trick:  &lt;appSettings&gt;&lt;add key="enableSimpleMembership" value="false" /&gt;  &lt;/appSettings&gt;And everything works fine as it did before.
how route everything other than web api index.html,i've been working angularjs project inside asp.net mvc using web api works great except when you try go directly angular routed url refresh page rather than monkeying server config i thought would something i could handle mvc routing engine.current webapiconfig public static class webapiconfig public static void register httpconfiguration config web api routesconfig.maphttpattributeroutes config.routes.maphttproute name defaultapi routetemplate api controller id defaults new id routeparameter.optional constraints new id 0-9 config.routes.maphttproute name apiwithactionandname routetemplate api controller action name defaults nullconstraints new name z config.routes.maphttproute name apiwithaction routetemplate api controller action defaults new action get current routeconfig public class routeconfig public static void registerroutes routecollection routes routes.ignoreroute resource axd pathinfo routes.ignoreroute allow index.html loadroutes.ignoreroute partials routes.ignoreroute assets current global.asax.cs public class webapiapplication httpapplication protected void application start arearegistration.registerallareas globalconfiguration.configure webapiconfig.register filterconfig.registerglobalfilters globalfilters.filters routeconfig.registerroutes routetable.routes var formatters globalconfiguration.configuration.formatters formatters.remove formatters.xmlformatter globalconfiguration.configuration.formatters.jsonformatter.serializersettings new jsonserializersettings formatting formatting.indentedpreservereferenceshandling preservereferenceshandling.nonereferenceloophandling referenceloophandling.ignore goal api continues go webapi partials assets all go file system absolutely anything else gets routed index.html which my angular single page app edit i seem have gotten working added bottom routeconfig.cs routes.mappageroute default anything index.html change root web.config lt system.web gt lt compilation debug true targetframework 4.5.1 gt lt buildproviders&gt lt add extension html type system.web.compilation.pagebuildprovider gt lt allows routing everything index.html gt lt buildproviders&gt lt compilation&gt lt system.web gt however smells like hack any better way do,Suggest more native approach&lt;system.webServer&gt;&lt;httpErrors errorMode="Custom"&gt;&lt;remove statusCode="404" subStatusCode="-1"/&gt;&lt;error statusCode="404" prefixLanguageFilePath="" path="/index.cshtml" responseMode="ExecuteURL"/&gt;&lt;/httpErrors&gt;&lt;/system.webServer&gt;
asp net mvc 4 webapi manually handle odata queries,i have web service made using webapi provided asp net mvc 4.i know layer top which webapi works automatically handles odata queries filter top skip what i want handle filtering myself i don't simply return data from my database i have another layer which adds some properties makes some conversions etc so querying all my data converting them returning them webapi class odata filtering isn't just good enough course terribly slow generally crappy idea.so way propagate odata query parameters from my webapi entry point functions i call get convert data example get api people skip 10 amp top 10 would call server public iqueryable&lt person&gt get return personservice.get somethingaboutcurrentrequest.currentodata personservice public iqueryable&lt person&gt getpeople var odataqueries iqueryable&lt serversideperson&gt serverpeople from p dbcontext.serversideperson select p make odata queries skipserverpeople serverpeople.skip odataqueries.skip takeserverpeople serverpeople.take odataqueries.take so convert themiqueryable&lt person&gt people converter.convertpersonlist serverpeople return people,The query from the URL gets translated into a LINQ expression tree which is then executed against the IQueryable your operation returns. You can analyze the expression and provide the results in any way you want. The downside is that you need to implement IQueryable which is not super easy. Take a look at this blog post series if you're interested: http://blogs.msdn.com/b/vitek/archive/2010/02/25/data-services-expressions-part-1-intro.aspx. It talks about WCF Data Services but the filter expressions used by the Web API will be very similar.
mvc razor form multiple different submit buttons,razor view has 3 buttons inside form all button actions need form values which basically values coming input fields.every time i click any buttons redirected me default action can you please guide how i can submit form different actions based button press i really appreciate your time guidance help,This elegant solution works for number of submit buttons:@Html.Begin(){  // Html code here  &lt;input type="submit" name="command" value="submit1" /&gt;  &lt;input type="submit" name="command" value="submit2" /&gt;}And in your controllers' action method accept it as a parameter.public ActionResult Create(Employee model string command){if(command.Equals("submit1")){  // Call action here...}else{  // Call another action here...}}
anti forgery token could decrypted,i have form using html.beginform new returnurl viewbag.returnurl html.antiforgerytoken html.validationsummary action httppost allowanonymous validateantiforgerytoken public actionresult login loginmodel model string returnurl string city occasionally once week i get error anti forgery token could decrypted application hosted web farm cluster ensure all machines running same version asp.net web pages configuration specifies explicit encryption validation keys autogenerate cannot used cluster.i try add webconfig lt machinekey validationkey autogenerateisolateapps decryptionkey autogenerateisolateapps gt error still appears occasionallyi noticed error occurs example when person came from one computer trying another computeror sometimes auto value set incorrect data type like bool integer form field any jquery code please also check,I just received this error as well and in my case it was caused by the anti-forgery token being applied twice in the same form. The second instance was coming from a partial view so wasn't immediately obvious.
asp.net mvc 4 override emitted html name id,i'm trying change emitted name html input created html.hiddenfor.the code i'm using html.hiddenfor e gt e.someproperty new id some property name some property now works id however doesn't work name now i don't really care id now i need name change because one get posted back target server.is therea property i can apply someproperty my model way html.hiddenfor override name property am i stuck do plain lt input gt hand,If you use:  @Html.HiddenFor(e => e.SomeProperty new { @id = "some_property"  @Name = "some_property" });Notice the capital "N" in @Name. It´ll work.
revalidating modified viewmodel within controller method,edit we're using mvc4 dev preview i'm implementing edit page fishingtrip class fishingtrip contains child collection simple crew objects ie fishingtripid crewid crewposition i'm using jarrett meyer approach add edit delete from crew collection.i m using unobtrusive validation specify properties crew all required.my problem when i logically delete item from list per jarrett method i don't want item validated.i have successfully tweaked removerow method client side disable unobtrusive validation logically deleted item so form post despite being item contains blank fields my controller method httppost edit modelstate.isvalid starts off false expected because logically deleted item contains blank fields so i remove item from my viewmodel modelstate.isvalid still false summary i think i want modify my viewmodel within controller method remove offending item call some kind revalidate have modelstate.isvalid show up true.any ideas,Late to the game but still: I was also looking for a way to validate model after doing some tweaks to it (more precisely - to the items of its nested collection) - and TryValidateModel didn't work for me as it doesn't process nested objects.Finally I settled with custom model binder:public class MyItemModelBinder : DefaultModelBinder{protected override void OnModelUpdated(ControllerContext controllerContext ModelBindingContext bindingContext){if (bindingContext.ModelType == typeof(MyItemModel)){MyItemModel item = (MyItemModel)bindingContext.Model;//do required tweaks on model here //(I needed to load some additional data from DB)}//validation code will be called here in OnModelUpdated implementationbase.OnModelUpdated(controllerContext bindingContext);}}on the model class:[ModelBinder(typeof(MyItemModelBinder))]public class MyItemModel : IValidatableObject{//...}
system.componentmodel.dataannotations.compare vs system.web.mvc.compare,mvc 4 beta project fails compile after upgrading net 4.5.this happens due conflict betweensystem.componentmodel.dataannotations.compareattribute system.web.mvc.compareattributesystem.componentmodel.dataannotations.compareattribute msdn documentation says provides attribute compares two properties.while system.web.mvc.compareattribute msdn documentation says provides attribute compares two properties model.what difference between two when would smarter use each them 10x,Microsoft Connect work-around is:  Posted by GavK on 6/17/2012 at 5:13 AM I added a full reference to [System.Web.Mvc.Compare(...)] rather than  just using [Compare(...)]Works for me in VS 2012...
mvc4 less bundle import directory,i'm trying use mvc4 bundling group some my less files looks like import path i'm using off my directory structure static less mixins.lessadmin user.lessin user.less i'm attempting import mixins.less using import mixins.less used work me before when using chirpy dotless now i noticed elmah getting mad me saying system.io.filenotfoundexception you importing file ending less cannot found.file name mixins.less am i supposed use different import mvc4 some additional infohere less class global.asax.cs code i'm using attempt lessminifycs public class lessminify cssminify public lessminify public override void process bundlecontext context bundleresponse response response.content less.parse response.content base.process context response globalasaxcs dynamicfolderbundle lessfb new dynamicfolderbundle less new lessminify less bundletable.bundles.add lessfb bundle adminless new bundle adminlessbundle new lessminify adminless.addfile static less admin user.less bundletable.bundles.add adminless,I've written a quick blog post about Using LESS CSS With MVC4 Web Optimization.It basically boils down to using the BundleTransformer.Less Nuget Package and changing up your BundleConfig.cs.Tested with bootstrap.EDIT: Should mention the reason I say this is I also ran into the @import directory structure issue and this library handles it correctly.
mvc 4 client side validation working,can anyone tell me why client side validation working my mvc 4 application layout.schtml@scripts.render bundles jquery rendersection scripts required false my web.config i have lt appsettings&gt lt add key clientvalidationenabled value true gt lt add key unobtrusivejavascriptenabled value true gt lt appsettings&gt my login.cshtml page i have using html.beginform lt div class formscontent gt lt ol&gt lt li&gt html.labelfor x gt x.agreementnumber lt br gt html.textboxfor x gt x.agreementnumber new size 30 lt br gt html.validationmessagefor m gt m.agreementnumber lt br gt lt br gt lt li&gt lt li&gt html.labelfor x gt x.username lt br gt html.textboxfor x gt x.username new size 30 lt br gt html.validationmessagefor m gt m.username lt br gt lt br gt lt li&gt lt li&gt html.labelfor x gt x.password lt br gt html.passwordfor x gt x.password new size 30 lt br gt html.validationmessagefor m gt m.password lt br gt lt br gt lt li&gt lt ol&gt lt div&gt lt ol&gt lt li&gt html.checkboxfor m gt m.rememberme html.labelfor m gt m.rememberme new class checkbox lt li&gt lt ol&gt lt br gt lt input class mainbutton type submit value model.localisation.translatehtmlstring logonbtn gt lt br gt lt div style text align left padding 0 5px 5px 10px gt forgot login info clik lt class link href url.action index credentials gt here lt a&gt lt div&gt bottom login page section scripts scripts.render bundles jqueryval javascript enabled my browser mvc 4 template project from visual studio client validation works fine.running application login page when viewing page source i see rendered lt label agreementnumber gt number&lt label&gt lt br gt lt input id agreementnumber name agreementnumber size 30 type text value 387893 gt lt br gt lt span class field validation valid data valmsg agreementnumber data valmsg replace true gt lt span&gt bottom lt script src bmwebsite scripts jquery.unobtrusive ajax.js gt lt script&gt lt script src bmwebsite scripts jquery.validate.inline.js gt lt script&gt lt script src bmwebsite scripts jquery.validate.js gt lt script&gt lt script src bmwebsite scripts jquery.validate.unobtrusive.js gt lt script&gt my model properties annotated public class logonmodel modelbase myrequired agreementnumberrequiredproperty mydisplay agreementnumberlabel public string agreementnumber get set myrequired usernamerequiredproperty mydisplay usernamelabel public string username get set myrequired passwordrequiredproperty datatype datatype.password mydisplay passwordlabel public string password get set mydisplay remembermecheckbox public bool rememberme get set myrequired class derived from regular requiredattribute reason my error messages localised overriding formaterrormessage string name method requiredattribute class works fine my labels error messages localized.myrequired.cspublic class myrequiredattribute requiredattribute private readonly string errormessagekey public myrequiredattribute string errormessage errormessagekey errormessage public override string formaterrormessage string name var translation httpcontext.current.session translation localisationhelper return translation null translation.translate errormessagekey errormessage i put breakpoint post version my login action method being hit form posted server where server side validation happens client side validation doesn't happen.what am i missing thank you,I had the same problem. It seems that the unobtrusive validation scripts were not loaded (see screenshot at the end). I fixed it by adding at the end of _Layout.cshtml @Scripts.Render("~/bundles/jqueryval")The end result:   @Scripts.Render("~/bundles/jquery")   @Scripts.Render("~/bundles/jqueryval")   @RenderSection("scripts" required: false)Except for my pretty standard CRUD views everything is Visual studio project template defaults.Loaded scripts after fixing the problem:
asp.net mvc calling method from view,my mvc app controller gets data model from external api so model class being used passes view data model has container which several objects several fields string values one view iterates over each object calls another view draw each them view iterates over fields string values draws them.here s where gets tricky me sometimes i want do some special formatting fields string values i could write 20 lines code formatting i would have do each every field would just silly oh so ugly instead i would like take field string value pass method get another string value back do every field.so here my question how do i call method from view i realize i may asking wrong question here answer probably i don't i should use local model deserialize object i get from external api my local model my local model do special formatting before i pass view i'm hoping some way i can call method from view instead mostly because seems like lot overhead convert custom object i get from api which turns contains lot other custom objects local custom objects i build also i'm sure what best way doing would be.disclaimer i'm aware similar thread asp.net mvc calling controller method from view asp.net mvc calling controller method from view i don't see how answers my question,Building on Amine's answer create a helper like:public static class HtmlHelperExtensions{public static MvcHtmlString CurrencyFormat(this HtmlHelper helper string value){var result = string.Format("{0:C2}" value);return new MvcHtmlString(result);}}in your view: use @Html.CurrencyFormat(model.value)If you are doing simple formating like Standard Numeric Formats then simple use string.Format() in your view like in the helper example above:@string.Format("{0:C2}" model.value)
converting asp.net mvc 3 project mvc 4,what steps should i take safely upgrade existing asp.net mvc 3 project latest asp.net mvc 4 developer preview,Follow the official steps posted here:http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806Note: These steps cover the official release--not the developer preview.
where can i find upshot.js examples documentation,steve sanderson gave very interesting presentations techdays 2012 netherlands one them he presented library he used client server communication mvc application upshot.i really amazed how easy use so i wanted download test i found download link here through nuget i cannot find any documentation does anyone have something works i would also appreciate sample code steve showed during presentation.edit i found online presentation i attended techdays soooo much worth seeing you get glance what upshot capable also get idea how start good luck have fun.the link http channel9.msdn.com events techdays techdays-2012-the netherlands/2159,Edit: see blog post of Steven over here with sample download code: http://blog.stevensanderson.com/2012/03/06/single-page-application-packages-and-samples/ Don't know either how to access the helper would love to know so I can play with it :-)This seems to do the trick for now: &lt;script src="../../Scripts/knockout-2.0.0.js" type="text/javascript"&gt;&lt;/script&gt;&lt;script src="../../Scripts/upshot.js" type="text/javascript"&gt;&lt;/script&gt;&lt;script src="../../Scripts/upshot.compat.knockout.js" type="text/javascript"&gt;&lt;/script&gt;&lt;script type="text/javascript"&gt;upshot.metadata({ "CLASSNAME:#NAMESPACE":{ "key": ["aId"]"fields": {"aId": { "type": "Int32:#System" } "Title": { "type": "String:#System" }"Description": { "type": "String:#System" }"Effort": { "type": "Double:#System" }}}});var myDataSource = new upshot.RemoteDataSource({providerParameters: {url: "http://localhost:7018/api/CONTROLLERNAME"operationName: ""operationParameters: {}}entityType: "CLASSNAME:#NAMESPACE"});myDataSource.refresh(function (results) {alert(results[0].Title());});&lt;/script&gt;You need to replace CLASSNAME:#NAMESPACE with your classname and namespace so for example: "WorkItem:#MySystem.Models". And replace the CONTROLLERNAME with the actual name of the controller in the case of thispublic class MyTasksController : ApiController you will need to replace CONTROLLERNAME with MyTasksAnd fill the stuff inside the metadata according to your model objects. I hope the code samples come online soon because this is a lot of work :-(
either errormessagestring errormessageresourcename must set both error using creditcardattribute,my model namespace mvcapplication2.models public class creditcard creditcard errormessageresourcetype typeof messages errormessageresourcename cardnumberinvalid public string cardnumber get set my messages.resx namevaluecardnumberinvalid check your card number correctand my view model mvcapplication2.models.creditcard@html.textboxfor m gt m.cardnumber mvc version 3 works without error mvc 4 when i go page i get excpetion saying either errormessagestring errormessageresourcename must set both only happening creditcardattribute other validation attributes requiredattribute work fine i have only set errormessageresourcename i have set errormessagestring so do understand what i have done wrong can anyone help please,It's a known issue in .Net 4.5. Adding "ErrorMessage = null" named parameter should solve this.Reference:Reference link is broken now.http://connect.microsoft.com/VisualStudio/feedback/details/757298/emailaddress-attribute-is-unable-to-load-error-message-from-resource-mvc
asp.net mvc bundle rendering script files staging server works development server,our asp.net mvc 4 web application our bundleconfig.cs includes following bundles.add new scriptbundle bundles jquery include scripts jquery version js bundles.add new scriptbundle bundles jqueryui include scripts jquery ui version js bundles.add new scriptbundle bundles jqueryval include scripts jquery.unobtrusive scripts jquery.validate bundles.add new scriptbundle bundles modernizr include scripts modernizr when we look html home page development server we can see following script tags even though debug mode web.config set true lt compilation debug true targetframework 4.0 gt lt script src afr scripts jquery ui-1.8.20.min js gt lt script&gt lt script src afr scripts modernizr-2.5.3.js gt lt script&gt lt script src afr scripts jquery-1.7.1.js gt lt script&gt lt script src afr scripts jquery ui-1.8.20.js gt lt script&gt lt script src afr scripts jquery.unobtrusive ajax.js gt lt script&gt lt script src afr scripts jquery.validate.js gt lt script&gt lt script src afr scripts jquery.validate.unobtrusive.js gt lt script&gt when we deploy app staging server look html view source home page all above script tags exception lt script src afr scripts jquery ui-1.8.20.min js gt lt script&gt missing we've verified all files mentioned tags script folder folder structure exactly same development machine staging server web.config fie has lt compilation targetframework 4.0 gt which means default debug false result some javascript functions failing staging server both staging development machines windows 2012.please help thanks,I ran into the same problem and I'm not sure why but it turned out to be that the script link generated by Scripts.Render did not have a .js extension.  Because it also does not have a Type attribute the browser was just unable to use it (chrome and firefox).To resolve this I changed my bundle configuration to generate compiled files with a js extension e.g. var coreScripts = new ScriptBundle("~/bundles/coreAssets.js").Include("~/scripts/jquery.js");var coreStyles = new StyleBundle("~/bundles/coreStyles.css").Include("~/css/bootstrap.css");Notice in new StyleBundle(... instead of saying ~/bundles/someBundle I am saying ~/bundlers/someBundle.js or ~/bundles/someStyles.css..This causes the link generated in the src attribute to have .js or .css on it when optimizations are enabled as such the browsers know based on the file extension what mime/type to use on the get request and everything works.If I take off the extension everything breaks.  That's because @Scripts and @Styles doesn't render all the necessary attributes to understand a src to a file with no extension.
enum localization,how do you localize enums listboxfor where multiple options possible example enum contains roles public enum roletype display description administrator resourcetype typeof resource administrator 1 display description moderator resourcetype typeof resource moderator 2 display description webmaster resourcetype typeof resource webmaster 3 display description guest resourcetype typeof resource guest 4etc 5 i have seen done dropdownlist selectlists way do multi select list edit how i'd like use which how works now doesn't get translated different language var roles from role r enum.getvalues typeof roletype select new id int enum.parse typeof roletype r.tostring name r.tostring searchmodel.roles new multiselectlist roles id name note i have renamed enum from role roletype,I solved the issue by creating a EnumExtension which I use in my view. This extension looks for a resource file called "EnumResources.resx" and looks up the resource by the following naming convention {Name of EnumType}_{Value of enum passed in}. If the resource key is missing it will display the value of the resource encapsulated within double brackets [[EnumValue]]. This way its easy to find a "untranslated" Enum in your view. Also this helps reminding you if you forgot to update the resource file after a rename or such.public static class EnumExtensions{public static string GetDisplayName(this Enum e){var rm = new ResourceManager(typeof (EnumResources));var resourceDisplayName = rm.GetString(e.GetType().Name + "_" + e);return string.IsNullOrWhiteSpace(resourceDisplayName) ? string.Format("[[{0}]]" e) : resourceDisplayName;}}The resource file looks like this:Usage:&lt;div&gt;@ContractStatus.Created.GetDisplayName()&lt;/div&gt;
how could i make my ravendb application execute properly when useembeddedhttpserver set true using 2-tier architecture,i used ravendb embedded 2.0.2230 my application interacted asp net web api different assemblies.when i set useembeddedhttpserver true document store first time i send request ravendb executes properly when i try second time my application displays raven studio.when i remove useembeddedserver setting my application runs without any problems.my ravendb configured following codes data tier this.documentstore new embeddabledocumentstore connectionstringname ravendb useembeddedhttpserver true initialize implementation web.config have settings service tier lt connectionstrings&gt lt add name ravendb connectionstring datadir app data ravendatabase gt lt connectionstrings&gt setting i missed any settings i need apply point raven studio different port,When you enable the HttpServer in an EmbeddableDocumentStore ravenDB "hijacks" the webapplication and starts listening on the same port that the application is running.  Oren Eini:  When you use UseEmbeddedHttpServer from inside IIS it takes the port  from IIS. You need to set the value againon https://groups.google.com/forum/?fromgroups=#!topic/ravendb/kYVglEoMncwThe only way to prevent it is either turn-ff the raven http-server or assign it to a different portint ravenPort = 8181;NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(ravenPort);var ds = new EmbeddableDocumentStore {   DataDirectory = [DataFolder]   UseEmbeddedHttpServer = true   Configuration = {Port = ravenPort}};
mvc4 two radio buttons single boolean model property,i'm attempting find correct razor syntax mutually exclusive radio buttons both reflect value boolean property my model my model has public bool isfemale get set i would like display two radio buttons one male other female everything i've tried so far has reflected actual value isfemale property model currently i have html.radiobuttonfor model gt model.isfemale model.isfemale male@html.radiobuttonfor model gt model.isfemale model.isfemale femalethis seems persist value correctly i change update does mark correct value checked i'm sure something stupid i'm stuck,In MVC 6 (ASP.NET Core) this can also be achieved with tag helpers:&lt;label&gt;&lt;input type="radio" asp-for="IsFemale" value="false" /&gt; Male&lt;/label&gt;&lt;label&gt;&lt;input type="radio" asp-for="IsFemale" value="true" /&gt; Female&lt;/label&gt;
checking login user role razor page,request.isauthenticated amp amp user.identity.name administrator lt div id sidebar gt lt div class module gt lt ul class menu gt lt li&gt html.actionlink home index home lt li&gt lt li&gt html.actionlink about about home lt li&gt lt li&gt html.actionlink contact contact home lt li&gt lt ul&gt lt div&gt lt div class maincontent gt hello user.identity.name lt div&gt lt div&gt my layout user authenticated administrator sort check looks good i need check role user his name.here controler method public actionresult authenticateduserlayout string username var lst usercontext.userprofiles.tolist var user lst.select u gt u.username username isadmin session loginuser tostring return view user else return index i also find return view user good because i don't know how make any use user,Dave's answer is correct.  I would suggest that you consider using a property on your model called IsAdministrator or CanSeeSidebar and treat answering that question as domain logic.  The view should work only with the model.  Looking at the thread reading from a database are the same in respect that they answer domain questions.  All those types of questions should be answered before your controller hands the model off to the view.
webapi found reference error when i have assembly,i've created mvc 4 web api application inside my solution i'm getting 2 errors right now i need some help system.web.http.httpconfiguration does contain definition maphttpattributeroutes extension method maphttpattributeroutes accepting first argument type system.web.http.httpconfiguration could found you missing using directive assembly reference error occurs following code file webapiconfig.cs app start folder using system using system.collections.generic using system.linq using system.web.http using system.web public static class webapiconfig public static void register httpconfiguration config web api configuration services web api routesconfig.maphttpattributeroutes config.routes.maphttproute name defaultapi routetemplate api controller id defaults new id routeparameter.optional another one global.asax system.web.http.globalconfiguration does contain definition configure'file global.asax.csusing system using system.collections.generic using system.linq using system.web using system.web.http using system.web.http.webhost using system.web.mvc using system.web.optimization using system.web.routing public class webapiapplication system.web.httpapplication protected void application start arearegistration.registerallareas globalconfiguration.configure webapiconfig.register filterconfig.registerglobalfilters globalfilters.filters routeconfig.registerroutes routetable.routes bundleconfig.registerbundles bundletable.bundles updateafter installing via nuget webapi webhost suggestion sa_ddam213 resolves some problems now got error when run my application could load file assembly system.net.http one its dependencies located assembly manifest definition does match assembly referenceweb.config file has assembly&lt dependentassembly&gt lt assemblyidentity name system.web.http publickeytoken 31bf3856ad364e35 culture neutral gt lt bindingredirect oldversion 0.0.0.0-5.2.0.0 newversion 5.2.0.0 gt lt dependentassembly&gt,A forced reinstall of WebAPI could do the job: update-package microsoft.aspnet.webapi -reinstall
open mvc view new window from controller,any way open view from controller action new window public actionresult newwindow some codereturn view how would i get newwindow.cshtml view open new browser tab i know how do from link view question has anyone figured out way do from controller action,You can use Tommy's method in forms as well:@using (Html.BeginForm("Action" "Controller" FormMethod.Get new { target = "_blank" })){//code}
asp.net mvc rendering seems slow,i've created brand new mvc4 web application visual studio done nothing more than add home controller hello world index view i installed miniprofiler nuget package put necessary couple lines layoutcshtml what i get when i run site release mode hosted iis rendering time varies pageload 130ms about fast gets seems bit slow me i've seen other people who get pages rendered 30ms quicker any ideas why rendering would slow brand new empty mvc4 project my processor intel core i5-2400 machine has 16gb ram.by way first time page loaded i reloaded page few times before getting 130ms result.update i followed advice answer from pscoder remove all razorviewengine halved rendering time really good i still get about 70ms higher main render action page ideally i'd like halve better.specifically i'd like ask does rendering time seem overly slow average my machine any way i can speed up,Adding to @PSL 's answer - we only ever check for `.CSHTML filesViewEngines.Engines.Clear();IViewEngine razorEngine = new RazorViewEngine() { FileExtensions = new string[] { "cshtml" } };ViewEngines.Engines.Add(razorEngine);Also make sure you are running in Release Mode - that is absolutely critical as ASP/Razor/MVC 'applies some pretty aggressive caching' when in release mode&lt;compilation targetFramework="4.0" debug="false"&gt; in your Web.Config file.Sam Saffron/Stack Overflow looked into view rendering performance also:http://samsaffron.com/archive/2011/08/16/Oh+view+where+are+thou+finding+views+in+ASPNET+MVC3+
razor views giving compile time error duplicate,question already has answer here compile views asp.net mvc8 answersrazor syntax errors compiles when should compile1 answeri've recently installed vs 2012 professional.when i try build my mvc4 web project doesn't recognize error razor view when i do build re build example i removed namespace from project say renamed i build solution gave me errors all cs files which i fixed changing namespace entire solution build successfully when i run project gave me compilation error saying namespace found because old namespace still referred some views cshtml files expected solution i wish when i do build re build should recognize errors show me along any other errors.this working fine vs 2010 am i missing any configuration thanks advance amitediti found answer myself i think early post question razor syntax errors compiles when should compile another problemafter changing value true csproject file when i start building project shows error shows only one error time let say i've 5 errors total 3 views would just show me one error any solution so shows all 5 errors,  When i try to build my MVC4 Web Project. It doesn't recognize error in  razor view when i do "Build" or "Re-Build".Seems normal. Razor views are dynamically compiled by the ASP.NET runtime. If you want your views to be built at compile-time you could add the following option to your .csproj file:&lt;PropertyGroup&gt;&lt;MvcBuildViews&gt;true&lt;/MvcBuildViews&gt;&lt;/PropertyGroup&gt;You may take a look at the this article for more details.
mvc4 enum radio button list,i have seen few threads none seem apply mvc4 because radiobuttonfor html extension method helper does exist.say i have enum list i.e airlines public enum airlines unknown 0 britishairways 1 virginatlantic 2 airfrance 3 how can i bind radio button list my view able retrieve selected item what about being able say select one item selection made,You can create a custom Editor Template for the enum Airlines that will render a radio button list.  In your Model you will have a property of type Airlines and tag this property with the Required attribute and set ErrorMessage = "select one item".  Don't forget to include the jQuery validation for client side validation if you want it usually just have to add @Scripts.Render("~/bundles/jqueryval") on your Layout or View.  If you don't use the jQuery validation you will need to make the property nullable on the model because enums are just set to the first value by default so MVC will not see it as invalid.  Remember if you change the property to nullable you will also need to change the Model type of your Editor Template to nullable as well.UPDATETo enable the Editor Template to render a radio button list for any enum change the template to the following:@model Enum@foreach (var value in Enum.GetValues(Model.GetType())){@Html.RadioButtonFor(m =&gt; m value)@Html.Label(value.ToString())}ORIGINALThe Editor Template Airlines.cshtml in the Views\Shared\EditorTemplates directory:@model MvcTest.Models.Airlines@foreach (var value in Enum.GetValues(typeof(MvcTest.Models.Airlines))){@Html.RadioButtonFor(m =&gt; m value)@Html.Label(value.ToString())}The Model:public class TestModel{[Required(ErrorMessage = "select one item")]public Airlines Airline { get; set; }}The action methods:public class HomeController : Controller{[HttpGet]public ActionResult Index(){return View(new TestModel());}[HttpPost]public ActionResult Index(TestModel model){if (ModelState.IsValid){return RedirectToAction("Index");}return View(model);}}The view:@model MvcTest.Models.TestModel@{ViewBag.Title = "Index";Layout = "~/Views/Shared/_Layout.cshtml";}&lt;h2&gt;Index&lt;/h2&gt;@using (Html.BeginForm()){@Html.EditorFor(m =&gt; m.Airline)&lt;input type="submit" value="Submit" /&gt;@Html.ValidationSummary(false)}
using cookie asp.net mvc 4,i have web application asp.net mvc4 i want use cookie user login logout so my actions follows login action httppost public actionresult login string username string pass modelstate.isvalid var newuser userrepository.getuserbynameandpassword username pass newuser null var json jsonconvert.serializeobject newuser var usercookie new httpcookie user json usercookie.expires.adddays 365 httpcontext.response.cookies.add usercookie return redirecttoactionpermanent index return view userlog logout actionpublic actionresult userout request.cookies user null var user new httpcookie user expires datetime.now.adddays 1 value null response.cookies.add user return redirecttoactionpermanent userlog i use cookie loyout follow using eshop.core using newtonsoft.json var userincookie request.cookies user userincookie null amp amp userincookie.value lt li&gt lt href gt salam&lt a&gt lt li&gt lt li&gt lt href url.action userout home gt cıxış&lt a&gt lt li&gt else lt li&gt lt href url.action userlog home gt giriş&lt a&gt lt li&gt when i click userout action action happen first time doesn't work i put breakpoint looking process get userlog action doesn't userout my question where i use wrong way cookie what best way using cookie asp.net mvc4 scenario,We are using Response.SetCookie() for update the old one cookies and Response.Cookies.Add() are use to add the new cookies. Here below code CompanyId is update in old cookie[OldCookieName].HttpCookie cookie = Request.Cookies["OldCookieName"];//Get the existing cookie by cookie name.cookie.Values["CompanyID"] = Convert.ToString(CompanyId);Response.SetCookie(cookie); //SetCookie() is used for update the cookie.Response.Cookies.Add(cookie); //The Cookie.Add() used for Add the cookie.
mixing web api asp.net mvc pages one project,how do i mix web api asp.net mvc pages one project instance i have model user i would like within same project have apicontroller would respond all http verbs managing user entities same time have controller would return appropriate strongly typed views depending action requested.i can't name both controllers usercontroller what best way around should i name one userapicontroller other usercontroller any other suggestions,I haven't changed the namespaces the only thing that I had to do was register WebApi first and then MVC route//First register WebApi routerGlobalConfiguration.Configure(WebApiConfig.Register);//and register Default MVC Route afterRouteConfig.RegisterRoutes(RouteTable.Routes);and everything works great!
ef 5 enable migrations context type found assembly,i have 4 projects toombu.entities all models theretoombu.dataaccess mapping repository toombucontexttoombu.logique logic my applicationtoombu.web mvc 4 application all others dll.i tried enable migration toombu.web i had error context type found assemblyhow can i enable migration,I am surprised that no one mentioned the obvious answer to this question: Entity Framework requires a context before enable-migrations will work. The error message the OP posted suggests that no context was found. Sure it could be because the package manager console doesn't "see" the context--in which case the accepted answer is a possible solution (another solution is one I suggest below). But a context must exist in the current project (assembly) before any other solutions will work.What does it mean to have a context? It means that there must exist a class in your project that inherits from DbContext (in System.Data.Entity). Here is an example:public class MyDbContext : DbContext{public MyDbContext(){}}Be sure you useusing System.Data.Entity;before the code above has access to the DbContext class and that you have used NuGet to get Entity Framework 4.1 or later for the current project. If all along you had a context but the Package Manager Console just doesn't "see" it: In Visual Studio 2013 you don't have to use the -ProjectName switch. Instead go to the Package Manager Console (it's available in the View | Other Windows list) and look at the two dropdowns that appear at the top of the Package Manager Console dockable window. The first dropdown is for Package Source; the second is for Default Project. If you dropdown the Default Project and select a project in your solution then whatever commands you issue in the Package Manager console will be executed against the selected project. 
disable windows authentication webapi,i am playing mvc4 application using webapi fetching sending all my data controller i am using httpclient request get data all working fine issue i am facing when windows authentication enabled project web api calls returning 401 unauthorized error code my controller does calling using var client new httpclient var invoicedetailurl base url url.httprouteurl defaultapi new controller invoicedetails id id var result client.getasync invoicedetailurl result windows authentication has site necessarily web api controllers i have tried excluding api controllers web.config like below lt location path api gt lt system.web gt lt authorization&gt lt allow users gt lt authorization&gt lt system.web gt lt location&gt additions web.config did nothing.any suggestions,I came across this question while trying to do something very similar and wanted to add to the answer given above. I haven't found a lot of detailed information out there on how to do this. Just bits and piece all over the web. So hopefully this will add to what's out there.I have an MVC4 application that has a WebAPI part to it. The MVC app needs to use Windows Auth but the WebAPI portion needed to be anonymous and have Windows Auth turned off. While the above solution worked for ncbl it didn't work for me because in my scenario I was not using code to handle credentials. In my scenario I wanted a web.config or IIS based solution. I started with Cybermaxs' web.config solution and added to it. Here's what I ended up with.&lt;!-- Configure the virtual path api --&gt;&lt;!-- This section is like a mini-web.config for the virtual path --&gt;&lt;location path="api"&gt;&lt;system.web&gt;&lt;authorization&gt;&lt;!-- All anonymous users access to the virtual path api --&gt;&lt;allow users="?" /&gt;&lt;/authorization&gt;&lt;/system.web&gt;&lt;!-- Need to include the security overrides else it will inherit from the root of the application --&gt;&lt;system.webServer&gt;&lt;security&gt;&lt;authentication&gt;&lt;!-- Need to enable anonymous access and turn off Windows authentication for the virtual path --&gt;&lt;anonymousAuthentication enabled="true"/&gt;&lt;windowsAuthentication enabled="false"/&gt;&lt;/authentication&gt;&lt;/security&gt;&lt;/system.webServer&gt;&lt;/location&gt;The key for me was to add the &lt;system.webServer&gt; section to the web.config so that I could override the authentication for this virtual path. I tried to do this in IIS but since it was a virtual path i.e. /api doesn't exist on the web server this was not possible for me. Note: Be aware IIS might have a config file at a higher configuration level that is locking the &lt;authentication&gt; section such as in the application.config or machine.config. An element might have the the attribute allowOverride set to false. I was getting a HTTP Error 500.19 (HRESULT: 0x80070021) at first and had to go into the application.config file to change this attribute. I found more details on this error here.Once I had this additional section in the &lt;location&gt; section of my web.config I made sure to decorate my api controller with [AllowAnonymous]. Then bam...it all started to work.This is how I have authentication and authorization setup for the root of my application.&lt;system.web&gt;  &lt;authentication mode="Windows" /&gt;  &lt;authorization&gt;&lt;!-- Deny all anonymous users at the root of the application --&gt;&lt;deny users="?" /&gt;  &lt;/authorization&gt;&lt;/system.web&gt;
why mvc4 using service locator anti pattern,after reading dependency injection net mark seemann i stay away from service locator which anti pattern upon reading release notes mvc 4 i see improved inversion control ioc via dependencyresolver web api now uses service locator pattern implemented mvc s dependency resolver obtain instances many different facilities.thus i'm left curious confused why microsoft would use service locator 2012,As Darin points out ASP.NET MVC 4 is a Framework and is container agnostic. That's why it provides a service locator in the form of IDependencyResolver. This allows anyone to plug in their container of choice.However I wouldn't call this an anti pattern. This allows you to use the container of your choice but it doesn't force you the application developer to use service location. If the framework forced the developer to use Service Location then I would call it an anti-pattern. But the developer who builds an ASP.NET MVC application is free to use DI via constructor injection property setup or service location. It's their choice.Look at all the ASP.NET MVC examples of dependency injection published by me or the ASP.NET MVC team. In pretty much all cases they're using constructor injection. They're not using service location.In fact most of the ASP.NET MVC source code itself doesn't use service location to retrieve dependencies. There's a few key places where the MVC calls into the service locator for legacy APIs and such. But that's about it.
type found matches controller named 39 user 39,i'm trying navigate page which its url following format localhost xxxxx user id verifyemail secretkey xxxxxxxxxxxxxxxi've added new route routeconfig.cs file so my routeconfig.cs looks like public class routeconfig public static void registerroutes routecollection routes routes.ignoreroute resource axd pathinfo routes.maproute name verifyemail url user id verifyemail defaults new controller user action verifyemail routes.maproute name default url controller action id defaults new controller home action index id urlparameter.optional unfortunately when trying navigate url i get page lt error&gt lt message&gt http resource found matches request uri http localhost 52684/user/f2acc4d0-2e03-4d72-99b6-9b9b85bd661a/verifyemail secretkey e9bf3924-681c-4afc-a8b0-3fd58eba93fe lt message&gt lt messagedetail&gt type found matches controller named user lt messagedetail&gt lt error&gt here my usercontroller public class usercontroller controller get user id verifyemail httpget public actionresult verifyemail string id string secretkey try user user usersbl.instance.verify id secretkey logger.debug string.format user s just signed email user.debugdescription catch exception e throw new exception failed e return view please tell me what am i doing wrong,In my case the controller was defined as:public class DocumentAPI : ApiController{}Changing it to the following worked!public class DocumentAPIController : ApiController{}The class name has to end with Controller!Edit: As @Corey Alix has suggested please make sure that the controller has a public access modifier; non-public controllers are ignored by the route handler!
mvc4 input field placeholder,does mvc4 default support placeholders generated input fields i didn't found anything so i am trying implement my own unfortunately prompt e mail passed viewdata.modelmetadata.watermark while generating control why modelpublic class logonmodel required display name e mail prompt e mail datatype datatype.emailaddress public string email get set html.textboxfor m gt m.email new placeholder viewdata.modelmetadata.watermark i get html code where placeholder tag do has any text&lt input data val true data val regex please enter valid e mail address data val required e mail field required id email name email placeholder type text value class valid gt,I did soField in model:[Required][Display(Name = "User name")]public string UserName { get; set; }Razor:&lt;li&gt;  @Html.TextBoxFor(m =&gt; m.UserName new { placeholder = Html.DisplayNameFor(n =&gt; n.UserName)})&lt;/li&gt;
mvc4 stylebundle can you add cache busting query string debug mode,i've got mvc application i'm using stylebundle class rendering out css files like bundles.add new stylebundle bundles css include content css problem i have debug mode css urls rendered out individually i have web proxy aggressively caches urls release mode i know query string added final url invalidate any caches each release.is possible configure stylebundle add random querystring debug mode well produce following output get around caching issue lt link href stylesheet.css random some random string rel stylesheet gt,You just need a unique string.  It doesn't have to be Hash.  We use the LastModified date of the file and get the Ticks from there.  Opening and reading the file is expensive as @Todd noted.  Ticks is enough to output a unique number that changes when the file is changed.internal static class BundleExtensions{public static Bundle WithLastModifiedToken(this Bundle sb){sb.Transforms.Add(new LastModifiedBundleTransform());return sb;}public class LastModifiedBundleTransform : IBundleTransform{public void Process(BundleContext context BundleResponse response){foreach (var file in response.Files){var lastWrite = File.GetLastWriteTime(HostingEnvironment.MapPath(file.IncludedVirtualPath)).Ticks.ToString();file.IncludedVirtualPath = string.Concat(file.IncludedVirtualPath "?v=" lastWrite);}}}}and how to use it:bundles.Add(new StyleBundle("~/bundles/css").Include("~/Content/*.css").WithLastModifiedToken());and this is what MVC writes:&lt;link href="bundles/css/site.css?v=635983900813469054" rel="stylesheet"/&gt;works fine with Script bundles too.
what does web.config compilation assemblies element do,i had problem where working new mvc project soon i added html.partial name my layout.cshtml page asp.net would throw exception page load error cs0012 type system.object referenced assembly defined add reference assembly system.runtime version 4.0.0.0 culture neutral publickeytoken b03f5f7f11d50a3a added.the fix add web.config compilation element lt assemblies&gt lt add assembly system.runtime version 4.0.0.0 culture neutral publickeytoken b03f5f7f11d50a3a gt lt assemblies&gt i'd love know why fixes issue.what s odd new mvc app i'm using has load webforms aspx pages work treat i've copied ton legacy webforms stuff new mvc project acres code everything works without html.partial call even my mvc view renders.so what earth going what does config do why aren't normal project references target framework settings enough,Encountered the exact same error after switching to VS 2017 &amp; C# 7.1 and adding references to System.ValueTuple into my .NET 4.6 ASP.NET projectProblem solved by activating Roslyn in ASP.NET projects without fiddling with references in web.configAdded benefit of this is you can use new C# features in aspx pages and MVC views
json parsing error syntax error unexpected end input,i got following piece codefunction pushjsondata productname ajax url knockout saveproduct type post contenttype application json datatype json data name aa async falsesuccess function loadjsondata error function jqxhr textstatus errorthrown alert textstatus pushjsondata errorthrown jqxhr notice i hard coded data value data get pushed database fine however i keep getting error parsing error syntax error unexpected end input i am sure my data correct json syntax when i checked network chrome inspector saveproduct request showed data correct name aa post request did have response so i am clueless where parse error coming from i tried using firefox browser same thing happened.can anyone give some idea what wrong thanks p.s.here controller codenamespace mvcappljson.controllers public class knockoutcontroller controller get knockout public actionresult index return view httpget public jsonresult getproductlist var model new list&lt product&gt try using var db new koentities var product from p db.products orderby p.name select p model product.tolist catch exception ex throw ex return json model jsonrequestbehavior.allowget httppost public void saveproduct product product using var db new koentities db.products.add new product name product.name datecreated datetime.now db.savechanges,I was using a Node http request and listening for the data event.  This event only puts the data into a buffer temporarily and so a complete JSON is not available.  To fix each data event must be appended to a variable. Might help someone (http://nodejs.org/api/http.html).
string minlength maxlength validation don 39 t work asp.net mvc,i have classusing system.componentmodel.dataannotations using argussoft.bi.dal.domain.users namespace argussoft.bi.dal.dtos.userdtos public class createuserdto required errormessage введите логин maxlength user.emaillength errormessage максимальная длина логина 40 символов regularexpression user.nameregularexpression errormessage логин может содержать только латинские символы дефисы подчеркивания точки public string name get set required errormessage введите email maxlength user.emaillength errormessage максимальная длина адреса электронной почты 100 символов regularexpression user.emailregularexpression errormessage введите корректный адрес электронной почты public virtual string email get set required errormessage введите имя пользователя maxlength user.fullnamelength errormessage максимальная длина имени пользователя 100 символов regularexpression user.nameregularexpression errormessage имя пользователя может содержать только латинские символы дефисы подчеркивания точки public virtual string fullname get set public virtual int role get set regularexpression user.phoneregularexpression errormessage введите корректный номер телефона public virtual string phone get set public virtual int status get set required errormessage введите пароль minlength user.passwordminlength errormessage минимальная длина пароля 5 символов maxlength user.passwordmaxlength errormessage максимальная длина пароля 20 символов regularexpression user.passwordregularexpression errormessage пароль может содержать только латинские символы дефисы подчеркивания точки public virtual string password get set form model argussoft.bi.dal.dtos.userdtos.createuserdto using ajax.beginform createuser user new ajaxoptions onsuccess onsuccesscreateuser new id dialog form class form horizontal lt div class modal header gt lt button type button class close data dismiss modal aria hidden true gt amp times lt button&gt lt h4 gt добавить пользователя&lt h4 gt lt div&gt lt div class modal body gt lt name gt lt div class control group gt lt label class control label html.namefor model gt model.name gt логин&lt label&gt lt div class controls gt lt div class input prepend gt html.textboxfor model gt model.name new class span3 id input name lt br gt html.validationmessagefor model gt model.name lt div&gt lt div&gt lt div&gt lt email gt lt div class control group gt lt label class control label html.namefor model gt model.email gt email&lt label&gt lt div class controls gt lt div class input prepend gt html.textboxfor model gt model.email new class span3 id input email lt br gt html.validationmessagefor model gt model.email lt div&gt lt div&gt lt div&gt lt fullname gt lt div class control group gt lt label class control label html.namefor model gt model.fullname gt имя пользователя&lt label&gt lt div class controls gt lt div class input prepend gt html.textboxfor model gt model.fullname new class span3 id input full name lt br gt html.validationmessagefor model gt model.fullname lt div&gt lt div&gt lt div&gt lt role gt lt div class control group gt lt label class control label html.namefor model gt model.role gt роль пользователя&lt label&gt lt div class controls gt lt div class input prepend gt html.dropdownlist role selectlist viewbag.rolesnew id input role lt br gt html.validationmessagefor model gt model.role lt div&gt lt div&gt lt div&gt lt phone gt lt div class control group gt lt label class control label html.namefor model gt model.phone gt контактный телефон&lt label&gt lt div class controls gt lt div class input prepend gt html.textboxfor model gt model.phone new class span3 id input phone lt br gt html.validationmessagefor model gt model.phone lt div&gt lt div&gt lt div&gt lt status gt lt div class control group gt lt label class control label html.namefor model gt model.status gt статус пользователя&lt label&gt lt div class controls gt lt div class input prepend gt html.dropdownlist status selectlist viewbag.userstatusesnew id input status lt br gt html.validationmessagefor model gt model.status lt div&gt lt div&gt lt div&gt lt password gt lt div class control group gt lt label class control label html.namefor model gt model.password gt пароль пользователя&lt label&gt lt div class controls gt lt div class input prepend gt html.textboxfor model gt model.password new class span3 id input password lt br gt html.validationmessagefor model gt model.password lt div&gt lt div&gt lt div&gt lt div&gt lt div class modal footer gt lt href url.action userindex user class btn gt отменить&lt a&gt lt button type submit id save button class btn btn primary gt сохранить&lt button&gt lt div&gt user class public class user baseentity public const int namelength 40 public const int passwordminlength 5 public const int passwordmaxlength 20 public const int fullnamelength 100 public const int emaillength 100 public const int phonelength 40 my validation works only required regularexpression doesn't work minlength maxlength i don't get any error message case what can reason,Try using this attribute for example for password min length:[StringLength(100 ErrorMessage = "Максимальная длина пароля 20 символов" MinimumLength = User.PasswordMinLength)]
mvc 4 data annotations ldquo display&rdquo attribute,i am starting out mvc 4 razor view engine i believe may apply mvc 3 earlier well i am wondering any benefit using displayattribute data annotation within view versus just writing string directly html example i had following model public class thing public string wildandcrazyproperty get set would any benefit annotating property display name wild crazy public string wildandcrazyproperty get set having my markup lt html&gt lt body&gt lt div&gt html.displaynamefor modelitem gt modelitem.wildandcrazyproperty lt div&gt lt div&gt html.displayfor modelitem gt modelitem.wildandcrazyproperty lt div&gt lt body&gt lt html&gt versus having annotation doing lt html&gt lt body&gt lt div&gt wild crazy&lt div&gt lt div&gt html.displayfor modelitem gt modelitem.wildandcrazyproperty lt div&gt lt body&gt lt html&gt reason i haven't mentioned html.labelfor case because property data being displayed static ie non editable text page data never editable page so need me use html.textboxfor within second lt div&gt subsequently use html.labelfor properly associate label text box,In addition to the other answers there is a big benefit to using the DisplayAttribute when you want to localize the fields.  You can lookup the name in a localization database using the DisplayAttribute and it will use whatever translation you wish.Also you can let MVC generate the templates for you by using Html.EditorForModel() and it will generate the correct label for you.Ultimately it's up to you.  But the MVC is very "Model-centric" which is why data attributes are applied to models so that metadata exists in a single place.  It's not like it's a huge amount of extra typing you have to do.
aspnet regiis.exe ir does work windows 8,i am trying deploy asp.net mvc3 app my windows 8 box iis8 when i try route site i get following error pretty much everything i can find issue says run aspnet regiis.exe irwhen i run my windows 8 box i get following message microsoft windows version 6.2.9200 c 2012 microsoft corporation all rights reserved.c users justin&gt c windows microsoft.net framework v4.0.30319 aspnet regiis.exe irmicrosoft r asp.net regiis version 4.0.30319.17929administration utility install uninstall asp.net local machine.copyright c microsoft corporation all rights reserved.start installing asp.net 4.0.30319.17929 without changing existing web applications use version aspnet option supported version operating system administrators should instead install uninstall asp.net 4.5 iis8 using turn windows features off dialog server manager management tool dism.exe command line tool more details please see http go.microsoft.com fwlink linkid 216771.finished installing asp.net 4.0.30319.17929 without changing existing web applications use version asp.net.asp.net 4.5 already installed my system my application runs correctly visual studio i can deploy save my life i am completely loss where go from here i have tried both integrated classic pipeline modes site well,Run the following command which will install and register ASP.NET 4.5 in IIS:dism /online /enable-feature /featurename:IIS-ASPNET45 /all
white space top page,i have about 20 pixels white space top my page i have inspected every element nothing has padding margin area when i inspect body element does include space when i inspect html element does include space also i delete lt doctype html&gt white space goes away.here my main layout&lt doctype html&gt lt html lang en gt lt head&gt lt meta charset utf-8 gt lt title&gt title&lt title&gt lt link href favicon.ico rel shortcut icon type image x icon gt lt meta name viewport content width device width gt rendersection css false lt head&gt lt body&gt rendersection javascript false lt body&gt lt html&gt,Try thishtmlbody {  margin: 0;  padding: 0;  height: 100%;}
automatic migrations asp.net simplemembershipprovider,so i tried use automatic migrations my new mvc 4 project somehow isn't working i followed blog post step step.i ve added changes userprofile account model notarycode field table userprofile public class userprofile key databasegeneratedattribute databasegeneratedoption.identity public int userid get set public string username get set public int notarycode get set i wrote package manager console enable migrations configuration class appeared inherits from dbmigrationsconfiguration&lt web.models.userscontext gt i fill class public configuration automaticmigrationsenabled true protected override void seed atomic.vesper.cloud.web.models.userscontext context websecurity.initializedatabaseconnection defaultconnection userprofile userid username autocreatetables true roles.roleexists atomic roles.createrole atomic roles.roleexists protocolista roles.createrole protocolista roles.roleexists cliente roles.createrole cliente string adminuser randolf websecurity.userexists adminuser websecurity.createuserandaccount adminuser 12345 new notarycode 1 roles.getrolesforuser adminuser contains atomic roles.adduserstoroles new adminuser new atomic i tried run update database verbose doesn't work i mean output already object named userprofile database.pm gt update database verboseusing startup project web using nuget project web specify verbose flag view sql statements being applied target database.target database vespercloud datasource sqlserver provider system.data.sqlclient origin configuration pending code based migrations.applying automatic migration 201211051825098_automaticmigration create table dbo userprofile userid int null identity username nvarchar max notarycode int nullconstraint pk dbo.userprofile primary key userid system.data.sqlclient.sqlexception 0x80131904 already object named userprofile database system.data.sqlclient.sqlconnection.onerror sqlexception exception boolean breakconnection action 1 wrapcloseinaction system.data.sqlclient.sqlinternalconnection.onerror sqlexception exception boolean breakconnection action 1 wrapcloseinaction system.data.sqlclient.tdsparser.throwexceptionandwarning tdsparserstateobject stateobj boolean callerhasconnectionlock boolean asyncclose system.data.sqlclient.tdsparser.tryrun runbehavior runbehavior sqlcommand cmdhandler sqldatareader datastream bulkcopysimpleresultset bulkcopyhandler tdsparserstateobject stateobj boolean&amp dataready system.data.sqlclient.sqlcommand.runexecutenonquerytds string methodname boolean async int32 timeout system.data.sqlclient.sqlcommand.internalexecutenonquery taskcompletionsource 1 completion string methodname boolean sendtopipe int32 timeout boolean asyncwrite system.data.sqlclient.sqlcommand.executenonquery system.data.entity.migrations.dbmigrator.executesql dbtransaction transaction migrationstatement migrationstatement system.data.entity.migrations.infrastructure.migratorloggingdecorator.executesql dbtransaction transaction migrationstatement migrationstatement system.data.entity.migrations.dbmigrator.executestatements ienumerable 1 migrationstatements system.data.entity.migrations.infrastructure.migratorbase.executestatements ienumerable 1 migrationstatements system.data.entity.migrations.dbmigrator.executeoperations string migrationid xdocument targetmodel ienumerable 1 operations boolean downgrading boolean auto system.data.entity.migrations.dbmigrator.automigrate string migrationid xdocument sourcemodel xdocument targetmodel boolean downgrading system.data.entity.migrations.infrastructure.migratorloggingdecorator.automigrate string migrationid xdocument sourcemodel xdocument targetmodel boolean downgrading system.data.entity.migrations.dbmigrator.upgrade ienumerable 1 pendingmigrations string targetmigrationid string lastmigrationid system.data.entity.migrations.infrastructure.migratorloggingdecorator.upgrade ienumerable 1 pendingmigrations string targetmigrationid string lastmigrationid system.data.entity.migrations.dbmigrator.update string targetmigration system.data.entity.migrations.infrastructure.migratorbase.update string targetmigration system.data.entity.migrations.design.toolingfacade.updaterunner.runcore system.data.entity.migrations.design.toolingfacade.baserunner.run clientconnectionid a7da0ddb-bccf-490f-bc1e-ecd2eb4eab04 already object named userprofile database i know object exists i mean i'm try use automatic migrations precisely modify run without recreating manually db somehow isn't working.i look msdn documentation found property automaticmigrationdatalossallowed true setting true doesn't change anything i guess i'm missing something somehow doesn't find what any idea,What it looks like happened here is that you enabled migrations then ran the application.  By running the application before using the UpdateDatabase command EntityFramework would have created and populated the database but since when you enabled migrations the database didn't exist it didn't create the InitialCreate migration.  Migrations still thinks that you have an empty database and wants to create all of the objects in your modelWhat you can try is to either re-enable migrations which will generate an InitialCreate migration that reflects the current state of the database.  In this case I would save the changes you made to the seed method than run "Enable-Migrations -Force" this should recreate the migration and generate an IntialCreate migration.  You can then repopulate your seed method and run the UpdateDatabase command.  
mvc4 bundling does work when optimizations set true,i wonder what i don't do correct here i am using asp.net c mvc4 i want take use new css js optimization feature.here my html part@styles.render content css here my bunduleconfig.cs partbundles.add new stylebundle content css include content css reset.css content css bla.css bundletable.enableoptimizations true output works lt link href content css reset.css rel stylesheet gt lt link href content css bla.css rel stylesheet gt however when i uncomment bundletable.enableoptimizations true html output looks like this&lt link href content css v 5lojebkvqjin-fkjkycg ccvmbc_lf91jbasipwtucy1 rel stylesheet gt course 404 i have idea where i did something wrong please help first time working mvc4,I'm not sure if it's the web optimization or WebGrease that is so picky but one (or both) of them is and you need to be extremely careful. First of all there is nothing wrong with your code:bundles.Add(new StyleBundle("~/content/css").Include("~/content/css/reset.css""~/content/css/bla.css"));In fact this is exactly what Microsoft does. The main reason they don't use ~/bundles for css is that relative paths get screwed up for images. Think about how your browser sees a bundle - exactly the same way as it sees any other URL and all the normal path related rules still apply with respect to relative paths. Imagine your css had an image path to ../images/bullet.png. If you were using ~/bundles the browser would be looking in a directory above bundles which doesn't actually exist. It will probably end up looking in ~/images where you probably have it in ~/content/images. I've found a couple things that can really break it and cause 404 errors:FYI: My directory structure is Content/CSS which contains an images folder for CSS images.I have EnableOptimizations=true to force use of bundles while testingFirst thing you should do is 'View Source' and just click on the css links to see if they workLet's say we're developing a site about cats. You may have this @Styles.Render("~/Content/css/cats.css")// dont do this - see below why bundles.Add(new StyleBundle("~/content/css/cats.css").Include("~/content/css/reset.css""~/content/css/bla.css"));This generates a CSS link to this path in your HTML:/Content/css/cats.css?v=JMoJspikowDah2auGQBfQAWj1OShXxqAlXxhv_ZFVfQ1However this will give a 404 because I put an extension .css and IIS (I think) gets confused.If I change it to this then it works fine: @Styles.Render("~/Content/css/cats") bundles.Add(new StyleBundle("~/content/css/cats").Include("~/content/css/reset.css""~/content/css/bla.css"));Another problem already pointed out by others is you must not do @Styles.Render("~/Content/css")if you have a css directory or file (unlikely you'd have a file called css with no extension) in your Content directory.An additional trick is that you need to make sure your generated HTML has a version number&lt;link href="/Content/css/cats?v=6GDW6wAXIN5DJCxVtIkkxLGpojoP-tBQiKgBTQMSlWw1" rel="stylesheet"/&gt;If it doesn't and looks like this then you probably don't have an exact match for the bundle name between your Bundle table and in your cshtml file.&lt;link href="/Content/css/cats" rel="stylesheet"/&gt;
upgrading webgrease version 1.3.0 gets me error,while upgrading webgrease version 1.3.0 gets me error could load file assembly webgrease version 1.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 source error line 6 lt title&gt viewbag.title lt title&gt line 7 styles.render content bundles bootstrap how resolve error,Here is the answer that has worked for me and it is a combination of some of the above answers.First install / uninstall / reinstall the following packages:Install-Package Microsoft.AspNet.Web.Optimization Update-Package WebGreaseUninstall-Package Microsoft.AspNet.Web.OptimizationUninstall-Package WebGreaseInstall-Package Microsoft.AspNet.Web.Optimization Update-Package WebGreaseThen make a copy of the contents of ~/Views/Shared/_Layout.cshtmldelete the _Layout.cshtml file recreate it and paste the contents back in.this is the final fix that has worked for me.
asp.net mvc 4 editor template basic types,i've created template number input i do@html.editorfor model gt model.somevalue number works fine template used.however doesn't work html.editorfor model gt model.somevalue why do i need specify name editor template basic types,In your Editor Template you must have the same typeExample :model.SomeValue is type of loremIpsumObjectIn your EditorTemplate you are :  @model YourNamespaceWhereIsYourClass.loremIpsumObject  ...And your code in your editorTemplate....you can find an example here for datetimeIt helps you ?
any good reason use formcollection instead viewmodel,i've inherited code base written asp.net mvc 4 every post method takes formcollection aside from annoyance having access values through quoted strings also leads drawbacks being able use things like modelstate.isvalid allowhtml attributes my viewmodel properties actually did create viewmodel classes each views though pretty much just direct wrappers around actual entity framework model classes only used get methods.is anything i'm missing about formcollection gives reason why may have actually been good idea seems only have drawbacks i'd like go through fix using viewmodels instead would take good bit work because viewmodels have properties interfaces concrete classes which means either writing custom binder changing viewmodels.but perhaps something i'm missing where makes sense use formcollection,The only advantage I can think of is if you want to use the automatically generated controller provided when you don't specify a EF model to be strongly typed to. In that case your Create and Edit actions will use the FormCollection object as it is a reliable pre-existing artifact of the framework to work with for this purpose. Perhaps the previous developer chose this option while creating his controllers and stuck with it since Visual Studio must know what it's doing :)But in reality I would never recommend this headstart of a few seconds. It's always better to build out viewmodels I would recommend looking at the effort to move in that direction if only for maintenance purposes. With model binding and strongly typed views and html helpers you are much more likely to reduce the number of run-time errors as a result of changing some magic string and not realizing it until your page blows up.
best practice recommended alternative session variables mvc,okay so first off before anyone attempts make determination duplicate question i have reviewed most posts so regarding similar questions even combination all has been said i still am somewhat dilemma definitive maybe i should say unanimous agreement this.i can however say i have based posts conclusively determined answer based scope requirement even consideration opinions seem too diverse me make decision how i should handle this.my immediate requirement i need persist variable data from 1 controller across many views more specifically i have controller corresponding view handles shopping cart item counts i would like persist data across multiple views i am thinking layout view most logical choice this.now i have successfully accomplished task assigning value session variable which retrieved from my layout view so even when user were navigate any where within site number items shopping cart persist until either leave site complete checkout which case variable cleared code.the posts i've read seemed biased either staying away from session variables favor cookies storing data database stating intent purpose which i propose use them session variables perfectly fine use.the other thing i've read suggests session variables can potentially impede overall performance high traffic site since information stored server.i personally cannot justify storing type information database subsequently hitting database i'd imagine could also affect site performance seems bit overkill storage temporary data tempdata viewdata viewbag do work persisting data so logical choices requirement imo.if another well suited alternative session variable which working me i would like know what is.2 posts seem contradictory effort providing best recommendations leave me bit confused.cons good practice avoid using session state asp.net mvc yes why how pros still ok use session variables asp.net mvc better alternative some things like cart seems question although presented many different variations has definitive answer i can conclude.if more preferrable way accomplish without overkill answer i'm search of.i read somewhere use mvc filters tandem global.ascx application start section well does seem appropriate variables set controller level much perhaps static variables.can someone maybe squash lack better word many diverse opinions topic maybe provide more definitive answer question i'm sure diverse opinions have place i'm attempting discredit them having definitive possibly unanimous answer would better i could sort through other posts determine what best my application.of course question has definitive answer just tell me i'll attempt derive my own answer from other posts.thanks updated response answers providedcaching cookies seem general preference from responses however i've also noted statement caching its ideal candidate use across multiple web server because synchronization can potential issue.giving credit tim stated database storage optimized users have option return later time continue where left off.that excellent point keeping foresight probabilities its likely reasonable given some users may return leaving unneccessary data database.so keeping db optimized clean which me equal relevance would require implementing maintenance task automatically expire those records based set threshold time account those circumstances although maintenance task unquestionable option i still think adds just bit more work task simply intent purpose serving temporary storage.nonetheless i do respect tim recommendation believe deserves merit countering my initial opinion degree database would seem viable option storing temporary data so i think compromise would store data database given scenario shopping cart similar perhaps after checkout way you previously stated data may persistently tracked upon subsequent visits so you have record transactions more importantly would data those transactions having real relevance persist database.it also stated although session faster than database notwithstanding have its caveats can some degree mitigated other mechanisms leveraging sessionstatebehavior attribute just serving one example i think erik kind drove point home dunning kruger effect although from content explanations proposed answers given here i seriously doubt expertise any individuals who have responded any way questionable nonetheless i tend agree fact getting unanimous opinion may somewhat higher than reasonable expectation my part.what i more specifically looking general consensus technique would comfortably accomodate diverse number scenarios other words something would accomodate only my particular scenario also provide element scalability larger environments potentially heavier traffic way change programming would either alleviated altogether minimal best summary based feedback session variables seem accomodate smaller case scenarios when applicable have some potential persistence concerns among other notable discrepancies stated very thorougly erik so option obviously fit scalable model.caching preferable over session variables again neccessarily best scalable option due among other things potential synchronization complexities web server farm environments previously pointed out option nonetheless.database storage scalable intent purpose temporary volatile storage probably most elegant option from database perspective would require periodical cleanup personally having strong foundation database concepts earlier my career probably going something many developers likely agree using database purpose may suffice web development from programmers perspective however from perspective dal db development me has potential mandating additional db task enforce efficient backend.cookies seem nice option having combined desirable elements session variables caching conclusionbased answers i think cookies caching seem generally well rounded proposals best practice across board combination database storage when continued persistence required after fact potentially good candidates scalability ones presented ultimate choice between 2 would seem based amount type data requiring storage eg sensitive vs non sensitive whether any concern client may alter data end addition special considerations cookies fact may disabled clients.obviously one size fits all solution clearly pointed out concluded from answers provided terms scalability i may wrong seem best choices available.because all responses good i'm fairly going credit all posts useful going accept erik answer well rounded overall scalable solution i wish i could select more than one accepted answer i believe tim response also very well layed out concise.gupta s response good also i wanted more elaboration proposed answer repeat previous posts.thanks guys,WhenDatabases are highly optimized. A simple value like a shopping cart count is a good candidate for caching by the database and (hopefully) cheap to compute outright. It may be a non-issue.However if you have ruled out other mechanisms small user-by-user values are viable candidates for session.Cache is fine for site-wide values or user-specific values with unique keys. However synchronizing caches across multiple web servers can be difficult. Out of process session state will stay synchronized because it is stored in a single location (database or a state server).Of course there are many 3rd party caching alternatives with various options to keep them synchronized.Regardless of where the count is temporarily stored I'm of the opinion that shopping carts themselves should be stored in the database so that users have the option to return later and continue where they left off.PerformanceIf you use out of process session state (e.g. in a load balanced environment and/or to make session more durable) it will hit a database or call an out of process service but the call is relatively cheap unless you are serializing large object graphs.Session is loaded once per request. Subsequent read access is very fast.Writing to session can be detrimental to performance even when there is no load. Why? most modern applications use asynchronous calls and when multiple async calls hit an HTTP handler (page controller etc) that reads/writes session ASP.Net will lock the session to serialize access. To avoid this you can decorate your controllers with [SessionState( SessionStateBehavior.ReadOnly )]Design  Now I have successfully accomplished this task by assigning the value  to a Session variable which is retrieved from my _layout view;This seems like mixing concerns i.e. having the view aware of the underlying storage mechanism. From a purist standpoint I would set this value on a view model or at least put it in the ViewBag. From a practical standpoint one or two values retrieved in this manner probably won't hurt anything but beware of letting it grow much further.  I read somewhere the use of MVC filters in tandem with the Global.ascx  application start section as well but this does not seem appropriate  for variables set at the controller level as much as perhaps static  variables.Static variables have perfectly legitimate uses but you must understand them thoroughly or risk serious problems.See my answers pertaining to static variables in ASP.Net:does aspx provide special treatment for c# static variablesStatic fields vs Session variables
cassette bundles vs mvc4 bundles,i am currently working prototype asp.net mvc 3 solution used base several project rewrites from web forms one goals i have implement some script management across application opposed none we currently have.mvc 3 has flaw imho you need specific script specified partial view template view you might end up either losing control over where script block located rendered html having specify every single dependent javascript file parent view.i have been seriously considering using http getcassette.net framework resolve described issue however last release mvc4 beta made me doubt myself again mvc bundles look really similar cassette bundles i am confused again should i implement cassette now than migrate mvc4 bundles should i implement some simplified script manager myself sth like scripts helper class mvc4 preview migrate mvc4or should i integrate cassette project hope more future proof than mvc imlementation i really don't like option right now just because sheer number dependencies cassette comes i have experience cassette itself find really hard make comparison myself would appreciate any answers hints.edit i just figured another option installing beta nuget package mvc bundling https nuget.org packages microsoft.web.optimizationconclusion more i look mvc4 bundle implementation bigger difference i notice mvc4 bundles do address mvc3 issue described above just do bundling amp minification moreover cassette just capable rendering script tags specific place also capable ordering them correct order which trivial.so moment i am satisfied either solutions i try come up my own minimalistic implementation hoping situation improve future.but you afraid adding 5 dependencies bunch web.config changes your project go cassette i hope updated some point utilize mvc bundling inside reduce functionality duplication hopefully become more modular.update version 2.0 cassette longer necessary include coffee script other features cassette you just need bundles js dependency resolution so point cassette clear winner me,I ended up using Cassette on my last project and it's working pretty well. There's really not a whole lot of configuration to it if you use NuGet so my thinking is that it wouldn't be too hard to use Cassette now and then switch later if you wanted to.One other thing to consider is that Cassette does Less compiling. I'm not sure if the MVC4 bundling does that or not since I haven't had time to read up on it.
iisexpress crashes 0xc0000008 error,occasionally when running my mvc4 site vs2012 using iisexpress i get following error iisexpress stops iisexpress.exe managed v4.0.30319 has exited code 1073741816 0xc0000008 invalid handle specifiedthere nothing event log i cant find anything interweb i have some very vague theories my site using mef loads modules dynamically startup maybethere occasional race condition so iis cant open assemblybut my trace logs show iis beyond part startupcycle also has signalr apart from starting hub notdoing much yet signalr pretty new unproven i've updatedthe latest rc2 version same result.oh i also had same error when using vs dev web server i havent tried full iis yet.anyone else go clue thanksupdate i fixed couple nuget references which seemed stabalize things bit morning happened again vs output window shows iisexpress.exe managed v4.0.30319 loaded c windows microsoft.net assembly gac msil system.web.mobile v4.0_4.0.0.0 b03f5f7f11d50a3a system.web.mobile.dll skipped loading symbols module optimized debugger option just my code enabled iisexpress.exe managed v4.0.30319 loaded c users peter.jones appdata local temp temporary asp.net files root a4aa93f7 dfa23a50 app web rpzlbjhw.dll symbols loaded iisexpress.exe managed v4.0.30319 loaded c users peter.jones appdata local temp temporary asp.net files root a4aa93f7 dfa23a50 app web_c1rjct4s.dll symbols loaded.the program 11072 iisexpress.exe managed v4.0.30319 has exited code 1073741816 0xc0000008 invalid handle specified some more useful logging somewhere i happily provide it.cheers,Enable Failed Request trace logging in IIS to capture errorslink hereand you can get more information about the thread on IIS forumsGood luck!
using html.displaynamefor pagedlist,i've been trying out pagedlist package get paging my index views everything going well controller level everything working fine only displays 5 records per page displays appropriate page based querystring my problem view i changed model pagedlist.ipagedlist so i could access model.hasnextpage other properties now html.displaynamefor model gt model.itemname longer working i get error pagedlist.ipagedlist lt dossier.models.item gt does contain definition itemname extension method itemname accepting first argument type pagedlist.ipagedlist lt dossier.models.item gt could found you missing using directive assembly reference here relevant parts view model pagedlist.ipagedlist lt dossier.models.item gt using dossiermodelsitem lt th&gt html.displaynamefor model gt model.itemname lt th&gt seems ipagedlist compatible displaynamefor any idea why happening how i could fix i know i could just manually enter column names i'd like information stay changeable model later,As an alternate solution to the accepted answer remember that IPagedList inherits from IEnumerable. That means that you could write:@model IEnumerable&lt;Dossier.Models.Item&gt;At the beginning of the page and just cast the model to IPagedList when needed:@Html.PagedListPager((IPagedList)Model page =&gt; Url.Action("Index" new { page = page }))You can even declare the casted variable in the header in order to use it multiple times within the page:@{ViewBag.Title = "My page title";var pagedlist = (IPagedList)Model;}This would allow you to use the DisplayNameFor helper method and access all PagedList methods/properties without the need for dummy elements nor calling .FirstOrDefault() for each field.
why my style bundles rendering correctly asp.net mvc 4,so i am new asp.net mvc 4 well i used 3 little anyway my bundleconfig.cs file i am trying load twitter bootstrap css files additional site.css file.but only site.css file rendered i have confirmed bootstrap css files indeed right place content folder same location site.cssbundles.add new stylebundle content css include content bootstrap.min.css content bootstrap responsive.min.css content site.css editok isn't my preferred way andrei drynov recommended i try import url bootstrap.min.css body background e8e6da padding top 60px padding bottom 40px import url bootstrap responsive.min.css doesn't work i changed site.css above now background body color doesn't even work i remove imports background correct color.edit 2i don't get adding bundles.ignorelist.clear my bundles file fixed hmmm sure i understand i able remove imports out sitecssstrange,Just to let anybody else know who cant find a working solution easily in this long thread I had the exact same issue and i solved it in the same way as suggested in edits found at the bottom of the actual question!I started a new project MVC4 Web Application created routes for bootstrap bundles in the exact same code shown above:bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/bootstrap.min.css""~/Content/bootstrap-responsive.min.css""~/Content/site.css"));But due to unknown reasons it was not loading.. Finally i gave up and decided to google it and found this page.I tried adding the following as the first line in BundleConfig.cs file. Recompiled and everything started working and now the styles were correctly being loaded now.bundles.IgnoreList.Clear();Maybe this helps somebody.
proper json serialization mvc 4,i'd like have json properly serialized camelcase ability change date formats necessary web api very easy global.asax i execute following codevar json globalconfiguration.configuration.formatters.jsonformatter json.serializersettings.contractresolver new camelcasepropertynamescontractresolver code pipeline level handles serialization way i'd like i would like accomplish same thing mvc 4 have any json returned from controller action methods serialized properly little searching i found following code throw global.asax application startup httpconfiguration config globalconfiguration.configuration int32 index config.formatters.indexof config.formatters.jsonformatter config.formatters index new jsonmediatypeformatter serializersettings new jsonserializersettings contractresolver new camelcasepropertynamescontractresolver seems execute fine when i return json from controller all pascalcased simple example my action method private jsonresult getjsontest var returndata datalayer.getsomeobject return json returndata jsonrequestbehavior.allowget am i going about wrong any idea how accomplish pipeline level,While Web API uses JSON.NET MVC4 uses by default the JavaScriptSerializer and I dont think it supports changing to Camel Case serialization. Check this: Setting the Default JSON Serializer in ASP.NET MVCMy suggestion is that you create a custom JsonNetResult as described here Using JSON.NET as the default JSON serializer in ASP.NET MVC 3 - is it possible? and change the last line to:var serializedObject = JsonConvert.SerializeObject(  Data  Formatting.Indented   new JsonSerializerSettings { MappingResolver = new CamelCaseMappingResolver() });
make asp.net bundling specify media screen css bundle,i'm just trying out asp.net 4.5 bundling minification ran issue.i ve got around 10 css files which 2 were originally referenced layout using attribute media screen since syntax adding css bundle does let you specify attribute should added makes sense since attribute would apply whole bundle i hoping see overload styles.render would allow me specify html attributes like other html helpers none ugly solution which since i know url bundle created i could just craft tag myself i'd lose caching mechanism handled asp.net allowing render tag itself.is way do am i missing something just oversight design team,Well it's an ugly hack but hopefully the team will add a built-in way to do it in the next release.This is how I solved it maintaining the caching string and still being able to add the media attribute to the tag.@{var cssMediaBundleUrl = BundleTable.Bundles.ResolveBundleUrl("~/stylesheets/mediacss" true);}&lt;link href="@cssMediaBundleUrl" rel="stylesheet" type="text/css" media="screen" /&gt;Guess I can turn this into an Html helper will do that later and edit.
how get dropdownlist selectedvalue controller mvc,i have dropdownlist which i have filled from database now i need get selected value controller do some manipulation getting idea code which i have tried.modelpublic class mobileviewmodel public list&lt tbinsertmobile&gt mobilelist public selectlist vendor get set controller public actionresult showallmobiledetails mobileviewmodel mv new mobileviewmodel mv.mobilelist db.usp insertupdatedelete null null 4 mergeoption.appendonly tolist mv.vendor new selectlist db.usp vendorlist vendorid vendorname return view mv httppost public actionresult showallmobiledetails mobileviewmodel mv string strddlvalue here i need dropdownlist valuereturn view mv view lt table&gt lt tr&gt lt td&gt mobile manufacured&lt td&gt lt td&gt html.dropdownlist ddlvendor model.vendor select manufacurer lt td&gt lt tr&gt lt tr&gt lt td&gt lt td&gt lt td&gt lt input id submit1 type submit value search gt lt td&gt lt tr&gt lt table&gt,ModelVery basic model with Gender field. GetGenderSelectItems() returns select items needed to populate DropDownList.public enum Gender {Male Female}public class MyModel{public Gender Gender { get; set; }public static IEnumerable&lt;SelectListItem&gt; GetGenderSelectItems(){yield return new SelectListItem { Text = "Male" Value = "Male" };yield return new SelectListItem { Text = "Female" Value = "Female" };}}ViewPlease make sure you wrapped your @Html.DropDownListFor in a form tag.@model MyModel@using (Html.BeginForm("MyController" "MyAction" FormMethod.Post){   @Html.DropDownListFor(m =&gt; m.Gender MyModel.GetGenderSelectItems())   &lt;input type="submit" value="Send" /&gt;}ControllerYour .cshtml Razor view name should be the same as controller action name and folder name should match controller name e.g Views\MyController\MyAction.cshtml.public class MyController : Controller {public ActionResult MyAction(){// shows your form when you load the pagereturn View();}[HttpPost]public ActionResult MyAction(MyModel model){// the value is received in the controller.var selectedGender = model.Gender;return View(model);}}Going furtherNow let's make it strongly-typed and enum independent:var genderSelectItems = Enum.GetValues(typeof(Gender)).Cast&lt;string&gt;().Select(genderString =&gt; new SelectListItem {Text = genderStringValue = genderString}).AsEnumerable();
mvc parameters dictionary contains null entry parameter 39 k 39 non nullable type 39 system.int32 39,i am new mvc my application i'm retrieving data from mydatabase when i run my application show error like thisthis my url http localhost 7317/employee detailsdata/4 exception details system.argumentexception parameters dictionary contains null entry parameter k non nullable type system.int32 method system.web.mvc.actionresult detailsdata int32 mvcviewdemo.controllers.employeecontroller optional parameter must reference type nullable type declared optional parameter.parameter name parametersthis my web.config file code&lt connectionstrings&gt lt add name employeecontext connectionstring server database mytry integrated security true providername system.data.sqlclient gt lt connectionstrings&gt my employee model class employee.cs table emp map tablename our class name public class employee public int empid get set public string name get set public string gender get set public string city get set my employeecontext.cs model class public class employeecontext dbcontext public dbset&lt employee&gt employees get set my employeecontroller.cs public actionresult detailsdata int k employeecontext ec new employeecontext employee emp ec.employees.single x gt x.empid k return view emp my view lt h2 gt detailsdata&lt h2 gt model.name lt br gt model.city lt br gt model.gender lt br gt model.empid,It seems that your action needs k but ModelBinder can not find it (from form or request or view data or ..) Change your action to this:public ActionResult DetailsData(int? k){EmployeeContext Ec = new EmployeeContext();if (k != null){   Employee emp = Ec.Employees.Single(X =&gt; X.EmpId == k.Value);   return View(emp);}return View();}
api controller declaring more than one get statement,using new api controller mvc4 i've found problem i have following methods public ienumberable&lt string&gt getall public ienumberable&lt string&gt getspecific int i work however i want retrieve some different data different type defaults getall method even though getjson set getallintegers method public ienumberable&lt int&gt getallintergers bad naming conventions possible me able do can i only have single getall method web api controller i think easier visualise what i'm trying achieve here snippet code show what i'd like able do single apicontroller public ienumerable&lt string&gt getclients get data public ienumerable&lt string&gt getclient int id get data public ienumerable&lt string&gt getstaffmember int id get data public ienumerable&lt string&gt getstaffmembers get data,In case someone else faces this problem. Here's how I solved this. Use the [Route] attribute on your controller to route to a specific url.[Route("api/getClient")]public ClientViewModel GetClient(int id)[Route("api/getAllClients")]public IEnumerable&lt;ClientViewModel&gt; GetClients()
difference between webapiconfig.cs routeconfig.cs,what difference between webapiconfig.cs routeconfig.cs app start folder mvc web api project visual studio 2012,There is no difference as they both accomplish the same thing - adding routes to your route collection. You don't need to use the WebApiConfig class; it's simply a convenient way to organize your code.
why scripts styles commands recognized mvc4 razor layout file,following mvc4 razor layout file loads several script css bundles created bundleconfig lt doctype html&gt lt html class js lang en gt lt head&gt lt meta charset utf-8 gt lt title&gt xxx beta&lt title&gt scripts.render bundles bundle jquery bundles bundle modernizr bundles bundle foundation bundles bundle jhs styles.render content bundle foundation content bundle jhs rendersection pageheadcontent false lt head&gt lt body&gt lt div id bodycontainer gt html.partial partial header lt div id contentcontainer gt lt div id maincontentcontainer gt lt div id sidebarcontainer gt rendersection sidebarcontent required true lt div&gt renderbody lt div&gt lt div class clearboth gt lt div&gt lt div&gt html.partial partial footer lt div&gt lt body&gt lt html&gt when page rendered following error occurs some reason scripts styles commands being recognized i type scripts files intellisense does display show command project does reference system.web.optimization which used bundle.config.what could causing scripts styles commands recognized server error application.compilation errordescription error occurred during compilation resource required service request please review following specific error details modify your source code appropriately compiler error message cs0103 name scripts does exist current contextsource error line 4 line 5 xxx betaline 6 scripts.render line 7 bundles bundle jquery line 8 bundles bundle modernizr source file c users username documents visual studio 2010 projects xxx solution xxx.website views shared sidebarlayout.cshtmlline 6 show detailed compiler output show complete compilation source version information microsoft net framework version 4.0.30319 asp.net version 4.0.30319.272,If you are using bundles (as in the example in question) you may also need to add bundle configuration to your app:Add Bundle Config to your App_Start folder:public class BundleConfig{public static void RegisterBundles(BundleCollection bundles){bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-{version}.js"));bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include("~/Scripts/jquery.validate.js""~/Scripts/jquery.validate.unobtrusive.js"));bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/YourStyles.css"));#if DEBUGBundleTable.EnableOptimizations = false;#elseBundleTable.EnableOptimizations = true;#endif}}Add the following line to your Global.asax.csBundleConfig.RegisterBundles(BundleTable.Bundles);
calling another different view from controller using asp.net mvc 4,i have view index.cshtml submit button when submit button clicked calls action action01 within controller testcontroller.cs so end action i want return caller index.cshtml view custom view model parameter how do i do results after first attempt using view viewname model error raised action within controller test so returning searching views tests index my index page views home index.the view index its master found view engine supports searched locations following locations were searched views test index.aspx views test index.ascx views shared index.aspx views shared index.ascx views test index.cshtml views test index.vbhtml views shared index.cshtml views shared index.vbhtmlfinal solution i have used return view viewname model i have changed my directories structure problem,To return a different view you can specify the name of the view you want to return and model as follows:return View("ViewName" yourModel);if the view is in different folder under Views folder then use below absolute path:return View("~/Views/FolderName/ViewName.aspx");
mvc form able post list objects,so i have mvc asp.net app having issues essentially i have view contains form its contents bound list objects within loop loads partialview items being looped over now everything works up till submittion form when gets submitted controller sent null list objects code below demonstates problems parent view model ienumerable&lt plancompareviewmodel&gt using html.beginform compareplans plans formmethod.post new id compareform lt div&gt foreach var planvm model html.partial partialview planvm lt div&gt partialview model plancompareviewmodel&lt div&gt html.hiddenfor p gt p.planid html.hiddenfor p gt p.currentplan html.checkboxfor p gt p.shouldcompare lt input type submit value compare gt lt div&gt classes above code planviewmodel public class planscompareviewmodel public int planid get set public plan currentplan get set public bool shouldcompare get set public planscompareviewmodel plan plan shouldcompare false planid plan.planid currentplan plan public planscompareviewmodel todo complete member initialization public static ienumerable&lt planscompareviewmodel&gt createplansvm ienumerable&lt plan&gt plans return plans.select p gt new planscompareviewmodel p asenumerable controller public class planscontroller mybasecontroller httppost public actionresult compareplans ienumerable&lt plancompareviewmodel&gt model model passed here null problem controller action far i am aware should posting enumerable list plancompareviewmodels yet null when inspect post data being sent sending correct params i were change ienumerable formcollection contains correct values can anyone see why binder creating correct object i can get around using javascript defeats purpose any help would greatly appreciated,Please read this: http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspxYou should set indicies for your html elements "name" attributes like planCompareViewModel[0].PlanId planCompareViewModel[1].PlanId to make binder able to parse them into IEnumerable.Instead of @foreach (var planVM in Model) use for loop and render names with indexes.
dataset does support system.nullable lt gt export,i trying generate report using export excell pdf textfile well i am doing mvc i have class which i named spbatch which exact name my stored procedure my sql contains following public string batchno get set public string providername get set public nullable&lt system.int32 gt noofclaims get set public nullable&lt system.int32 gt totalnoofclaims get set public nullable&lt system.decimal gt totalbilled get set public nullable&lt system.decimal gt totalinputtedbill get set public nullable&lt system.datetime gt datecreated get set public nullable&lt system.datetime gt datesubmitted get set public nullable&lt system.datetime gt duedate get set public string status get set public string refno get set public string batchstatus get set public string claimtype get set you can see some my columns declared nullable went smoothly from searching displaying results table i have several buttons below which image buttons export every time i try export excel i always get problem dataset does support system.nullable lt part my code foreach memberinfo mi miarray mi.membertype membertypes.property propertyinfo pi mi propertyinfo dt.columns.add pi.name pi.propertytype where error pop up else mi.membertype membertypes.field fieldinfo fi mi fieldinfo dt.columns.add fi.name fi.fieldtype error shows up one comment can you help me what do i tried adding dbnull my code still i get same error i tried removing nullable my spbatch i get error some tables need declared nullable what should i do,Thanks to a C# version of a generating a datatable and some hacking around I can offer this answer in VB - I put it on here because I've just had a lot of hassle wanting to get a filterable dataset from a stored proc whilst using a simple datalayer. I hope it helps someone else!Note: The use case is where you wish to use BindingSource.Filter = "some query string":Imports System.ReflectionPublic Module Extenders&lt;System.Runtime.CompilerServices.Extension&gt;Public Function ToDataTable(Of T)(collection As IEnumerable(Of T) tableName As String) As DataTableDim tbl As DataTable = ToDataTable(collection)tbl.TableName = tableNameReturn tblEnd Function&lt;System.Runtime.CompilerServices.Extension&gt;Public Function ToDataTable(Of T)(collection As IEnumerable(Of T)) As DataTableDim dt As New DataTable()Dim tt As Type = GetType(T)Dim pia As PropertyInfo() = tt.GetProperties()'Create the columns in the DataTableFor Each pi As PropertyInfo In piaDim a = If(Nullable.GetUnderlyingType(pi.PropertyType) pi.PropertyType)dt.Columns.Add(pi.Name If(Nullable.GetUnderlyingType(pi.PropertyType) pi.PropertyType))Next'Populate the tableFor Each item As T In collectionDim dr As DataRow = dt.NewRow()dr.BeginEdit()For Each pi As PropertyInfo In piadr(pi.Name) = If(Nullable.GetUnderlyingType(pi.PropertyType) Is GetType(DateTime) DBNull.Value pi.GetValue(item Nothing))Nextdr.EndEdit()dt.Rows.Add(dr)NextReturn dtEnd FunctionEnd Module
expression type 39 system.web.mvc.mvcwebrazorhostfactory 39 cannot used return type 39 system.web.webpages.razor.webrazorhostfactory 39,i am getting error when i try run project i took over i assume i have problem my web.config i don't know what look expression type system.web.mvc.mvcwebrazorhostfactory cannot used return type system.web.webpages.razor.webrazorhostfactory any suggestions same highly appreciated,Set MvcWebRazorHostFactory to version 5.0.0.0 in ALL Views/web.configUnder&lt;system.web.webPages.razor&gt;&lt;host factoryType="System.Web.Mvc.MvcWebRazorHostFactory System.Web.Mvc Version=5.0.0.0 Culture=neutral PublicKeyToken=31BF3856AD364E35" /&gt;
mvc 4 beta side side installation error,i just installed mvc 4 beta now my mvc 3 application does compile following error type system.web.mvc.modelclientvalidationrule exists both c program files x86 microsoft asp.net asp.net mvc 3 assemblies system.web.mvc.dll c program files x86 microsoft asp.net asp.net web pages v2.0 assemblies system.web.webpages.dll c users michaeljo documents src patientgive phc.mvc infrastructure passwordstrengthattribute.csit would appear has been moved different assembly since both assemblies gac does know which use,Ok try this solution...In the root Web.config file add a new entry with the key webPages:Version and the value 1.0.0.0.&lt;appSettings&gt;&lt;add key="webpages:Version" value="1.0.0.0"/&gt;&lt;add key="webpages:Version" value="1.0.0.0"/&gt;&lt;add key="ClientValidationEnabled" value="true"/&gt;&lt;add key="UnobtrusiveJavaScriptEnabled" value="true"/&gt;&lt;/appSettings&gt;2.In Solution Explorer right-click the project name and then select Unload Project. Then right-click the name again and select Edit ProjectName.csproj.3.Locate the following assembly references:&lt;Reference Include="System.Web.WebPages"/&gt;&lt;Reference Include="System.Web.Helpers" /&gt;Replace them with the following:&lt;Reference Include="System.Web.WebPages Version=1.0.0.0Culture=neutral PublicKeyToken=31bf3856ad364e35 processorArchitecture=MSIL "/&gt;&lt;Reference Include="System.Web.Helpers Version=1.0.0.0Culture=neutral PublicKeyToken=31bf3856ad364e35 processorArchitecture=MSIL "/&gt;4.Save the changes close the project (.csproj) file you were editing and then right-click the project and select Reload.REFERENCEalso try thisI Found this answer here for me the second edit combined with the first solved the problem. 
anti forgery cookie token form field token do match mvc 4,i'm using default login module asp.net mvc 4 i did change any code default application i hosted shared server.after i logged using default login page i kept browser idle some time obviously application redirected login page when i try perform any controller action authorize attribute.then i try login again gives error when i click login button.the anti forgery cookie token form field token do match.login action post account login httppost allowanonymous validateantiforgerytoken public actionresult login loginmodel model string returnurl modelstate.isvalid amp amp websecurity.login model.username model.password persistcookie model.rememberme return redirecttolocal returnurl we got far something failed redisplay formmodelstate.addmodelerror user name password provided incorrect return view model,Another reason for having this error is if you are jumping between [Authorize] areas that are not cached by the browser (this would be done on purpose in order to block users from seeing protected content when they sign out and using the back button for example).If that's case you can make your actions non cached so if someone click the back button and ended up on a form with @Html.AntiForgeryToken() the token will not be cached from before.See this post for how to add [NoCache] ActionFilterAttribute: How to handle form submission ASP.NET MVC Back button?
issue global.asax.cs page mvc4,i my asp.net mvc 4 project my global.asax.cs page shows error webapiconfig.register globalconfiguration.configuration name globalconfiguration does exist current contexti have done many controllers views all how can i solve issue recover my project here rest my code contextusing system using system.collections.generic using system.linq using system.web using system.web.http using system.web.mvc using system.web.routing namespace note instructions enabling iis6 iis7 classic mode visit http go.microsoft.com linkid 9394801public class mvcapplication system.web.httpapplication protected void application start arearegistration.registerallareas webapiconfig.register globalconfiguration.configuration filterconfig.registerglobalfilters globalfilters.filters routeconfig.registerroutes routetable.routes,With .NET Framework 4.5.1 GlobalConfiguration is found in System.Web.Http:PM&gt; Install-Package Microsoft.AspNet.WebApi.WebHost
adding x frame options header all pages mvc 4 application,i am trying add x frame options header value set deny my mvc 4 application i looked around seems cleanest way add all pages.however when i add code build error onresultexecuting suitable method found override public class xframeoptions actionfilterattribute public override void onresultexecuting system.web.mvc.resultexecutingcontext filtercontext filtercontext.httpcontext.response.addheader x frame options deny cleanest way do how can i resolve error better way handle mvc 4 application,There's no need for a custom HttpModule or ActionFilter if you need it for every page.  https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options details a much simpler solution:To configure IIS to send the X-Frame-Options header add this your site's Web.config file:&lt;system.webServer&gt;  ...  &lt;httpProtocol&gt;&lt;customHeaders&gt;  &lt;add name="X-Frame-Options" value="SAMEORIGIN" /&gt;&lt;/customHeaders&gt;  &lt;/httpProtocol&gt;  ...&lt;/system.webServer&gt;
how add image svg container using d3.js,i've created sample asp.net mvc 4 application where i've used d3.js append svg element inside svg i've appended text element see code below all works fine until i try append img svg using local png file img gets appended dom img rendered page any ideas what i'm doing wrong here how go about fixing viewbag.title home page lt script src scripts/d3.v3 js gt lt script&gt lt script type text javascript gt var svg d3.select body append svg attr width 200 attr height 100 style border 1px solid black var text svg.selectall text data 0 enter append text text testing attr x 40 attr y 60 var imgs svg.selectall img data 0 imgs.enter append img attr xlink href url.content content images icons refresh.png attr x 60 attr y 60 attr width 20 attr height 20 lt script&gt richard marr below attempt do same thing straight html which gives me same result i'm sure about my code get refresh.png file from local drive way lt doctype html&gt lt html lang en gt lt head&gt lt meta charset utf-8 gt lt script src http d3js.org/d3.v2 js gt lt script&gt lt head&gt lt body&gt lt script type text javascript gt var svg d3.select body append svg attr width 200 attr height 100 style border 1px solid black var text svg.selectall text data 0 enter append text text testing attr x 40 attr y 60 var imgs svg.selectall img data 0 imgs.enter append svg img attr xlink href file d d3js_projects refresh.png attr x 60 attr y 60 attr width 20 attr height 20 lt script&gt lt body&gt lt html&gt,nodeEnter.append("svg:image").attr('x' -9).attr('y' -12).attr('width' 20).attr('height' 24).attr("xlink:href" "resources/images/check.png")
how create custom additional fields userprofile mvc4,i faced new asp mvc 4 feature shipped new membership db schema new initialization mvc 3 old versions developer able create custom user profile fields using specifications web.config now i faced method filters namespace default mvc 4 project websecurity.initializedatabaseconnection defaultconnection userprofile userid username autocreatetables true user profile table table userprofile public class userprofile key databasegeneratedattribute databasegeneratedoption.identity public int userid get set public string username get set method initializedatabaseconnection generate only username userid i need generate other additional fields.i have good experience ef codefirst approach case i try edit userprofile class table userprofile public class userprofile key databasegeneratedattribute databasegeneratedoption.identity public int userid get set column required public string username get set column required public string firstname get set column required public string lastname get set when i regenerate database i havent see any changes custom db fields generated.help me please how can i create custom user fields,Non-destructive version based on IMLiviu's answer and comments:Just came across this one problem and had to unknot the correct way to do it from the answer + comments (+ trial and error) so thought I would share the results you can cut &amp; paste. This is based on the answer by IMLiviu so full credit to them. It modifies the existing UserProfile and UserContext classes as they appear directly compatible with EF as-is:I was horrified to see a suggestion that involved completely removing a database just to add a few tables so after reading all the comments and creating a prototype here's the result.1 - Stop Webmatrix creationStop the standard webmatrix creation of the membership tables (comment out the [InitializeSimpleMembership] attribute).[Authorize]//[InitializeSimpleMembership]public class AccountController : Controller2 - Create a migration configurationCreate a migration configuration class like the one below:public class MigrationConfiguration : DbMigrationsConfiguration&lt;UsersContext&gt; {public MigrationConfiguration(){this.AutomaticMigrationsEnabled = true;  // This is important as it will fail in some environments (like Azure) by default}protected override void Seed(UsersContext context){WebSecurity.InitializeDatabaseConnection("DefaultConnection" "UserProfile" "UserId" "UserName" autoCreateTables: true);}}3 - Remove pluralisation from EF creationChange the AccountModel.cs file UsersContext class to remove the pluralisation option (added the OnModelCreating event):public class UsersContext : DbContext{public UsersContext() : base("DefaultConnection"){}public DbSet&lt;UserProfile&gt; UserProfiles { get; set; }protected override void OnModelCreating(DbModelBuilder modelBuilder){base.OnModelCreating(modelBuilder);modelBuilder.Conventions.Remove&lt;PluralizingTableNameConvention&gt;();}}4 - Add new fields to UserProfileAdd the extra fields you need to UserProfile:[Table("UserProfile")]public class UserProfile{[Key][DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]public int UserId { get; set; }public string UserName { get; set; }public string UserEmail { get; set; }  // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; E.G. THIS ADDED}5 - Migrate the tables on app startNow when the app starts you set the database init strategy and trigger it with a read:protected void Application_Start(){AreaRegistration.RegisterAllAreas();WebApiConfig.Register(GlobalConfiguration.Configuration);FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);RouteConfig.RegisterRoutes(RouteTable.Routes);BundleConfig.RegisterBundles(BundleTable.Bundles);AuthConfig.RegisterAuth();Database.SetInitializer(new MigrateDatabaseToLatestVersion&lt;UsersContext MigrationConfiguration&gt;());new UsersContext().UserProfiles.Find(1);}Obviously you will need to add various using statements to get this all to work but the right click resolve option will do that for you.Additional notes:If you decide (as I did) to use a table other than UserProfile for your users you need to change several entries to match.In your SimpleMembershipInitializer class you need to reference the new table and column namesIn the account controller and the various Login and Register views you need to reference your new model fields (if the names have changed)In the UsersContext class you can leave the Userprofile classname as-is but you need to change the Table attribute to match your table name.In the UserProfile class you need to rename the fields to match your new table field names.In the database you need to remove the relationship between webpages_UsersInRoles and UserProfile and add a relationship between your new user table and webpages_UsersInRoles or the old referential integrity checks will break you at run-time.(I strongly recommend you delete the existing UserProfile table and check it is not recreated. if it is you have something left behind in your code).
what 39 s difference between wcf web api asp.net web api,i've done bit work past using wcf webapi really liked lot its features i'm just playing asp.net web api moment seems completely different ie completely removed from wcf does anyone know which features wcf webapi included asp.net 4 web api,From what I've learned Microsoft did a little bit of naming confusion here.I'm assuming you know what WCF is all about this big framework built on top of XML to allow user to build distributed services with a wide variety of technologies (from SOAP to REST to MSMQ etc.).It's hard as hell to use (for me at least) and requires a lot of bootstrap to have it working and eventually they realized this and started providing some default configuration for simple http services (WCF REST starter kit anyone?). ASP.NET MVC was gaining momentum and some of the features it provided (automatic arguments matching for example) started to show up in WCF.Now that's the situation:  Announcement: WCF Web API is now ASP.NET Web API! ASP.NET Web API  released with ASP.NET MVC 4 Beta. The WCF Web API and WCF support for  jQuery content on this site wll removed by the end of 2012.http://wcf.codeplex.com/wikipage?title=Getting%20started:%20Building%20a%20simple%20web%20apiAnd that's better imho.I'm quite sure it should be possible to host asp.net mvc4 webapi on top of WCF (if you ever need that) but i can't find documentation that can prove me right (or wrong).UPDATE (can't fit as comment):Wait there is a huge different between "moving a subset of communication technology from a library/framework to another" and "replace WCF". I personally think that WCF was designed for some kind of communication concept and it has a rather cool design but the distributed computing is somewhat moving on to new (and simpler) solutions (look the feature-rich SOAP vs the lean e flexible REST although many people still use REST in a RPC manner) and i think that this kind of programming patterns better fit into the MVC architecture than the WCF one. Effort was put on designing some simple way of building/consuming web services on top of WCF but they eventually found out that it was not the right solution.Not to mention that many developers now use ASP.NET MVC and want to do rest web services for their web app messing with WCF is often overkill for these kind of things and I've experienced that on my own skin.I think that the routing mechanism is awesome and the right way to go and if you look closely they included part of it (with different names and types but the pattern was there) in WCF. So yeah i think that if MS don't dismiss that part of WCF WE should do  it. To strictly answer no i don't think you'll ever find WebGet/WebInvoke in asp.net mvc* it just don't fit in.Yeah self-host is probably the only bit of WCF contained in ASP.NET MVC4 right now.
can we run sql script using code first migrations,can we run sql script using code first migrations i am new code first i want save my changes sql script file before update database command migration possible possible please provide steps get done also script generated possible i can run script using migration,First you need to create a migration.Add-Migration RunSqlScriptThen in the generated migration file you can write your SQL.// PLAIN SQLSql("UPDATE dbo.Table SET Created = GETDATE()");// FROM FILEvar sqlFile = Path.Combine(AppDomain.CurrentDomain.BaseDirectory @"Custom.sql"); Sql(File.ReadAllText(sqlFile));Then you runUpdate-Database
how correctly use html.actionlink asp.net mvc 4 areas,i recently discovered areas asp.net mvc 4 which i have successfully implemented i'm running troubles html.actionlink helper my razor views url helper generates always seems relative url current page.i have my web site configured iis 7 win7 application virtual directory foo.i have two areas registered admin blogs i have default code adminarearegistration.cs blogsarearegistration.cs files i added namespaces new mvcproject.controllers defaults default routeconfig public class routeconfig public static void registerroutes routecollection routes routes.ignoreroute resource axd pathinfo routes.maproute name default url controller action id defaults new controller home action index id urlparameter.optionalnamespaces new mvcproject.controllers when i go home page my site http localhost foo correctly loads home page my site point all action links have correct urls.sample code from mvcproject views shared layout.cshtml lt h2 gt main navigation&lt h2 gt lt ul&gt lt li&gt html.actionlink home index home lt li&gt lt li&gt html.actionlink blogs index blogs home lt li&gt lt li&gt html.actionlink admin index admin home lt li&gt lt ul&gt correctly rendering html lt h2 gt main navigation&lt h2 gt lt ul&gt lt li&gt lt href foo gt home&lt a&gt lt li&gt lt li&gt lt href foo blogs home gt lt li&gt lt li&gt lt href foo admin home gt lt li&gt lt ul&gt when i navigate browser blogs instance url correctly loads browser foo blogs home.now links my main navigation change urls lt h2 gt main navigation&lt h2 gt lt ul&gt lt li&gt lt href foo blogs home gt home&lt a&gt lt li&gt lt li&gt lt href foo blogs blogs home gt lt li&gt lt li&gt lt href foo blogs admin home gt lt li&gt lt ul&gt notice blogs appended iis virtual directory name so foo blogs home now foo blogs blogs home.the controllers views rendering fine just calls html.actionlink my mvcproject views shared layout.cshtml view working i expected.it feels like i'm missing something trivial amount searching has come up answer every blog post tutorial i've found implementing areas asp.net mvc4 makes mention changes how html.actionlink behaves,How I redirect to an area is add it as a parameter@Html.Action("Action" "Controller" new { area = "AreaName" })for the href portion of a link I use@Url.Action("Action" "Controller" new { area = "AreaName" })
how fake dbcontext.entry method entity framework repository pattern,because i want unit test my code i have implemented repository pattern my mvc4 application i managed make context interface fake context use fake implementation system.data.entity.dbset following code.unfortunately just like two posters before me here here i do manage mock dbcontext.entry method i use method updating database entries my code follows dbcontext.entry order state entitystate.modified i have found solution problem only people who say things like what point unit testing code you fake find method you fake dbentityentry real logic test read all linked questions before you continue you want test your repositories create integration tests talking real database.that all good well still answer question i read critique i still do want entry method so i able use fake context use mock objects my unit test course i use integration tests well nearly fast some quick unit tests error i receive when i try some implementations error 2 project.models.order does contain definition state extension method state accepting first argument type whatever return type i use could found you missing using directive assembly reference i hope someone can help me make fake dbcontext.entry method,To get around this I added a method overload and added an obsolete attribute to see where the original method was being called.public virtual void Entry&lt;TEntity&gt;(TEntity entity Action&lt;DbEntityEntry&lt;TEntity&gt;&gt; action) where TEntity : class{action(base.Entry(entity));}[Obsolete("Use overload for unit tests.")]public new DbEntityEntry&lt;TEntity&gt; Entry&lt;TEntity&gt;(TEntity entity) where TEntity : class{return base.Entry(entity);/** or **/throw new ApplicationException("Use overload for unit tests.");}then you can DbContext.Entry(order ent =&gt; ent.State = EntityState.Modified;
upgrading project mvc 5,i have been looking solution upgrade current mvc 4 app i have use new mvc 5 binaries i cannot find solution anywhere anyone have any ideas,Visual Studio 2013 will automatically upgrade a project simply by allowing the Nuget Package Manager to run Updates.Steps:In Visual Studio 2013 open the project and right click on the project name to open the Properties window.  Change the Target Framework to at least 4.5.  Then on the project right click on the References item and select Manage NuGet Packages.  On the right side of the window select "Updates" and underneath select "All".  This should begin a search for all packages needing to be updated.  When the search completes an "Update All" button will appear which if clicked will update all packages.Note my project had the UpgradeMvc3ToMvc4 package.  It could not upgrade this so I uninstalled it first but allowed the dll's to remain when asked.
could load file assembly 39 system.web.helpers error iis 8,i have mvc4 web application works fine visual studio 2012 using local iis express server when i publish application iis 8 web server running windows 2012 initial login page displays correctly however using remote debugging i see when i check credentials using following line modelstate.isvalid amp amp websecurity.login model.username model.password persistcookie model.rememberme i get error shown figure below system.web.helpers error http www.ismlab.usf.edu capture.jpg,Solution - Copy reference to localRight click on reference System.Web.Helpers and select PropertiesChange Copy Local to true.Build Solution
asp.net mvc editor templates uihint parameters,i've been using editor templates past like applying following data annotation uihint sometemplate viewmodel public class microviewmodel public ienumerable&lt labmicro&gt micros get set uihint datetime public datetime date get set public int caseno get set uihint sampletypes public int labsampletypeid get set uihint sampledetails public int labsampledetailid get set i wanted use specific date picker control opposed regular one can implemented follows.example model datetime html.textbox string.format 0 yyyy mm dd model.hasvalue model datetime.today new class dp style width 100px lt script type text javascript gt document ready function dp datepicker changemonth truechangeyear truedateformat yy mm dd lt script&gt my id fields i'd like make use jquery auto complete component question how would i go about passing additional parameters uihint partial view labsampletypeid labsampledetailid id like have auto complete editor template that'll take url property names example what i think my auto complete editor template partial should look like auto autocomplete source function request response ajax url url use datatype json data filter request.term success function data response map eval data function item return label item property use,You could use the UHint without AdditionalMetadata attribute but some additional code is requred[UIHint("DateTime" null "key1" "value1" "key2" "value2")]public DateTime Date { get; set; }override CreateMetadata:public class CustomMetadataProvider : DataAnnotationsModelMetadataProvider{public const string UiHintControlParameters = "UiHintControlParameters";protected override ModelMetadata CreateMetadata(IEnumerable&lt;Attribute&gt; attributesType containerTypeFunc&lt;object&gt; modelAccessorType modelTypestring propertyName){ModelMetadata metadata = base.CreateMetadata(attributescontainerTypemodelAccessormodelTypepropertyName);IEnumerable&lt;UIHintAttribute&gt; uiHintAttributes = attributes.OfType&lt;UIHintAttribute&gt;();UIHintAttribute uiHintAttribute = uiHintAttributes.FirstOrDefault(a =&gt; string.Equals(a.PresentationLayer "MVC" StringComparison.OrdinalIgnoreCase))  ?? uiHintAttributes.FirstOrDefault(a =&gt; String.IsNullOrEmpty(a.PresentationLayer));if (uiHintAttribute != null){metadata.AdditionalValues.Add(UiHintControlParameters uiHintAttribute.ControlParameters);}return metadata;}Register CustomMetadataProvider:public static void Application_Start(){ModelMetadataProviders.Current = new CustomMetadataProvider();}and in your template:@{IDictionary&lt;string object&gt; values = (IDictionary&lt;string object&gt;)ViewData.ModelMetadata.AdditionalValues[CustomMetadataProvider.UiHintControlParameters];}
could load file assembly 39 webgrease 39 one its dependencies,when i run my mvc4 web application gives me following error could load file assembly webgrease one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 description unhandled exception occurred during execution current web request please review stack trace more information about error where originated code exception details system.io.fileloadexception could load file assembly webgrease one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 source error unhandled exception generated during execution current web request information regarding origin location exception can identified using exception stack trace below.i having web.config lt assemblybinding xmlns urn schemas microsoft com asm.v1 gt lt dependentassembly&gt lt assemblyidentity name webgrease publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-1.3.0.0 newversion 1.3.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.helpers publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.mvc publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-4.0.0.0 newversion 4.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.webpages publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt assemblybinding&gt after refering some answers so i changed lt dependentassembly&gt lt assemblyidentity name webgrease publickeytoken 31bf3856ad364e35 culture neutral gt lt bindingredirect oldversion 0.0.0.0-1.5.2.14234 newversion 1.5.2.14234 gt lt dependentassembly&gt still its working.what can issue edit edit 2 again following error after installation package server error application.configuration errordescription error occurred during processing configuration file required service request please review specific error details below modify your configuration file appropriately parser error message could load file assembly mysql.web version 6.7.4.0 culture neutral publickeytoken c5687fc88969c44d one its dependencies system cannot find file specified.source error line 249 lt providers&gt line 250 lt add name aspnetsqlmembershipprovider type system.web.security.sqlmembershipprovider system.web version 4.0.0.0 culture neutral publickeytoken b03f5f7f11d50a3a connectionstringname localsqlserver enablepasswordretrieval false enablepasswordreset true requiresquestionandanswer true applicationname requiresuniqueemail false passwordformat hashed maxinvalidpasswordattempts 5 minrequiredpasswordlength 7 minrequirednonalphanumericcharacters 1 passwordattemptwindow 10 passwordstrengthregularexpression gt line 251 lt add name mysqlmembershipprovider type mysql.web.security.mysqlmembershipprovider mysql.web version 6.7.4.0 culture neutral publickeytoken c5687fc88969c44d connectionstringname localmysqlserver enablepasswordretrieval false enablepasswordreset true requiresquestionandanswer true applicationname requiresuniqueemail false passwordformat clear maxinvalidpasswordattempts 5 minrequiredpasswordlength 7 minrequirednonalphanumericcharacters 1 passwordattemptwindow 10 passwordstrengthregularexpression gt line 252 lt providers&gt line 253 lt membership&gt please help me i am first time working mvc4 kendu application,I had to runUpdate-Package -Reinstall Microsoft.AspNet.Web.Optimization That updated my web.config and all references
asp.net mvc 4 loop posts model collection properties foreach does,say i have following models public class person public string name get set public int age get set public class town public string name get set public ienumerable&lt person&gt people get set my razor view i have model town@using html.beginform lt table&gt foreach var person model.people lt tr&gt lt td&gt html.textboxfor m gt person.name lt td&gt lt td&gt html.textboxfor m gt person.age lt td&gt lt tr&gt lt table&gt lt input type submit gt i have action post something like httppost public actionresult index town thetown when i post ienumerable&lt person&gt does come across i look fiddler collection only posts once doesn't enumerate collection so i get people.name whatever people.age 99however i change people ilist use loop instead foreach var i 0 i lt model.people.count i lt tr&gt lt td&gt html.textboxfor m gt model.people i name lt td&gt lt td&gt html.textboxfor m gt model.people i age lt td&gt lt tr&gt works am i doing something wrong what am i missing,All you missed was placing var instead of the Model itself(People) like below   &lt;table&gt;@foreach(People person in Model.People){&lt;tr&gt;&lt;td&gt;@Html.TextBoxFor(m =&gt; person.Name)&lt;/td&gt;&lt;td&gt;@Html.TextBoxFor(m =&gt; person.Age)&lt;/td&gt;&lt;/tr&gt;}&lt;table&gt;&lt;input type="submit" /&gt;
asp.net controller asynchronous module handler completed while asynchronous operation still pending,i have very simple asp.net mvc 4 controller public class homecontroller controller private const string my url http smthing private readonly task&lt string&gt task public homecontroller task downloadasync public actionresult index return view private async task&lt string&gt downloadasync using webclient mywebclient new webclient return await mywebclient.downloadstringtaskasync my url configureawait false when i start project i see my view looks fine when i update page i get following error invalidoperationexception asynchronous module handler completed while asynchronous operation still pending why does happen i made couple tests we remove task downloadasync from constructor put index method work fine without errors.if we use another downloadasync body return await task.factory.startnew gt thread.sleep 3000 return give me error work properly.why impossible use webclient.downloadstringtaskasync method inside constructor controller,ASP.NET considers it illegal to start an “asynchronous operation” bound to its SynchronizationContext and return an ActionResult prior to all started operations completing. All async methods register themselves as “asynchronous operation”s so you must ensure that all such calls which bind to the ASP.NET SynchronizationContext complete prior to returning an ActionResult.In your code you return without ensuring that DownloadAsync() has run to completion. However you save the result to the task member so ensuring that this is complete is very easy. Simply put await task in all of your action methods (after asyncifying them) prior to returning:public async Task&lt;ActionResult&gt; IndexAsync(){try{return View();}finally{await task;}}EDIT:In some cases you may need to call an async method which should not complete prior to returning to ASP.NET. For example you may want to lazily initialize a background service task which should continue running after the current request completes. This is not the case for the OP’s code because the OP wants the task to complete before returning. However if you do need to start and not wait for a task there is a way to do this. You simply must use a technique to “escape” from the current SynchronizationContext.Current.(not recommenced) One feature of Task.Run() is to escape the current synchronization context. However people recommend against using this in ASP.NET because ASP.NET’s threadpool is special. Also even outside of ASP.NET this approach results in an extra context switch.(recommended) A safe way to escape the current synchronization context without forcing an extra context switch or bothering ASP.NET’s threadpool immediately is to set SynchronizationContext.Current to null call your async method and then restore the original value.
why does asp.net mvc 4 have so many nuget packages which truly important,title says why do asp.net mvc 4 projects have soooo many nuget packages entire framework split packages now which ones truly important empty project website api etc updateto clarify i'm having issue well unless you count basic confusion one i just want know why new mvc 4 projects have so many packages installed default empty project has one full page packages internet project has three full pages packages.i m just curious why because my current mvc 3 projects use max five packages,ASP.NET MVC has been increasingly delivered via NuGet packages since ASP.NET MVC 3 Tools Update. This offers several advantages:Upgrades to to components delivered via NuGet - MVC itself and other associated components (Razor Web API) without waiting for a new "big" release of either ASP.NET MVC .NET or Visual Studio.This also means that you can use individual parts as you'd like outside of MVC - for instance Web API can be used outside of ASP.NET.More and more components are being shared between UI layers and other parts of ASP.NET. Some examples: routing is shared with Web Forms and Web Pages Razor is shared with Web Pages the new OAuth parts are shared with Web Forms.You'll notice that in a project from the Basic template you'll get the following packages:Microsoft.AspNet.MvcMicrosoft.AspNet.RazorMicrosoft.AspNet.WebApiMicrosoft.AspNet.WebApi.ClientMicrosoft.AspNet.WebApi.CoreMicrosoft.AspNet.WebApi.WebHostMicrosoft.AspNet.WebPagesMicrosoft.Net.HttpMicrosoft.Web.InfrastructureNewtonsoft.JsonFive of the nine are used for Web Api which has been highly componentized to allow developers a lot of flexibility about where and how they can use them. If you want to minimize your NuGet packages you can use the Basic template.As you move up into the Basic and Internet templates you'll see more packages to support the additional features the projects provide. Internet brings in several packages of open-source non-Microsoft code such as OAuth and JavaScript libraries.There are a lot of JavaScript packages which is a really good thing when you think about it since this means that NuGet is automatically handling JavaScript dependencies for you - if you want to upgrade jQueryUI which in turn requires a new version of jQuery it'll automatically upgrade jQuery for you.
windows workflow foundation 4 asp.net mvc,we evaluating windows workflow foundation 4 use mvc 3 based web applications we would like create flexible order workflows different projects.does anybody know good information about general architecture hands labs kind application some concrete questions would how can you activate specific controller action from workflow what best way communicate between workflow web application events wcf services,Another example with video is at below link. (Note: The code attached in the link might not be executable but it will give some concepts when you study the code and watch the video)https://channel9.msdn.com/Shows/Workflow-TV/endpointtv-WF4-in-the-Real-World-Microsoft-Support-ASPNET-MVC-Wizard-FrameworkThis link is showing how we can preserve the data between requests using tempdata. Since it is a large explanation I am not repeating the same again here. 
type initializer 39 system.data.entity.internal.appconfig 39 threw exception,i'm working ef5 mvc 4 aspnet website.locally everything works just fine when i publish iis try enter i get error type initializer system.data.entity.internal.appconfig threw exception detailed exception error occurred creating configuration section handler entityframework configuration dbcontext type gdpsoftware.server.data.gdpsoftwaredbcontext gdpsoftware.server.data specified multiple times application configuration each context can only configured once e app web.config line 104 i checked previous question stackoverflow i already uninstalled reinstalled through nuget entityframework checked each reference each project ef5 i also checked selected framework each project 4.5.any idea what might causing issue thanks guillermo.web.config lt xml version 1.0 encoding utf-8 gt lt more information how configure your asp.net application please visit http go.microsoft.com fwlink linkid 169433 gt lt configuration&gt lt configsections&gt lt section name entityframework type system.data.entity.internal.configfile.entityframeworksection entityframework version 5.0.0.0 culture neutral publickeytoken b77a5c561934e089 requirepermission false gt lt more information entity framework configuration visit http go.microsoft.com fwlink linkid 237468 gt lt configsections&gt lt connectionstrings&gt lt add name gdpsoftwareconnectionstring connectionstring persist security info false user id user password password initial catalog databasename data source server providername system.data.sqlclient gt lt add name gdpsoftware.server.data.gdpsoftwaredbcontext connectionstring gdpsoftware.server.data.gdpsoftwaredbcontext connectionstring providername system.data.sqlclient gt lt add name gdpsoftware.server.ui.web.models.userscontext connectionstring gdpsoftware.server.ui.web.models.userscontext connectionstring providername system.data.sqlclient gt lt connectionstrings&gt lt appsettings&gt lt add key webpages version value 2.0.0.0 gt lt add key webpages enabled value false gt lt add key preserveloginurl value true gt lt add key clientvalidationenabled value true gt lt add key unobtrusivejavascriptenabled value true gt lt appsettings&gt lt system.web gt lt compilation debug true targetframework 4.5 gt lt httpruntime targetframework 4.5 gt lt authentication mode forms gt lt forms loginurl account login timeout 2880 gt lt authentication&gt lt pages&gt lt namespaces&gt lt add namespace system.web.helpers gt lt add namespace system.web.mvc gt lt add namespace system.web.mvc.ajax gt lt add namespace system.web.mvc.html gt lt add namespace system.web.optimization gt lt add namespace system.web.routing gt lt add namespace system.web.webpages gt lt namespaces&gt lt pages&gt lt begin see errors deployment gt lt customerrors mode off gt lt end see errors deployment gt lt system.web gt lt system.webserver gt lt begin see errors deployment gt lt httperrors errormode detailed gt lt asp scripterrorsenttobrowser true gt lt end see errors deployment gt lt validation validateintegratedmodeconfiguration false gt lt handlers&gt lt remove name extensionlessurlhandler isapi-4.0_32bit gt lt remove name extensionlessurlhandler isapi-4.0_64bit gt lt remove name extensionlessurlhandler integrated-4.0 gt lt add name extensionlessurlhandler isapi-4.0_32bit path verb getheadpostdebugputdeletepatchoptions modules isapimodule scriptprocessor windir microsoft.net framework v4.0.30319 aspnet isapi.dll precondition classicmoderuntimeversionv4.0bitness32 responsebufferlimit 0 gt lt add name extensionlessurlhandler isapi-4.0_64bit path verb getheadpostdebugputdeletepatchoptions modules isapimodule scriptprocessor windir microsoft.net framework64 v4.0.30319 aspnet isapi.dll precondition classicmoderuntimeversionv4.0bitness64 responsebufferlimit 0 gt lt add name extensionlessurlhandler integrated-4.0 path verb getheadpostdebugputdeletepatchoptions type system.web.handlers.transferrequesthandler precondition integratedmoderuntimeversionv4.0 gt lt handlers&gt lt staticcontent&gt lt mimemap fileextension mustache mimetype text plain gt lt staticcontent&gt lt security&gt lt requestfiltering&gt lt fileextensions&gt lt add fileextension mustache allowed true gt lt fileextensions&gt lt requestfiltering&gt lt security&gt lt system.webserver gt lt runtime&gt lt assemblybinding xmlns urn schemas microsoft com asm.v1 gt lt dependentassembly&gt lt assemblyidentity name system.web.helpers publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.mvc publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 0.0.0.0-4.0.0.0 newversion 4.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.webpages publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name castle.windsor publickeytoken 407dd0808d44fbdc culture neutral gt lt bindingredirect oldversion 0.0.0.0-3.2.0.0 newversion 3.2.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name newtonsoft.json publickeytoken 30ad4fe6b2a6aeed culture neutral gt lt bindingredirect oldversion 0.0.0.0-4.5.0.0 newversion 4.5.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name microsoft.owin.host.systemweb publickeytoken 31bf3856ad364e35 culture neutral gt lt bindingredirect oldversion 0.0.0.0-1.0.0.0 newversion 1.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name castle.core publickeytoken 407dd0808d44fbdc culture neutral gt lt bindingredirect oldversion 0.0.0.0-3.2.0.0 newversion 3.2.0.0 gt lt dependentassembly&gt lt assemblybinding&gt lt runtime&gt lt entityframework&gt lt defaultconnectionfactory type system.data.entity.infrastructure.sqlconnectionfactory entityframework gt lt contexts&gt lt context type gdpsoftware.server.data.gdpsoftwaredbcontext gdpsoftware.server.data disabledatabaseinitialization true gt lt databaseinitializer type system.data.entity.migratedatabasetolatestversion 2 gdpsoftware.server.data.gdpsoftwaredbcontext gdpsoftware.server.data gdpsoftware.server.data.migrations.configuration gdpsoftware.server.data entityframework gt lt context&gt lt contexts&gt lt entityframework&gt lt configuration&gt,Do the following in the App.config filePut the connectionStrings element is after the configSections element.Put the startup element after the connectionStrings element.&lt;?xml version="1.0" encoding="utf-8"?&gt; &lt;configuration&gt;   &lt;configSections&gt; &lt;section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection EntityFramework Version=4.3.0.0 Culture=neutral PublicKeyToken=b77a5c561934e089" /&gt;   &lt;/configSections&gt;   &lt;connectionStrings&gt; &lt;add name="SchedulingContext" connectionString="Data Source=XXX\SQL2008R2DEV;Initial Catalog=YYY;Persist Security Info=True;User ID=sa;Password=XXX"   providerName="System.Data.SqlClient"/&gt;   &lt;/connectionStrings&gt;   &lt;startup&gt;&lt;supportedRuntime version="v4.0" sku=".NETFrameworkVersion=v4.5" /&gt;  &lt;/startup&gt;&lt;/configuration&gt;
asp.net mvc 4 ninject mvc 3 parameterless constructor defined object,update please look my answer link explanation solution problembefore we start i know very common question i've been using ninject many moons without issues now come up i can't figure out fix also none results google so so far have helped me.so consider following bit code running very very very simple prototype asp.net mvc 4 project from visual studio 2012 windows server 2008 r2 public class defaultcontroller controller private igroupprincipalrepository groupprincipalrepository get set inject public defaultcontroller igroupprincipalrepository groupprincipalrepository this.groupprincipalrepository groupprincipalrepository here ninjectwebcommon.cs registerservices method kernel.bind typeof igroupprincipalrepository toconstructor c gt new groupprincipalrepository new principalcontext contexttype.domain insingletonscope now how my other projects use ninject asp.net mvc 3 net 4 work far i know what needed make everything work so why am i suddenly getting parameterless constructor defined object exceptions updatehere full ninjectwebcommon.cs file assembly webactivator.preapplicationstartmethod typeof app start.ninjectwebcommon start assembly webactivator.applicationshutdownmethodattribute typeof app start.ninjectwebcommon stop namespace app start using system using system.directoryservices.accountmanagement using system.repositories.activedirectory using system.web using microsoft.web.infrastructure.dynamicmodulehelper using ninject using ninject.web.common public static class ninjectwebcommon private static readonly bootstrapper bootstrapper new bootstrapper public static void start dynamicmoduleutility.registermodule typeof oneperrequesthttpmodule dynamicmoduleutility.registermodule typeof ninjecthttpmodule bootstrapper.initialize createkernel public static void stop bootstrapper.shutdown private static ikernel createkernel var kernel new standardkernel kernel.bind lt func&lt ikernel&gt gt tomethod ctx gt gt new bootstrapper kernel kernel.bind lt ihttpmodule&gt to&lt httpapplicationinitializationhttpmodule&gt registerservices kernel return kernel private static void registerservices ikernel kernel kernel.bind typeof igroupprincipalrepository toconstructor c gt new groupprincipalrepository new principalcontext contexttype.domain insingletonscope update please look my answer link explanation solution problem,I know this is an old question but there don't seem to be any real answers and I've worked around the problem so here is my solution:Create a custom controller factory:public class NinjectControllerFactory : DefaultControllerFactory{private IKernel ninjectKernel;public NinjectControllerFactory(IKernel kernel){ninjectKernel = kernel;}protected override IController GetControllerInstance(RequestContext requestContext Type controllerType){return (controllerType == null) ? null : (IController) ninjectKernel.Get(controllerType);}}Then if you are using NinjectHttpApplication add the following line to OnApplicationStarted:ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory(Kernel));If you aren't using NinjectHttpApplication then add that line somewhere after you have created your kernel and pass it a reference to your freshly created kernel.That's it.
return json includes backward slashes ldquo rdquo which i don 39 t want,i use mvc4 web api c want return json using json.net.the problem comes backward slashes i also added code global.asax.globalconfiguration.configuration.formatters.xmlformatter.supportedmediatypes.clear here what returns cid 1 model wt50jb detail sdf unit 2 time 2012-12-11t19 00 00 time out 2012-12-12t13 00 06.2774691 07 00 time used dd 0.0 time used hh 0.0 so what i want see cid 1 model wt50jb detail sdf unit 2 time 2012-12-11t19 00 00 time out 2012-12-12t13 08 50.5444555 07 00 time used dd 0.0 time used hh 0.0 here jsonconvertorstring json jsonconvert.serializeobject myobj,I had the same issue until just a few moments ago. Turns out that I was "double serializing" the JSON string. I use a jQuery $.getJson( AJAX call to a JsonResult controller action. And because the action builds a C# Generic List&lt;t&gt; I thought that I had to use JSON.net/NewtonSoft to convert the C# Generic List&lt;t&gt; to a JSON object before returning the JSON using the following:return Json(fake JsonRequestBehavior.AllowGet);I didn't have to use the JsonConvert.SerializeObject( method after all evidently this return will conver the serialization for us.Hope it helps you or someone else too.
how am i supposed use returnurl viewbag.returnurl mvc 4,i'm working asp.net mvc 4 application i'm using learning simplemembershipprovider try stick default logic created vs2012 internet template i'm mistaken one simplemembershipprovider out box i'm stuck accountcontroller where i just can't figure put how exactly i can use method private actionresult redirecttolocal string returnurl url.islocalurl returnurl return redirect returnurl else return redirecttoaction index home from what i understand whole idea get redirected location from where you've decided log exactly what i want accomplish i took look how used view using html.beginform new returnurl viewbag.returnurl look place where actually viewbag.returnurl set some value i only got method here allowanonymous public actionresult login string returnurl viewbag.returnurl returnurl return view i'm getting pretty confused about how exactly i'm supposed get location url i set some breakpoints i have never seen returnurl something different from null which scenario seems pretty logical me since doesn't get value anywhere unless i miss something course so i really can't figure out how work i post above just show i tried do my homework i investigate much i could i didn't found answer so i ask here could you provide explanation example how actually work,That's because the default ASP.NET MVC template is using Forms authentication and controllers are decorated with [Authorize] attribute:&lt;authentication mode="Forms"&gt;  &lt;forms loginUrl="~/Account/Login" timeout="2880" /&gt;&lt;/authentication&gt;[Authorize]public class AccountController : Controller{//...}That means that if the user is not authenticated it will be redirected to the logon page defined in the LoginUrl attribute of the forms element.During the redirection FormsAuthentication which is an HttpModule will append the url which was requested in the query string automatically. So if you navigate to /Account/Login you wont get anything in the query string since it is decorated with [AllowAnonymous] attribute. But if you navigate to /Account/Manage you'll notice that the returnUrl in the query string becomes /Account/Manage (/Account/Login?ReturnUrl=%2fAccount%2fManage)So you are not setting the returnUrl the framework does it for you you just use it in the AccountController to know where to redirect the user after he is authenticated.
asp.net mvc4 bundling twitter bootstrap,i'm trying use new bundling feature mvc 4 twitter bootstrap seems me like paths glyphicons png files int css get messed up some way heres my code bundles.add new stylebundle bundles publiccss include static css bootstrap bootstrap.css static css bootstrap bootstrap padding top.css static css bootstrap bootstrap responsive.css static css bootstrap docs.css bundles.add new scriptbundle bundles publicjs include static js jquery-1.7.2.js static js bootstrap bootstrap.js static js cookie jquery.cookie.js i'm seeing any icons buttons likewise am i doing something wrong here any suggestions,The 'CssRewriteUrlTransform' works just fine for applications that DOESN'T run on top of a virtual directory.So if your app runs on http://your-site.com/ it runs just fine but if runs on http://your-site.com/your-app/ you'll have 404 for all your images because the default 'CssFixRewriteUrlTransform' is referencing your images with a '/'.To solve this issue i have implemented my own version of 'CssRewriteUrlTransform' like this:public class CssFixRewriteUrlTransform : IItemTransform {private static string ConvertUrlsToAbsolute(string baseUrl string content) {if (string.IsNullOrWhiteSpace(content)) {return content;}var regex = new Regex("url\\(['\"]?(?&lt;url&gt;[^)]+?)['\"]?\\)");return regex.Replace(content match =&gt; string.Concat("url(" RebaseUrlToAbsolute(baseUrl match.Groups["url"].Value) ")"));}public string Process(string includedVirtualPath string input) {if (includedVirtualPath == null) {throw new ArgumentNullException("includedVirtualPath");}var directory = VirtualPathUtility.GetDirectory(includedVirtualPath);return ConvertUrlsToAbsolute(directory input);}private static string RebaseUrlToAbsolute(string baseUrl string url) {if (string.IsNullOrWhiteSpace(url) || string.IsNullOrWhiteSpace(baseUrl) || url.StartsWith("/" StringComparison.OrdinalIgnoreCase)) {return url;}if (!baseUrl.EndsWith("/" StringComparison.OrdinalIgnoreCase)) {baseUrl = string.Concat(baseUrl "/");}return VirtualPathUtility.ToAbsolute(string.Concat(baseUrl url));}}UPDATE: thanks to superjos who pointed that was another solution out there:public class CssRewriteUrlTransformWrapper : IItemTransform{public string Process(string includedVirtualPath string input){   return new CssRewriteUrlTransform().Process("~" + VirtualPathUtility.ToAbsolute(includedVirtualPath) input);   }}
routing asp.net mvc 4 web api,can i use following two route rule together config.routes.maphttproute name actionapi routetemplate api controller action id defaults new id routeparameter.optional config.routes.maphttproute name defaultapi routetemplate api controller id defaults new id routeparameter.optional say controller fruitapicontroller apicontroller i wish have followinglist&lt fruit&gt get api fruitapi list&lt fruit&gt getseasonalfruits api fruitapi getseasonalfruitfruit getfruits string id api fruitapi/15fruit getfruitsbyname string name api fruitapi getfruitsbyname appleplease help me thanks,config.Routes.MapHttpRoute(name: "ApiByName"routeTemplate: "api/{controller}/{action}/{name}"defaults: nullconstraints: new { name = @"^[a-z]+$" });
return mvc.jsonresult plus set response.statuscode,project asp mvc 4 running under net 4.0 framework when running application under vs 2010 express deployed running under iis 7.5 my local machine following pseudocode result from action works expected httppost public actionresult postword model model response.statuscode 400 return new jsonresult data new fieldname word error really word i have assigned contenttype contentencoding properties jsonresult object difference behaviour when deployable moved onto web host using iis 7 firebug telling me response expected 400 json response ie text any kind i remove line response.statuscode 400 from action json perfectly formed response course response status code 200 ok which interferes consuming javascript appropriate function call.any thoughts what might going how fix thank you,I had this exact same problem; in order to make sure that the correct answer is not buried in the comments (as it was for me) I want to reiterate @Sprockincat's comment:For me at least it was indeed an issue with IIS Custom errors and can be solved with:Response.TrySkipIisCustomErrors = true;@Sprockincat - you should get credit for this. I'm just making it more visible because it's such a subtle fix to a problem that is quite difficult to diagnose. 
after upgrading webgrease 1.5.1.25624 from nuget system.io.fileloadexception coming,i am asp.net death page coming after i upgraded webgrease bootstrap mvc4 using nuget server error application.could load file assembly webgrease one its dependencies strong name signature could verified assembly may have been tampered delay signed fully signed correct private key exception from hresult 0x80131045 description unhandled exception occurred during execution current web request please review stack trace more information about error where originated code exception details system.io.fileloadexception could load file assembly webgrease one its dependencies strong name signature could verified assembly may have been tampered delay signed fully signed correct private key exception from hresult 0x80131045 source error unhandled exception generated during execution current web request information regarding origin location exception can identified using exception stack trace below.assembly load trace following information can helpful determine why assembly webgrease could loaded.version information microsoft net framework version 4.0.30319 asp.net version 4.0.30319.18045,Force uninstall the package using Package Manager Consoleuninstall-package -f WebGreasethen install the previous version 1.3.0 using the following commandinstall-package WebGrease -Version 1.3.0Open your Web.config file and replace below dependency under runtime tag&lt;dependentAssembly&gt;&lt;assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" /&gt;&lt;bindingRedirect oldVersion="0.0.0.0-1.3.0.0" newVersion="1.3.0.0" /&gt;
how add script partial view mvc4,code which i have my partial view@model contoso.mvcapplication.models.exercises.absolutearithmetic using html.beginform lt div&gt lt span style width 110px float left text align center font size 2.5em gt model.number1 lt span&gt lt span style width 110px float left text align center font size 2.5em gt lt span&gt lt span style width 110px float left text align center font size 2.5em gt model.number2 lt span&gt lt span style width 110px float left text align center font size 2.5em gt lt span&gt lt span&gt html.editorfor model gt model.result html.validationmessagefor model gt model.result lt span&gt lt div&gt section scripts scripts.render bundles jqueryval please note bottom my code i've got section i realized running i set breakpoint i move line layout.cshtml works well idea.how can i tell mvc4 partial razor view i want add library,You can use@Scripts.Render("~/Scripts/my-script.js") for .js files and @Styles.Render("~/Content/my-Stylesheet.css") for css files.Nb: it works for a particular bundle also More details - 'http://www.asp.net/mvc/overview/performance/bundling-and-minification'it works on any sub-pages in razor including partial views.for more info google for the usage of these helpers
where symbols asp.net mvc 4.0 rtm,i'm trying configure visual studio 2012 allow me step asp.net mvc 4.0 source code system.web.mvc.dll i've followed symbolsource recommended configuration when i try load symbols visual studio can't locate them recommended configurationto configure visual studio symbol server use follow instructions go tools options debugger general uncheck enable just my code managed only uncheck enable net framework source stepping yes misleading you don't visual studio ignore your custom server order see further check enable source server support uncheck require source files exactly match original version go tools options debugger symbols select folder local symbol source cache add symbol servers under symbol file pdb locations pay attention correct order because some servers may contain symbols same binaries without sources we recommend following setup http referencesource.microsoft.com symbols http srv.symbolsource.org pdb public authenticated variant see above http srv.symbolsource.org pdb myget authenticated variant see above other symbol servers sources http msdl.microsoft.com download symbols other symbol servers without sources i am aware source code available codeplex however i'm specifically interested stepping code using symbol server instead having unreference mvc from gac reference locally built assembly.has anyone had success doing mvc 4.0,Just add a symbol server that serves more then just major releases.Try this one contains most minor builds.http://srv.symbolsource.org/pdb/PublicVerify:Run VS as administrator.Check that something have been downloaded to your symbol cache directory.Goto select only specified modules.Add "System.Web.Mvc.dll" Set a break point in your code. Start debug.When break point hits rightclick in callstack on any mvc.dll row. Verify that symbols are loaded.if loaded try dubbleclick on one callstack row to open mvc source.Get back with where you get in trouble.
simplemembership custom database schema asp.net mvc 4,i want enable asp.net mvc 4 s simplemembership api integrate my own database schema i have plain simple table my database called users fields idnamepasswordemailisdeletedi have already configured simplemembership api use my database websecurity.initializedatabaseconnection mystuff users id name autocreatetables true i can insert user too websecurity.createuserandaccount model.username model.password new isdeleted false email sampledata@gmail.com however password field hash inserted users table course inserted another table called webpages membership which created initializedatabaseconnection call contains lot unnecessary information which i don't need.also i have other automatically created tables called webpages oauthmembership webpages roles webpages usersinroles which i don't need.i ve already tried set table generation false websecurity.initializedatabaseconnection mystuff users id name autocreatetables false case createuserandaccount call throw exception because find webpages membership table.it looks like tables needed when i want use simplemembership api my question what should i do scenario like when i want only simple users table nothing more do i have write whole membership handling authentication logic hash code generation etc myself,Customization is possible.You can get the source code for SimpleMembershipProvider from the aspnetwebstack project on CodePlex since this is where the mapping occurs between the DB Schema and the runtime environment you can modify this code to modify/replace schema statements etc to match your needs (without much headache IMO.)
how get route value view asp.net mvc,alternative get route value view page instead read like querystring html.actionlink language resources index languageresource new languagecode request.querystring languagecode,try to find from below codeIn Razor@{var id = ViewContext.RouteData.Values["id"]; }In WebForms:&lt;% var id = ViewContext.RouteData.Values["id"];%&gt;
asp.net web api binding ninject,i have just installed mvc4 rc update i am trying build api application little luck.i am using ninject cant get my controllers load i keep getting error type api.controllers.consumercontroller does have default constructori am very new mvc using injection so please bear me.i havent done anything special default binding created via nuget public static class ninjectwebcommon private static readonly bootstrapper bootstrapper new bootstrapper lt summary&gt starts application lt summary&gt public static void start dynamicmoduleutility.registermodule typeof oneperrequesthttpmodule dynamicmoduleutility.registermodule typeof ninjecthttpmodule bootstrapper.initialize createkernel lt summary&gt stops application lt summary&gt public static void stop bootstrapper.shutdown lt summary&gt creates kernel manage your application lt summary&gt lt returns&gt created kernel lt returns&gt private static ikernel createkernel var kernel new standardkernel kernel.bind lt func&lt ikernel&gt gt tomethod ctx gt gt new bootstrapper kernel kernel.bind lt ihttpmodule&gt to&lt httpapplicationinitializationhttpmodule&gt registerservices kernel return kernel lt summary&gt load your modules register your services here lt summary&gt lt param name kernel gt kernel lt param&gt private static void registerservices ikernel kernel kernel.bind lt iconsumerrepository&gt to&lt consumerrepository&gt my controller looks like private readonly iconsumerrepository repository public consumercontroller iconsumerrepository repository repository repository httpget public iqueryable&lt consumer&gt get guid id return repository.get id asqueryable what do i need do get api controllers work ninject sorry simple stuffi tried your suggestion michael however after changing webcommon.cs private static ikernel createkernel var kernel new standardkernel kernel.bind lt func&lt ikernel&gt gt tomethod ctx gt gt new bootstrapper kernel kernel.bind lt ihttpmodule&gt to&lt httpapplicationinitializationhttpmodule&gt registerservices kernel globalconfiguration.configuration.dependencyresolver new ninjectdependencyresolver kernel return kernel lt summary&gt load your modules register your services here lt summary&gt lt param name kernel gt kernel lt param&gt private static void registerservices ikernel kernel kernel.bind lt iconsumerrepository&gt to&lt consumerrepository&gt i get error when var kernel new standardkernel called method getfilters type ninject.web.webapi.filter.defaultfilterprovider from assembly ninject.web.webapi version 3.0.0.0 culture neutral publickeytoken c7192dc5380945e7 does have implementation.what am i missing,This generic error message  Type 'Api.Controllers.ConsumerController' does not have a default constructorcan also occur if you do not make your constructor public or the dependency cannot be resolved by the IoC container maybe because of a missing argument.The error message is misleading to say the least.
aspnet compiler finding wrong version system.web.webpages 1.0.0.0 instead 2.0.0.0,i have asp.net mvc4 project which compiles fine vs2010 deployment purposes i run nant script which attempts precompile website using aspnet compiler.exe i keep running assembly reference issue system.web.webpage error cs1705 assembly system.web.mvc version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 uses system.web.webpages version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 which has higher version than referenced assembly system.web.webpages version 1.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 i also have following assembly bindings my web.config lt runtime&gt lt assemblybinding xmlns urn schemas microsoft com asm.v1 gt lt dependentassembly&gt lt assemblyidentity name system.web.helpers publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.mvc publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 0.0.0.0-4.0.0.0 newversion 4.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.webpages publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 0.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.webpages.razor publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 0.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt assemblybinding&gt lt runtime&gt my csproj has following reference lt reference include system.web.webpages version 2.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 gt lt private&gt true&lt private&gt lt hintpath&gt packages aspnetwebpages.core.2.0.20126.16343 lib net40 system.web.webpages.dll lt hintpath&gt lt reference&gt,We had similar problem.We are now using Visual Studio 2012 for developing and when we converted a 2010 project to 2012 and tried to deploy that ASP.NET was requiring 2.0.0.0 instead of 1.0.0.0.After some investigation I saw that the project was not referencing a specific version of System.Web.WebPages so after upgrading to VS 2012 it was finding the 2.0.0.0 version.If you remove the reference from your project and then re-add the specific version from the GAC it works correctly.
windows authentication asp.net mvc 4 how works how test,i have never used windows authentication asp.net mvc web applications before forms authentication recently i have had asp.net mvc 4 web application requires windows authentication implementation users who granted log my company web server so i have some questions regarding windows authentication i am using visual&nbsp studio&nbsp 2012.how does windows authentication work how do i implement windows authentication correctly web.config file how do i test windows authentication really works my asp.net nbsp mvc 4 web site other words how do i test my local development pc local iis version 8 my company real web server iis version 7,For IIS 8.5 and MVC 4:How does Windows Authentication work?In this mode User.Identity (as in HttpContext.Current.User.Identity) is populated by the underlying web server.  This might be IIS Express in the link from @R Kumar demonstrated or full blown IIS as in the video by @Thomas Benz.Specifically User.Identity is a WindowsIdentity object.  E.g. the following cast will work:WindowsIdentity clientId = (WindowsIdentity)HttpContext.Current.User.Identity;How do I implement Windows Authentication correctly in the web.config file?  &lt;system.web&gt;&lt;authentication mode="Windows" /&gt;  ...How do I test if the Windows Authentication really works for my ASP.NET MVC 4 web site? In other words how do I test it on my local development PC with local IIS (version 8) and on my company real web server with IIS version 7?First change the ASP.NET authorization to exclude the current user.  E.g.   &lt;system.web&gt;&lt;authentication mode="Windows" /&gt;&lt;authorization&gt;  &lt;allow users="yourdomain\someotheruser" /&gt;  &lt;deny users="*" /&gt;&lt;/authorization&gt;Second enable Windows Authentication for your site using IIS Manager.  It's under the 'Authentication' feature.  And disable anonymous authentication.Note that older explanation will suggest you make changes under  element of your site's web.config.  However recent IIS implementations prevent this for security reasons.Three point your browser at the webpage.  The browser should ask you to provide credentials because the current user is not allowed access to the website.  Provide the ones that are authorized for the site and your MVC code should run.Four check the user identity.  E.g. WindowsIdentity clientId = (WindowsIdentity)HttpContext.Current.User.Identity;
multiple radio button groups mvc 4 razor,i need have multiple radio button groups my form like i know simply done specifying same name html attribute each group.howevermvc doesn't let you specify your own name attribute when using html helper like html.radiobuttonfor i gt item.id item.selectedid new name item.optservicecatid because looks each tag name attribute id map bind form model which controller receives etc some said specifying each same groupname attribute solve problem didn't work either.so any way which works edit here my view simplified model service provider.viewmodels.selectoptservicesforsubserviceviewmodel foreach var cat model.optservices piece code amp html here foreach var item cat.optitems.where i gt i.multiselect false html.radiobuttonfor i gt item.id item.selectedid new groupname item.optservicecatid lt br gt note my model list&lt optservices&gt public list&lt optservices&gt cats get set optservices has list optitems inside public class optservices few thingspublic list&lt optitems&gt items get set,all you need is to tie the group to a different item in your model@Html.RadioButtonFor(x =&gt; x.Field1 "Milk")@Html.RadioButtonFor(x =&gt; x.Field1 "Butter")@Html.RadioButtonFor(x =&gt; x.Field2 "Water")@Html.RadioButtonFor(x =&gt; x.Field2 "Beer")
cs0234 mvc does exist system.web namespace,i converted asp.net 4 webform project asp.net mvc4 according chapter 13 professional asp.net 3.5 mvc scott hanselmen phil haack rob conery published wiley publishing inc isbn 978-0-470-38461-9 i also followed blog now i can add controllers views etc all references set properly build errors upon launching converted project i got compilation errors i have mvc3 installed same machine i even changed reference still complain could you help thanks.description error occurred during compilation resource required service request please review following specific error details modify your source code appropriately compiler error message cs0234 type namespace name mvc does exist namespace system.web you missing assembly reference source error line 109 lt namespaces&gt line 110 lt add namespace system.web.helpers gt line 111 lt add namespace system.web.mvc gt line 112 lt add namespace system.web.mvc.ajax gt line 113 lt add namespace system.web.mvc.html gt source file c users jon documents visual studio 2012 projects cmt apps branches 3.0 web.configline 111,I had the same problem and I had solved it with:1.Right click to solution and click 'Clean Solution' 2.Click 'References' folder in solution explorer and select the problem reference (in your case it seems System.Web.Mvc) and then right click and click 'Properties'.3.In the properties window make sure that the 'Copy Local' property is set to 'True'This worked for me. Hope it works for someone elseHelpful Note: As it has mentioned in comments by @Vlad:If it is already set to True:Set it False  Set it True againRebuild
how can i check user any one few different roles mvc4 simple membership,i understand good way check user role user.isinrole admin however how can i check my user one author admin super roles way do without coding user.isinrole each roles,There's no built-in way to check if a user is in multiple roles but it's pretty trivial to create a nice extension method to handle it for you:public static bool IsInAnyRole(this IPrincipal principal params string[] roles){return roles.Any(principal.IsInRole);}Usage then is:if (User.IsInAnyRole("Admin" "Author" "SuperUser")){}
how unit test action when return type actionresult,i have written unit test following action httppost public actionresult viewresult create myviewmodel vm modelstate.isvalid do something return redirecttoaction index return view vm test method can access model properties only when return type viewresult above code i have used redirecttoaction so return type action can viewresult scenario how do you unit test action,Please note that Assert.IsInstanceOfType(resulttypeof(RedirectToRouteResult)); has been deprecated.The new syntax isAssert.That(result Is.InstanceOf&lt;RedirectToRouteResult&gt;());
ajax.beginform mvc upload files,i trying use example mentioned here how do asp.net mvc ajax form post multipart form data i keep getting fail error message boxindex.cshtml lt script src scripts jquery-1.8.2.min js gt lt script&gt lt script src scripts jquery.unobtrusive ajax.min.js gt lt script&gt lt h2 gt files upload&lt h2 gt lt script type text javascript gt function form0 submit function event var datastring event.preventdefault var action form0 attr action form0 attr enctype multipart form data only works some browsers purpose submit files over ajax because screw iframes also we need call get 0 jquery element turn regular dom element so formdata can use it.datastring new formdata form0 get 0 contenttype false processdata false else regular form do your own thing you need ajax type post url actiondata datastringdatatype json change your own else read my note above enabling jsonvalueproviderfactory mvccontenttype contenttypeprocessdata processdatasuccess function data btw data one worst names you can make variable error function jqxhr textstatus errorthrown do your own thingalert fail end submit lt script&gt lt div id uploaddiv gt html.action files home lt div&gt using ajax.beginform files home new ajaxoptions updatetargetid uploaddiv httpmethod post new enctype multipart form data id form0 lt div&gt lt div&gt upload new file lt input type file name file gt lt div&gt lt input type submit value save gt lt div&gt lt br gt controllerpublic partialviewresult files httppostedfilebase file ienumerable&lt string&gt files file null amp amp file.contentlength gt 0 string filename file.filename string savelocation d files string fullfilepath path.combine savelocation filename try file.saveas fullfilepath fileinfo fileinfo new fileinfo fullfilepath file.inputstream.read new byte fileinfo.length 0 file.contentlength catch exception e tempdata fileupload e.message return partialview files directory.getfiles d files return partialview files else files directory.getfiles d files return partialview files files.cshtml model ienumerable&lt string&gt foreach string f model lt p&gt f&lt p&gt global.asaxvalueproviderfactories.factories.add new jsonvalueproviderfactory,The answer from Ashwini Verma is almost correct but it has a drawback the form is submitted twice.This is caused by the use of Ajax.BeginForm(). Using Html.BeginForm() will fix it.Here's an example:@* do not use Ajax.BeginForm() as it would cause the form to submit twice in connection with jQuery.Form *@@using (var lForm = Html.BeginForm(   &lt;ActionName&gt; &lt;ControllerName&gt; FormMethod.Post   new Dictionary&lt;string object&gt; {{"name" &lt;YourFormName&gt;} {"enctype" "multipart/form-data"}})){
how handle hierarchical routes asp.net web api,currently i have two controllers 1 parent controller2 child controlleri access my parent controller like thissomeurl parentcontrollernow i want access my children controller like thissomeurl parentcontroller 1 childcontrollerthis last url should return all children particular parent i have route currently my global.asax file routes.maphttproute route1 controller id new id routeparameter.optional i am sure how can i achieve my parent id child hierarchy how should i configure my routes achieve ideas,Since Web API 2 you can now use Route Attributes to define custom routing per Method [Route("api/customers/{id:guid}/orders")]public IEnumerable&lt;Order&gt; GetCustomerOrders(Guid id) {   return new Order[0];}You also need to add following line to WebApiConfig.Register() initialization method   config.MapHttpAttributeRoutes();Full articlehttp://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2
unable authenticate asp.net web api service httpclient,i have asp.net web api service runs web server windows authentication enabled i have client site built mvc4 runs different site same web server uses httpclient pull data from service client site runs identity impersonation enabled also uses windows authentication.the web server windows server 2008 r2 iis 7.5.the challenge i am having getting httpclient pass current windows user part its authentication process i have configured httpclient manner var clienthandler new httpclienthandler clienthandler.usedefaultcredentials true clienthandler.preauthenticate true clienthandler.clientcertificateoptions clientcertificateoption.automatic var httpclient new httpclient clienthandler my understanding running site identity impersonation enabled building client manner should result client authenticating service using impersonated identity currently logged user.this happening fact client doesn't seem authenticating all.the service configured use windows authentication seems work perfectly i can go http server api shippers my web browser prompted windows authentication once entered i receive data requested.in iis logs i see api requests being received authentication receiving 401 challenge response.documentation one seems sparse i need some insight what could wrong another way use windows authentication application thank youcraig,I have investigated the source code of HttpClientHandler (the latest version I was able to get my hands on) and this is what can be found in SendAsync method:// BeginGetResponse/BeginGetRequestStream have a lot of setup work to do before becoming async// (proxy dns connection pooling etc).  Run these on a separate thread.// Do not provide a cancellation token; if this helper task could be canceled before starting then // nobody would complete the tcs.Task.Factory.StartNew(startRequest state);Now if you check within your code the value of SecurityContext.IsWindowsIdentityFlowSuppressed() you will most probably get true. In result the StartRequest method is executed in new thread with the credentials of the asp.net process (not the credentials of the impersonated user).There are two possible ways out of this. If you have access to yours server aspnet_config.config you should set following settings (setting those in web.config seems to have no effect):&lt;legacyImpersonationPolicy enabled="false"/&gt;&lt;alwaysFlowImpersonationPolicy enabled="true"/&gt;If you can't change the aspnet_config.config you will have to create your own HttpClientHandler to support this scenario.UPDATE REGARDING THE USAGE OF FQDNThe issue you have hit here is a feature in Windows that is designed to protect against "reflection attacks". To work around this you need to whitelist the domain you are trying to access on the machine that is trying to access the server. Follow below steps:Go to Start --> Run --> regeditLocate HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0 registry key.Right-click on it choose New and then Multi-String Value.Type BackConnectionHostNames (ENTER).Right-click just created value and choose Modify.Put the host name(s) for the site(s) that are on the local computer in the value box and click OK (each host name/FQDN needs to be on it's own line no wildcards the name must be exact match).Save everything and restart the machineYou can read full KB article regarding the issue here.
convert value when mapping,i'm using ef code first existing database method have isactive field my database problem field varchar when should boolean i can't change database schema.example value database y true n false when mapping i want convert those values either true false keep my entity class boolean value.is possible my entity mapping classes following i would like change isactive field boolean.public class employee public int id get set public string ssn get set public string email get set public string isactive get set public class employeemap entitytypeconfiguration&lt employee&gt public employeemap this.totable employees this.haskey t gt t.id this.property t gt t.id hascolumnname id employee this.property t gt t.ssn hascolumnname sreference this.property t gt t.email hascolumnname email this.property t gt t.isactive hascolumnname isactive edit i found other solution than https stackoverflow.com a/6709186/1053611,I have a solution to actually map the type meaning additional properties are not required. As I had a similar question for DateTimes but easily convertible for bools:Is there a simple way using data annotations or a custom type to use a value stored as a string in SQL as a DateTime in EF?
could load file assembly 39 webmatrix.data,i updated mvc4 mvc5 when you run application i got error i don't have webmatrixdata i installed pm&gt install package webmatrixdata now when you start getting browser could load file assembly webmatrix.data version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 anyone know how fix package manager console logattempting resolve dependency microsoft.aspnet.webpages.data 2.0.20710.0 installing webmatrix.data 2.0.30506.0 you downloading webmatrix.data from microsoft license agreement which available http www.microsoft.com web webpi eula aspnetcomponent rtw enuhtm check package additional dependencies which may come own license agreement s your use package dependencies constitutes your acceptance license agreements you do accept license agreement s delete relevant components from your device.successfully installed webmatrix.data 2.0.30506.0 adding webmatrix.data 2.0.30506.0 xxx.successfully added webmatrix.data 2.0.30506.0 xxx piece code web.config lt runtime&gt lt assemblybinding xmlns urn schemas microsoft com asm.v1 gt lt dependentassembly&gt lt assemblyidentity name system.web.mvc publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 0.0.0.0-5.0.0.0 newversion 5.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name webgrease publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 0.0.0.0-1.3.0.0 newversion 1.3.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name entityframework publickeytoken b77a5c561934e089 culture neutral gt lt bindingredirect oldversion 0.0.0.0-6.0.0.0 newversion 6.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name dotnetopenauth.aspnet publickeytoken 2780ccd10d57b246 culture neutral gt lt bindingredirect oldversion 0.0.0.0-4.3.0.0 newversion 4.3.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name dotnetopenauth.core publickeytoken 2780ccd10d57b246 culture neutral gt lt bindingredirect oldversion 0.0.0.0-4.3.0.0 newversion 4.3.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name microsoft.aspnet.identity.core publickeytoken 31bf3856ad364e35 culture neutral gt lt bindingredirect oldversion 0.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.helpers publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-3.0.0.0 newversion 3.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.webpages publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 0.0.0.0-3.0.0.0 newversion 3.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.razor publickeytoken 31bf3856ad364e35 culture neutral gt lt bindingredirect oldversion 0.0.0.0-3.0.0.0 newversion 3.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.webpages.razor publickeytoken 31bf3856ad364e35 culture neutral gt lt bindingredirect oldversion 0.0.0.0-3.0.0.0 newversion 3.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name webmatrix.webdata publickeytoken 31bf3856ad364e35 culture neutral gt lt bindingredirect oldversion 0.0.0.0-3.0.0.0 newversion 3.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name webmatrix.data publickeytoken 31bf3856ad364e35 culture neutral gt lt bindingredirect oldversion 0.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt assemblybinding&gt lt runtime&gt,Go into: Tools &gt; NuGet Package Manager &gt; Package Manager ConsoleAnd run the following command:PM&gt; Install-Package Microsoft.AspNet.WebPages.Data
deploying asp.net mvc4 app godaddy compiler issue,have seen several posts about deploying mvc apps godaddy none them seem address issue we having we have followed advice about checking runtime versions iis pipeline modes publishing copy local true assemblies so all works godaddy.com.the issue we having when we try visit site we get group policy exception because asp.net runtime trying invoke c compiler win32exception 0x80004005 program blocked group policy more information contact your system administrator externalexception 0x80004005 cannot execute program command being executed c windows microsoft.net framework v4.0.30319 csc.exe we have gone through publish settings elected precompile site didn't fix issue have looked site cs files deployed global.asax file does reference codebehind file since we precompiled site we tried deleting global.asax file doesn't fix issue either.any thoughts would great,I have struggled with the same problem for months. And finally solved it. In the plesk on godaddy I changed the ASP.Net settings. First changed CAS-trustlevel to Full. Then I changed in the Web.config of my project the following:Add trust level full to the system.webRemove the compilers in the system.codecom &lt;system.web&gt;compilation debug="true" targetFramework="4.5.2"/&gt;&lt;httpRuntime targetFramework="4.5.2"/&gt;&lt;trust level="Full"/&gt; &lt;!-- Just add this to the webconfig --&gt; &lt;/system.web&gt; &lt;system.codedom&gt;  &lt;!-- All is removed between the 2 tags--&gt; &lt;/system.codedom&gt;and that solved my problem.
azure blob 400 bad request creation container,i'm developing asp.net mvc 4 app i'm using azure blob store images my users going upload i have following code var storageaccount cloudstorageaccount.parse configurationmanager.connectionstrings storageconnection connectionstring var blobstorage storageaccount.createcloudblobclient merchantkey just guid asociated merchant var containername imageads merchant.merchantkey.tostring tolower cloudblobcontainer container blobstorage.getcontainerreference containername container.createifnotexist upload file soon statement excecuted i'm getting following exception remote server returned error 400 bad request i thought container name i don't see anything wrong connection string seems create good storage all details blob i'm loss i've researched web everyone saying naming problem i can't find anything wrong it.test container name i used imageads-57905553-8585-4d7c-8270-be9e611eda81the container has following uri http 127.0.0.1 10000/devstoreaccount1/imageads-57905553-8585-4d7c-8270-be9e611eda81 update i have changed container name just image i still get same exception also development connection string follows lt add name storageconnection connectionstring usedevelopmentstorage true gt,As you found through your research the problem is the name.You say that your test container is named imageads-57905553-8585-4d7c-8270-be9e611eda81 but in your code you are using ImageAds-57905553-8585-4d7c-8270-be9e611eda81.  Notice the difference in capitalization.  If you switch your container name to all lower case it will work correctly.For more information see #3 under Container Names at Naming and Referencing Containers Blobs and Metadata:3. All letters in a container name must be lowercase.
circular reference detected exception while serializing object json,just mentioned post i am getting json serialization error while serializing entity framework proxy circular reference detected while serializing object type system.data.entity.dynamicproxies.purchaseorder 446b939192f161cdbc740067f174f7a6059b0f9c0eee68cd3ebbd63cf9af5bd0 difference i don't have circular reference my entities only occurs our production environment locally everything works fine my entities public interface ientity guid uniqueid get int id get public class entity ientity public int id get set public guid uniqueid get set public class purchaseorder entity public string username get set public string company get set public string supplierid get set public string suppliername get set public virtual icollection&lt purchaseorderline&gt lines get set public class purchaseorderline entity public string code get set public string name get set public decimal quantity get set getcurrent action my purchaseordercontroller throwing exception public class purchaseordercontroller controller private readonly iunitofwork unitofwork public purchaseordercontroller iunitofwork unitofwork unitofwork unitofwork public jsonresult getcurrent return json ensurepurchaseorder jsonrequestbehavior.allowget private purchaseorder ensurepurchaseorder var company routedata.getrequiredstring company var repository unitofwork.getrepository lt purchaseorder&gt var purchaseorder repository.include p gt p.lines firstordefault p gt p.company company amp amp p.username user.identity.name purchaseorder null purchaseorder repository.create purchaseorder.uniqueid guid.newguid purchaseorder.company company purchaseorder.username user.identity.name unitofwork.savechanges return purchaseorder,Option 1 (recommended)Try turning off Proxy object creation on your DbContext.DbContext.Configuration.ProxyCreationEnabled = false;Typically this scenario is because the application is using POCO objects (Either T4 Generated or Code-First).  The problem arises when Entity Framework wants to track changes in your object which is not built into POCO objects.  To resolve this EF creates proxy objects which lack the attributes in the POCO objects and aren't serializable.The reasons why I recommend this approach; using a website means that you probably don't need change tracking (stateful) on Entity Framework objects it free's up memory and cpu because change tracking is disabled and it will work consistantly on all your objects the same way.Option 2 Use a serializer (like JSON.Net which is already included in ASP.Net 4) that allows customization to serialize the object(s).The reasons I do not recommend this approach is that eventually custom object serialization logic will be need to serial proxy objects as other objects types.  This means you have a dependency on logic to deliver a result downstream.  Changing the object means changing logic and in an ASP.Net MVC project (any version) instead of only changing a View you have some thing else to change that is not readily known outside of whoever wrote the logic first.Option 3 (Entity Framework 5.x +)Use .AsNoTracking() which will disable the proxy objects on the specific query.  If you need to use change tracking this allows a nice intermediate solution to solution #1.
using ldquo data toggle&rdquo html.actionlink,i want use data toggle wiht actionlink like html.actionlink delete users admin new item.userid strrole strrole new id cmddelete href myalert data toggle modal unfortunately doesn't accept how can i use data toggle like standart links,You can't. But there is a simple work-around. What you do is replace the - with a _. During runtime it will get converted to a dash (-). So;Html.ActionLink("Delete" "Users" "Admin" new { item.UserId  strRole = strRole } new { id = "cmdDelete" href="#myAlert"  data_toggle="modal" })
ef 6 system.data.objects.objectcontext error,i recently upgraded from entities framework 5 entities framework 6 alpha 2 i am getting following error method found system.data.objects.objectcontext system.data.entity.infrastructure.iobjectcontextadapter.get objectcontext getting hit when i callif membership.validateuser model.username model.password used work fine before sure why springing error any suggestions,For me updating these below worked:using System.Data.Objects; --&gt; using System.Data.Entity.Core.Objects;using System.Data.Objects.DataClasses; --&gt; using System.Data.Entity.Core.Objects.DataClasses;
access path ldquo etc mono registry&rdquo denied,when i run my asp.net mvc 4 website my fedora 20 workstation xsp4 from monodevelop directly i'm getting following exception system.web.httpruntime.finishwithexception wr mono.webserver.xspworkerrequest e system.web.httpexception gt system.web.httpexception pre application start initialization method start type system.web.webpages.preapplicationstartcode threw exception following error message exception has been thrown target invocation gt system.reflection.targetinvocationexception exception has been thrown target invocation gt system.typeinitializationexception exception thrown type initializer lt module&gt gt system.security.securityexception access given key gt system.unauthorizedaccessexception access path etc mono registry denied.at system.io.directory.createdirectoriesinternal system.string path 0x00064 builddir build build mono-3.4.0/mcs class corlib system.io directory.cs 113 system.io.directory.createdirectory system.string path 0x000a4 builddir build build mono-3.4.0/mcs class corlib system.io directory.cs 80 system.io.directoryinfo.create 0x00000 builddir build build mono-3.4.0/mcs class corlib system.io directoryinfo.cs 141 wrapper remoting invoke check system.io.directoryinfo create system.io.directory.createdirectoriesinternal system.string path 0x00039 builddir build build mono-3.4.0/mcs class corlib system.io directory.cs 98 system.io.directory.createdirectory system.string path 0x000a4 builddir build build mono-3.4.0/mcs class corlib system.io directory.cs 80 microsoftwin32keyhandler ctor microsoft.win32.registrykey rkey system.string basedir boolean volatile 0x0004a builddir build build mono-3.4.0/mcs class corlib microsoft.win32/unixregistryapi cs 136 end inner exception stack trace microsoftwin32keyhandler ctor microsoft.win32.registrykey rkey system.string basedir boolean volatile 0x00057 builddir build build mono-3.4.0/mcs class corlib microsoft.win32/unixregistryapi cs 138 microsoftwin32keyhandler ctor microsoft.win32.registrykey rkey system.string basedir 0x00000 builddir build build mono-3.4.0/mcs class corlib microsoft.win32/unixregistryapi cs 116 microsoft.win32.keyhandler.lookup microsoft.win32.registrykey rkey boolean createnonexisting 0x000cc builddir build build mono-3.4.0/mcs class corlib microsoft.win32/unixregistryapi cs 412 microsoft.win32.unixregistryapi.opensubkey microsoft.win32.registrykey rkey system.string keyname boolean writable 0x00000 builddir build build mono-3.4.0/mcs class corlib microsoft.win32/unixregistryapi cs 836 microsoft.win32.registrykey.opensubkey system.string name boolean writable 0x0001e builddir build build mono-3.4.0/mcs class corlib microsoft.win32/registrykey cs 278 microsoft.win32.registrykey.opensubkey system.string name 0x00000 builddir build build mono-3.4.0/mcs class corlib microsoft.win32/registrykey cs 262 wrapper remoting invoke check microsoft.win32.registrykey opensubkey string microsoft.web.infrastructure.registrykeywrapper.opensubkey system.string name 0x00000 lt filename unknown&gt 0 microsoft.web.infrastructure.killbithelper.getkillbittedversions 0x00000 lt filename unknown&gt 0 microsoft.web.infrastructure.killbithelper.isthisassemblykillbitted 0x00000 lt filename unknown&gt 0 microsoft.web.infrastructure.killbithelper.throwifkillbitisset 0x00000 lt filename unknown&gt 0 microsoft.web.infrastructure.moduleinitializer criticalinitializer.checkkillbit 0x00000 lt filename unknown&gt 0 microsoft.web.infrastructure.moduleinitializer criticalinitializer.initialize 0x00000 lt filename unknown&gt 0 microsoft.web.infrastructure.moduleinitializer.initialize 0x00000 lt filename unknown&gt 0 lt module&gt cctor 0x00000 lt filename unknown&gt 0 end inner exception stack trace system.web.webpages.preapplicationstartcode.start 0x0002b builddir build build mono-3.4.0/external aspnetwebstack src system.web.webpages preapplicationstartcode.cs 40 wrapper managed native system.reflection.monomethod internalinvoke system.reflection.monomethodobjectobject system.exception amp system.reflection.monomethod.invoke system.object obj bindingflags invokeattr system.reflection.binder binder system.object parameters system.globalization.cultureinfo culture 0x00054 builddir build build mono-3.4.0/mcs class corlib system.reflection monomethod.cs 230 end inner exception stack trace system.reflection.monomethod.invoke system.object obj bindingflags invokeattr system.reflection.binder binder system.object parameters system.globalization.cultureinfo culture 0x00069 builddir build build mono-3.4.0/mcs class corlib system.reflection monomethod.cs 238 system.reflection.methodbase.invoke system.object obj system.object parameters 0x00000 builddir build build mono-3.4.0/mcs class corlib system.reflection methodbase.cs 114 system.web.compilation.buildmanager.callprestartmethods 0x0004f builddir build build mono-3.4.0/mcs class system.web system.web.compilation buildmanager.cs 561 end inner exception stack trace system.web.compilation.buildmanager.callprestartmethods 0x0007e builddir build build mono-3.4.0/mcs class system.web system.web.compilation buildmanager.cs 564 system.web.httpapplicationfactory.inittype system.web.httpcontext context 0x00059 builddir build build mono-3.4.0/mcs class system.web system.web httpapplicationfactory.cs 408 end inner exception stack trace builddir build build mono-3.4.0/mcs class system.web system.web httpruntime.cs 674i ve checked registry file folder etc mono i also can't find any subfolder how can i resolve question i'm running fedora 20 latest 3.15.6 kernel mono versionmono jit compiler version 3.4.0 tarball fri jun 27 17 26 36 utc 2014 copyright c 2002-2014 novell inc xamarin inc contributors www.mono project.comtls threadsigsegv altstacknotifications epollarchitecture amd64disabled nonemisc softdebug llvm supported enabled.gc sgen xsp4 versionxsp4.exe 3.0.0.0copyright c 2002-2011 novell inc.minimalistic web server testing system.webi have another setup ubuntu 14.04 lts one works so might something mono version maybe i'm missing some library,You can set MONO_REGISTRY_PATH to point to a directory that you control:bashmkdir my-registryMONO_REGISTRY_PATH=`pwd`/my-registryxsp4
dataannotation required property,first works today failed how i define date property display name date required errormessage date submission required displayformat dataformatstring 0 d applyformatineditmode true datatype datatype.date public datetime tripdate get set has been working past today when i call same apicontroller action httppost public httpresponsemessage savenewreport tripleaderreportinputmodel model firebug reports exceptionmessage property tripdate type whitewater.viewmodels.report.tripleaderreportinputmodel invalid value typed properties marked required must also marked datamember isrequired true recognized required consider attributing declaring type datacontract property datamember isrequired true exceptiontype system.invalidoperationexception what happened isn't those datacontract wcf i am using rest webapi mvc4 can anyone help please update some similar links i have found.mvc 4.0 rtm broke us we don't know how fix rss update again here http response header cache control cacheconnection closecontent length 1846content-typeapplication json charset utf-8datethu 06 sep 2012 17 48 15 gmtexpires 1pragma cacheserver asp.net development server/10.0.0.0x aspnet-version4.0.30319request header accept accept encoding gzip deflateaccept language en usen q 0.5cache-control cacheconnection keep alivecontent length 380content-typeapplication x www form urlencoded charset utf-8cookie aspxauth 1hostlocalhost 39019pragma cachereferer http localhost 39019/report tripleaderuser agent mozilla/5.0 windows nt 6.1 wow64 rv 15.0 gecko/20100101 firefox/15.0x requested withxmlhttprequest update i have found out makeshift solution see answer below anyone understand why works has better solutions please post your answers thank you,I have added a ModelValidationFilterAttribute and made it work:public class ModelValidationFilterAttribute : ActionFilterAttribute{public override void OnActionExecuting(HttpActionContext actionContext){if (!actionContext.ModelState.IsValid){// Return the validation errors in the response body.var errors = new Dictionary&lt;string IEnumerable&lt;string&gt;&gt;();//string key;foreach (KeyValuePair&lt;string ModelState&gt; keyValue in actionContext.ModelState){//key = keyValue.Key.Substring(keyValue.Key.IndexOf('.') + 1);errors[keyValue.Key] = keyValue.Value.Errors.Select(e =&gt; e.ErrorMessage);}//var errors = actionContext.ModelState//.Where(e =&gt; e.Value.Errors.Count &gt; 0)//.Select(e =&gt; new Error//{//Name = e.Key//Message = e.Value.Errors.First().ErrorMessage//}).ToArray();actionContext.Response =actionContext.Request.CreateResponse(HttpStatusCode.BadRequest errors);}}}You can either add [ModelValidation] filter on the actions. Or add it into Global.asax.cs:GlobalConfiguration.Configuration.Services.RemoveAll(typeof(System.Web.Http.Validation.ModelValidatorProvider)v =&gt; v is InvalidModelValidatorProvider);In this way I continue to use the original data annotation.Reference
how include script bundle scripts section view,i have layout rendersection scripts section i have bundle would need included section some views i thought just doing view would work rendering scripts section scripts scripts.render bundles mybundle my view how can i include bundle scripts section layout@scripts.render bundles jquery bundles scripts rendersection scripts required false view@section scripts scripts.render bundles movie,Try below mentioned solution inside the View.View @section Scripts{&lt;script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/bundles/movie")"&gt;&lt;/script&gt;}
how use jwt mvc application authentication authorization,i planned use asp.net identity 2.0 asp.net mvc application authentication authorization.referring below linkjson web token asp.net web api 2 using owini able create access token jwt valid user ie when user logs application i validate user name password i issue json web token valid user.now i read some articles we need pass bearer token headers every request validate user authentication mvc we provide authorize attribute methods needs protected shown below public class usercontroller basehrappcontroller authorize public actionresult index return view how tell my mvc application use jwt validating user i want make my mvc application validate user using jwt whenever user tries access method authorize attribute since i use ajax calls many pages access method present mvc controller i don't think good pass token every ajax request i need help accomplish authentication authorization efficient way using asp.net identity mvc applicaton currently i don't know how use jwt token authentication authorization mvc application,In order for MVC to understand anything about your JWT you basically have to tell it :-) . First install the Jwt package from nuget:Install-Package Microsoft.Owin.Security.JwtThen open up your Startup.cs file and add a new funtion that will tell MVC how to consume JWT. At basics your Startup will look something like:using System.Configuration;using Microsoft.Owin;using Microsoft.Owin.Security;using Microsoft.Owin.Security.DataHandler.Encoder;using Microsoft.Owin.Security.Jwt;using Owin;[assembly: OwinStartupAttribute(typeof(TOMS.Frontend.Startup))]namespace TOMS.Frontend{public partial class Startup{public void Configuration(IAppBuilder app){ConfigureAuth(app);ConfigureOAuthTokenConsumption(app);}private void ConfigureOAuthTokenConsumption(IAppBuilder app){var issuer = ConfigurationManager.AppSettings["Issuer"];var audienceId = ConfigurationManager.AppSettings["AudienceId"];var audienceSecret = TextEncodings.Base64Url.Decode(ConfigurationManager.AppSettings["AudienceSecret"]);// Api controllers with an [Authorize] attribute will be validated with JWTapp.UseJwtBearerAuthentication(new JwtBearerAuthenticationOptions{AuthenticationMode = AuthenticationMode.ActiveAllowedAudiences = new[] { audienceId }IssuerSecurityTokenProviders = new IIssuerSecurityTokenProvider[]{new SymmetricKeyIssuerSecurityTokenProvider(issuer audienceSecret) }});}}}You will notice that I am placing the issuer audienceId and audienceSecret in my Web.config file. (Those values should match the ones on your Resource Server). Also you might want to ensure you have an updated System.IdentityModel.Tokens.Jwt running:Update-package System.IdentityModel.Tokens.JwtWith those set you may decorate your controller Action with the [Authorize] attribute and play ball.Play ball of course meaning fire your request from your javascript to your protected controller action://assuming you placed the token in a sessionStorage variable called tokenKey when it came back from your Authorization Servervar token = sessionStorage.getItem(tokenKey);var headers = {};if (token) {headers.Authorization = 'Bearer ' + token;}$.ajax({type: 'GET'url: 'CONTROLLER/ACTION'headers: headers}).done(function (data) {self.result(data);}).fail(showError);UPDATEBy The way if you wish to add the values in your web.config file in order to retrieve them as I did above; simply add them under the AppSettings:&lt;configuration&gt; &lt;appSettings&gt;&lt;add key="Issuer" value="YOUR_ISSUER" /&gt;&lt;add key="AudienceId" value="YOUR_AUDIENCEID" /&gt;&lt;add key="AudienceSecret" value="YOUR_AUDIENCESECRET" /&gt; &lt;/appSettings&gt;&lt;/configuration&gt;...of course replacing the "values" with your own
typescript error runtime error cannot read property 39 prototype 39 undefined when extending,so i'm getting above error console caused super being undefined when passed extends generated js here some test code can used reproduce error entirety file test.tsmodule test export class test1 public name string public number number constructor separate file i have class inherits from one lt reference path test.ts gt module test export class test2 extends test1 constructor super lt reference path shouldn't needed isn't i added see helped didn't files included correct order test.ts test2.ts via bundleconfig running without optimisations doesn't have any effect i am probably being giant noob i haven't slightest clue what i've messed up all other instances problem i've found online from folks using command line compiler combine multiple typescript files one single file i'm using bundler do even when i don't combine them i get exact same issue.please help me i'm my wits end requested here compiled javascript test.js entirety file test.tsvar test function test var test1 function function test1 return test1 test.test1 test1 test test sourcemappingurl test.js.maptest2.js var extends extends function d b var p b b.hasownproperty p d p b p function this.constructor d prototype b.prototype d.prototype new lt reference path test.ts gt var test function test var test2 function super extends test2 super function test2 super.call return test2 test.test1 test.test2 test2 test test sourcemappingurl test2.js.map,Possible reasons this is happening:Quadruple-check that BundleConfig is concatenating the files in the correct order. This is by far the most common cause of that error.Verify you don't have any top-level export directives in Test.ts. This would cause the file to become an external module and Test1 would no longer be visible.Failing that you should post the emitted JavaScript to the question so we can diagnose what's causing the issue.
web deployment task failed access control list canonical form therefore cannot modified,publishing asp.net mvc 4 application iis 8 my machine giving following error access control list canonical form therefore cannot modified.i am under windows 10 using vs 2013 ultimate.i installed web deploy 3.5 from web platform installer 5 i made sure services working,You can run the following command to fix it command prompticacls.exe C:\inetpub\wwwroot\&lt;VIRTUAL DIRECTORY&gt; /verify /T /C /L /Q// If any entries are reported as being not in canonical order then run:icacls.exe C:\inetpub\wwwroot\&lt;VIRTUAL DIRECTORY&gt; /reset /T /C /L /QSourcepowershell$path = C:\inetpub\wwwroot\&lt;VIRTUAL DIRECTORY&gt;$acl = Get-Acl $pathSet-Acl $path $aclSource
why do i get invalidoperationexception when i try use attribute routing web api 2,i just updated my web api packages my mvc 4 application so i can use attribute routing when i add config.maphttpattributeroutes i get error says object has yet been initialized ensure httpconfiguration.ensureinitialized called application startup code after all other initialization code i remove config.maphttpattributeroutes route attributes everything works did before how can i resolve error here my webapiconfig class public static class webapiconfig public static void register httpconfiguration config config.maphttpattributeroutes config.routes.maphttproute name defaultapi routetemplate api controller id defaults new id routeparameter.optional uncomment following line code enable query support actions iqueryable iqueryable&lt t&gt return type avoid processing unexpected malicious queries use validation settings queryableattribute validate incoming queries more information visit http go.microsoft.com fwlink linkid 279712 config.enablequerysupport error details object has yet been initialized ensure httpconfiguration.ensureinitialized called application startup code after all other initialization code.description unhandled exception occurred during execution current web request please review stack trace more information about error where originated code exception details system.invalidoperationexception object has yet been initialized ensure httpconfiguration.ensureinitialized called application startup code after all other initialization code.source error unhandled exception generated during execution current web request information regarding origin location exception can identified using exception stack trace below.stack trace invalidoperationexception object has yet been initialized ensure httpconfiguration.ensureinitialized called application startup code after all other initialization code system.web.http.routing.routecollectionroute.get subroutes 127 system.web.http.routing.routecollectionroute.getroutedata string virtualpathroot httprequestmessage request 99 system.web.http.webhost.routing.httpwebroute.getroutedata httpcontextbase httpcontext 191 system.web.routing.routecollection.getroutedata httpcontextbase httpcontext 233 system.web.routing.urlroutingmodule.postresolverequestcache httpcontextbase context 60 system.web.routing.urlroutingmodule.onapplicationpostresolverequestcache object sender eventargs e 82 system.web.synceventexecutionstep.system.web.httpapplication.iexecutionstep.execute 136 system.web.httpapplication.executestep iexecutionstep step boolean&amp completedsynchronously 69,Comment out or remove this line of code in WebApiConfig:config.MapHttpAttributeRoutes();
asp.net mvc 4 301 redirects routeconfig.cs,how can i add route routeconfig.cs file asp.net mvc 4 app perform permanent 301 redirect another route i would like certain different routes point same controller action seems 301 would best practice specially seo thanks,I know you specifically asked how to do this on the RouteConfig but you can also accomplish the same using IIS Rewrite Rules. The rules live on your web.config so you don't even need to use IIS to create the rules you can simply add them to the web.config and will move with the app through all your environments (Dev Staging Prod etc) and keep your RouteConfig clean. It does require the IIS Module to be installed on IIS 7 but I believe it comes pre installed on 7.5+.Here's an example:&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;configuration&gt;&lt;system.webServer&gt;&lt;rewrite&gt;&lt;rules&gt;&lt;rule name="Redirect t and c" stopProcessing="true"&gt;&lt;match url="^terms_conditions$" /&gt;&lt;action type="Redirect" url="/TermsAndConditions" /&gt;&lt;/rule&gt;&lt;/rules&gt;&lt;/rewrite&gt;&lt;/system.webServer&gt;&lt;/configuration&gt;
mvc 4 remove ldquo home&rdquo from base route,basically i want make so http website.com home aboutshows up http website.com aboutthe home controller showing up url would make url longer user read.i tried do following routes.maproute name about url defaults new controller home action about id urlparameter.optional could someone help me out please,Try this.  It also makes your URLs lowercase.routes.IgnoreRoute("{resource}.axd/{*pathInfo}");routes.LowercaseUrls = true;routes.MapMvcAttributeRoutes();routes.MapRoute(name: "Default"url: "{controller}/{action}/{id}"defaults: new { controller = "Home" action = "Index" id = UrlParameter.Optional });And in your Home controller:[Route("About")]public ActionResult About(){return View();}
error inheritance security rules violated type 39 system.web.webpages.razor.webpagerazorhost 39,out nowhere my asp.net mvc 4 solution gives me error inheritance security rules violated type system.web.webpages.razor.webpagerazorhost derived types must either match security accessibility base type less accessible.i googled problem everybody says has happened when anyone updates solution from one version another i didn't update my solution just change ide from vs12 vs13 what creates problem full stack trace follows typeloadexception inheritance security rules violated type system.web.webpages.razor.webpagerazorhost derived types must either match security accessibility base type less accessible system.web.webpages.razor.razorbuildprovider.get codecompilertype 0 system.web.compilation.buildprovider.getcompilertypefrombuildprovider buildprovider buildprovider 59 system.web.compilation.buildproviderscompiler.processbuildproviders 209 system.web.compilation.buildproviderscompiler.performbuild 30 system.web.compilation.buildmanager.compilewebfile virtualpath virtualpath 9971917 system.web.compilation.buildmanager.getvpathbuildresultinternal virtualpath virtualpath boolean nobuild boolean allowcrossapp boolean allowbuildinprecompile boolean throwifnotfound boolean ensureisuptodate 299 system.web.compilation.buildmanager.getvpathbuildresultwithnoassert httpcontext context virtualpath virtualpath boolean nobuild boolean allowcrossapp boolean allowbuildinprecompile boolean throwifnotfound boolean ensureisuptodate 103 system.web.compilation.buildmanager.getvirtualpathobjectfactory virtualpath virtualpath httpcontext context boolean allowcrossapp boolean throwifnotfound 165 system.web.compilation.buildmanager.getobjectfactory string virtualpath boolean throwifnotfound 33 system.web.mvc.buildmanagerwrapper.system.web.mvc.ibuildmanager.fileexists string virtualpath 40 system.web.mvc.buildmanagerviewengine.fileexists controllercontext controllercontext string virtualpath 54 microsoft.web.mvc.fixedrazorviewengine.microsoft.web.mvc.iviewengineproxy.fileexists controllercontext controllercontext string virtualpath 42 microsoft.web.mvc.viewenginefixworker1.fileexists controllercontext controllercontext string virtualpath 57 microsoftwebmvc lt gt c displayclass4 lt getpathfromgeneralname&gt b 0 string path 66 system.web.webpages.defaultdisplaymode.getdisplayinfo httpcontextbase httpcontext string virtualpath func2 virtualpathexists 90 systemwebwebpages lt c displayclassb.b 8 idisplaymode mode 66 system.linq.whereselectlistiterator2.movenext 103 system.linq.enumerable.firstordefault ienumerable1 source func2 predicate 94 system.web.webpages.displaymodeprovider.getdisplayinfoforvirtualpath string virtualpath httpcontextbase httpcontext func2 virtualpathexists idisplaymode currentdisplaymode boolean requireconsistentdisplaymode 297 system.web.webpages.displaymodeprovider.getdisplayinfoforvirtualpath string virtualpath httpcontextbase httpcontext func2 virtualpathexists idisplaymode currentdisplaymode 108 microsoft.web.mvc.viewenginefixworker1.getpathfromgeneralname controllercontext controllercontext list1 locations string name string controllername string areaname string cachekey string amp searchedlocations 653 microsoft.web.mvc.viewenginefixworker1.getpath controllercontext controllercontext string locations string arealocations string locationspropertyname string name string controllername string cachekeyprefix boolean usecache string amp searchedlocations 1508 microsoft.web.mvc.viewenginefixworker1.findview controllercontext controllercontext string viewname string mastername boolean usecache 329 microsoft.web.mvc.fixedrazorviewengine.findview controllercontext controllercontext string viewname string mastername boolean usecache 66 systemwebmvc lt gt c displayclassc lt findview&gt b b iviewengine e 68 system.web.mvc.viewenginecollection.find func2 lookup boolean tracksearchedpaths 182 system.web.mvc.viewenginecollection.find func2 cachelocator func2 locator 110 system.web.mvc.viewenginecollection.findview controllercontext controllercontext string viewname string mastername 329 system.web.mvc.viewresult.findview controllercontext context 135 system.web.mvc.viewresultbase.executeresult controllercontext context 230 system.web.mvc.controlleractioninvoker.invokeactionresult controllercontext controllercontext actionresult actionresult 39 systemwebmvc lt c displayclass1a.b 17 74 system.web.mvc.controlleractioninvoker.invokeactionresultfilter iresultfilter filter resultexecutingcontext precontext func1 continuation 388 systemwebmvc lt gt c displayclass1c lt invokeactionresultwithfilters&gt b 19 72 system.web.mvc.controlleractioninvoker.invokeactionresultwithfilters controllercontext controllercontext ilist1 filters actionresult actionresult 303 systemwebmvcasync lt c displayclass2a.b 20 155 systemwebmvcasync lt c displayclass25.b 22 iasyncresult asyncresult 184 system.web.mvc.async.wrappedasyncresult1.end 136 system.web.mvc.async.asyncresultwrapper.end iasyncresult asyncresult object tag 56 system.web.mvc.async.asynccontrolleractioninvoker.endinvokeaction iasyncresult asyncresult 40 systemwebmvc lt gt c displayclass1d lt beginexecutecore&gt b 18 iasyncresult asyncresult 40 systemwebmvcasync lt gt c displayclass4 lt makevoiddelegate&gt b 3 iasyncresult ar 47 system.web.mvc.async.wrappedasyncresult1.end 151 system.web.mvc.async.asyncresultwrapper.end iasyncresult asyncresult object tag 59 system.web.mvc.async.asyncresultwrapper.end iasyncresult asyncresult object tag 40 system.web.mvc.controller.endexecutecore iasyncresult asyncresult 44 systemwebmvcasync lt c displayclass4.b 3 iasyncresult ar 47 system.web.mvc.async.wrappedasyncresult1.end 151 system.web.mvc.async.asyncresultwrapper.end iasyncresult asyncresult object tag 59 system.web.mvc.async.asyncresultwrapper.end iasyncresult asyncresult object tag 40 system.web.mvc.controller.endexecute iasyncresult asyncresult 39 system.web.mvc.controller.system.web.mvc.async.iasynccontroller.endexecute iasyncresult asyncresult 39 systemwebmvc lt gt c displayclass8 lt beginprocessrequest&gt b 3 iasyncresult asyncresult 45 systemwebmvcasync lt gt c displayclass4 lt makevoiddelegate&gt b 3 iasyncresult ar 47 system.web.mvc.async.wrappedasyncresult1.end 151 system.web.mvc.async.asyncresultwrapper.end iasyncresult asyncresult object tag 59 system.web.mvc.async.asyncresultwrapper.end iasyncresult asyncresult object tag 40 system.web.mvc.mvchandler.endprocessrequest iasyncresult asyncresult 40 system.web.mvc.mvchandler.system.web.ihttpasynchandler.endprocessrequest iasyncresult result 38 system.web.callhandlerexecutionstep.system.web.httpapplication.iexecutionstep.execute 9651116 system.web.httpapplication.executestep iexecutionstep step boolean&amp completedsynchronously 155,Go to Web.config and Search for the Assembly name="System.Web.Razor" and comment as follow. &lt;!--&lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" /&gt;&lt;bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" /&gt;  &lt;/dependentAssembly&gt;--&gt;After Commenting save and run the projectit will work fine.
when same user id trying log multiple devices how do i kill session other device,what i want do limit user id only being able log one device time example user id abc logs computer user id abc now tries log from phone what i want happen kill session computer.the spotify app does exactly spotify only allows one user id logged one device time.i m using asp.net membership sqlmembershipprovider forms authentication.i ve experimented session variables i'm sure exactly where go from here,You will have to store the information that someone has logged in into the database. This would allow you to verify if the user already has an existing session. Out of the box the forms authentication module in ASP.NET works with cookies and there's no way for you to know on the server whether the user has cookies on other devices unless of course you store this information on the server.
httpcontext.current resolving mvc 4 project,i am wanting use imageresizer from imageresizing dot net i installed imageresizer mvc via nuget when i go use following code from example loop through each uploaded fileforeach string filekey httpcontext.current.request.files.keys httppostedfile file httpcontext.current.request.files filekey file.contentlength lt 0 continue skip unused file controls resizing settings can specify any 30 commands see http imageresizing.net details destination paths can have variables like lt guid&gt lt ext&gt even santizied version original filename like lt filename za-z0-9 gt imageresizer.imagejob i new imageresizer.imagejob file uploads lt guid&gt lt ext&gt new imageresizer.resizesettings width 2000 height 2000 format jpg mode max i.createparentdirectory true auto create uploads directory.i.build httpcontext.current.request.files.keys foreach resolving i have my usings correct visual studio offers resolve options,Try prefixing it with System.Web.If I try System.Web.HttpContext.Current then Current is there but if I try HttpContext.Current then it doesn't recognize 'Current'. I do have System.Web in my using statements but I still seem to be required to specify it in order to get access to 'Current'.
usage asp.net mvc4 jquery javascript bundles,when i created my project standard mvc4 template alot javascript included e.g jquery obtrusive jquery validate knockout entire jquery ui.how much worth keeping how much throw away i've noticed when you create strongly typed controller create.cshtml view generated calls section scripts scripts.render bundles jqueryval what exactly does file do should i keep should i reference all js files were initially defined bundleconfig.cs can i bother,MVC4 and .Net Framework 4.5 offer bundling and minification techniques that reduce the number of request to the server and size of requested CSS and JavaScript library which improve page loading time in Simple word page performance is increases and page is loaded faster.System.Web.Optimization class offers the bundling and minification techniques that is exist with in the Microsoft.Web.Optimization dll.What is Bundle A bundle is a logical group of files that is loaded with a single HTTP request. You can create style and script bundle for css and javascripts respectively by calling BundleCollection class Add() method with in BundleConfig.cs file.Creating Style Bundle bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.min.css""~/Content/mystyle.min.css"));Creating Script bundlebundles.Add(new ScriptBundle("~/bundles/jqueryval").Include( "~/Scripts/jquery-1.7.1.min.js" "~/Scripts/jquery.validate.min.js" "~/Scripts/jquery.validate.unobtrusive.min.js"));
mvc 3 getting values from appsettings web.config,normal asp.net web forms sites i would use web.configs appsettings add application setting data site however i am able retrieve setting values way when using mvc 3.first off 2 web.config files one root site second listed views area i assume i want put my appsettings information root web.config file correct putting other under views seems produce error stating appsettings can only appear once per web application when i try retrieve c system.configuration.configurationmanager.appsettings settingname i get blank empty null return value what am i doing wrong i should mention i am actually retrieving information class file under models area set specific values model using get set possible i'm allowed do models controller.cs windowsliveconnect.serviceconfiguration wlsc new windowsliveconnect.serviceconfiguration viewbag.clientid sc.clientid returns emptyin webconfig lt appsettings&gt lt add key webpages version value 1.0.0.0 gt lt add key clientvalidationenabled value true gt lt add key unobtrusivejavascriptenabled value true gt lt add key clientid value 0000000040062a3f gt lt add key clientsecret value supersecretpassword gt lt add key redirecturl value http 3a 2f 2fwww.quilnet.com gt lt appsettings&gt model.cs file public class serviceconfiguration private string clientid private string clientsecret private string redirecturl public string clientid get return clientid set clientid system.configuration.configurationmanager.appsettings clientid public string clientsecret get return clientsecret set clientsecret system.configuration.configurationmanager.appsettings clientsecret public string redirecturl get return redirecturl set redirecturl system.configuration.configurationmanager.appsettings redirecturl,Are you ever calling set?  I'm guessing it never gets called so the private variable never gets the value from the config.Try it this way (just retrieve the value in the get no set needed):public string ClientSecret{  get { return System.Configuration.ConfigurationManager.AppSettings["ClientSecret"]; }}
entity framework unintentionalcodefirstexception,i have mvc 4 project set up generated all model classes using entity framework i added class named same myprojectentities class made partial so i can add personalized methods class i added bunch methods query database class builds fine when i call methods though i get unintentionalcodefirstexception i'm sure what did i do wrong,You can also transform the simple connection string to a database-first connection string:public static string BuildEntityConnectionStringFromAppSettings(string nameOfConnectionString){var shortConnectionString = GetConnectionStringByName(nameOfConnectionString);// Specify the provider name server and database. string providerName = "System.Data.SqlClient";// Initialize the connection string builder for the // underlying provider taking the short connection string.SqlConnectionStringBuilder sqlBuilder =new SqlConnectionStringBuilder(shortConnectionString);// Set the properties for the data source.sqlBuilder.IntegratedSecurity = false;// Build the SqlConnection connection string. string providerString = sqlBuilder.ToString();// Initialize the EntityConnectionStringBuilder.EntityConnectionStringBuilder entityBuilder =new EntityConnectionStringBuilder();//Set the provider name.entityBuilder.Provider = providerName;// Set the provider-specific connection string.entityBuilder.ProviderConnectionString = providerString;// Set the Metadata location.entityBuilder.Metadata = String.Format("res://*/Application.{0}.Data.Model.{0}Model.csdl|res://*/Application.{0}.Data.Model.{0}Model.ssdl|res://*/Application.{0}.Data.Model.{0}Model.msl" nameOfConnectionString);return entityBuilder.ToString();}Background: in my project there were many connection strings and we wanted to keep them simple and comparable.
viewmodels viewbag,i'm fairly new mvc4 ef5 asp.net i don't seem able find good answer anywhere.basically should everything done through viewmodel ok also incorporate viewbag say i have method which populates drop down list i am using viewmodel represent output view.am i ok use viewbag.dropdown populatedropdown would better incorporatethis viewmodel creating property hold list&lt selectlistitem&gt created populatedropdown i know how handy viewbag i'm yet see any solid reason use anyone could also offer me some more insight would fantastic,Prefer ViewModels over the ViewBag wherever you can. Create Strongly typed views. It makes your code cleaner less fragile less error-prone and easy to maintain.ViewBags are just dictionaries of dynamically typed objects so you lose:Compile time checkingThe ability to refactor with confidence (you lose the support of the tools)IDE support - such as the ability to navigate to all usagesIntellisenseFor bonus points making extensive use of the ViewBag also misses the point of using the MVC patternI get the impression ViewBags were created to solve an edge-case problem in asp.net and people use them instead of creating view models as was originally intended in the design of the platform to the detriment of their work.with thanks to Why not to use ViewBag heavily?
linq entities does recognize method 39 system.string tostring 39 method mvc 4,i'm working mvc 4 i have update my database using code first migrations what i'm trying do select records from database table insert them dropdown list where user can select one.i have error i don't understand linq entities does recognize method system.string tostring method method cannot translated store expression.controller public actionresult addnew var dba new defaultconnection var query dba.blob.select c gt new selectlistitem value c.id.tostring text c.name companyselected c.id.equals 3 var model new companylist xpto query.asenumerable return view model,What if... you use:Value = c.id + ""instead ofValue = c.id.ToString()EditWith this option you are not retrieving all data from Database
what parameters does stringlength attribute errormessage take,mvc4 template one data annotation attributes used stringlength.for example stringlength 100 errormessage 0 must least 2 characters long minimumlength 6 what parameters 0 1 2 more legal edit more specific i can see from example trial error what possibilities i would like see some hard documentation.i can't find anything about stringlengthattribute documentation,I haven't seen any documentation either but the FormatErrorMessage method for the StringLengthAttribute looks like this:public override string FormatErrorMessage(string name){EnsureLegalLengths();string format = ((this.MinimumLength != 0) &amp;&amp; !base.CustomErrorMessageSet) ? DataAnnotationsResources.StringLengthAttribute_ValidationErrorIncludingMinimum : base.ErrorMessageString;return String.Format(CultureInfo.CurrentCulture format new object[] { name MaximumLength MinimumLength });}
asp.net web api startup.cs doesn 39 t exist,i have asp.net web api solution which doesn't contain startup.cs class i presume because solution wasn't created mvc solution.all code startup defined global.asax.cs file you can see belowpublic class global httpapplication void application start object sender eventargs e code runs application startuparearegistration.registerallareas globalconfiguration.configure webapiconfig.register routeconfig.registerroutes routetable.routes however now i want have support oauth all documentation i've found based startup.cs following classpublic partial class startup public void configuration iappbuilder app configureauth app possible just add new class my solution solution continue working have any conflicts global.asax.cs class edit after i added startup.cs class i can't hit break point i added using system using system.collections.generic using system.linq using system.web using microsoft.owin using owin assembly owinstartup typeof mygame.startup namespace mygame public partial class startup public void configuration iappbuilder app configureauth app any idea what going,If you have installed the Owin packages you can simple create the start up class with:
actionresult vs jsonresult,i have 2 questions what difference between jsonresult actionresult when use jsonresult mvc,ActionResult is an abstract class that an action can return.The helper methods in Controller (eg Json() Content() View() ...) return different concrete classes that inherit ActionResult including JsonResult.You should declare your action methods as returning ActionResult so that they have the freedom to return any concrete result class.
asp.net mvc 4 mobile features,i'm trying out new asp.net mvc 4 mobile features i made simple app just one controller homecontroller one view index i also added mobile version index view views home index.cshtmlviews home index.mobile.cshtmlwhen launching application desktop browser regular view shown expected however when i launch application opera mobile emulator samsung galaxy s i still get regular view mobile version.the user agent string sent from emulator looks like opera/9.80 windows nt 6.1 opera mobi/23731 u en presto/2.9.201 version/11.50any ideas why working updatethanks nemesv i able solve problem here my current solution hopefully cover most mobile scenarios public class mobiledisplaymode defaultdisplaymode private readonly stringcollection useragenstringpartialidentifiers new stringcollection android mobile opera mobi samsung htc nokia ericsson sonyericsson iphone public mobiledisplaymode base mobile contextcondition context gt ismobile context.getoverriddenuseragent private bool ismobile string useragentstring return useragenstringpartialidentifiers.cast lt string&gt any val gt useragentstring.indexof val stringcomparison.invariantcultureignorecase gt 0 i global.asaxdisplaymodeprovider.instance.modes.insert 0 new mobiledisplaymode,a solution for all mobiles without a need to specify all browser names will be like this...  protected void Application_Start(){AreaRegistration.RegisterAllAreas();WebApiConfig.Register(GlobalConfiguration.Configuration);FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);RouteConfig.RegisterRoutes(RouteTable.Routes);BundleConfig.RegisterBundles(BundleTable.Bundles);AuthConfig.RegisterAuth();DisplayModeProvider.Instance.Modes.Insert(0 new DefaultDisplayMode("Mobile") { ContextCondition = (ctx =&gt; ( (ctx.GetOverriddenUserAgent() != null) &amp;&amp; ctx.Request.Browser.IsMobileDevice )) });  } 
register global filters asp.net mvc 4 autofac,i have filter like one public class customfilterattribute actionfilterattribute iauthorizationfilter public mypropery property get set i need run every actions my projecti tried register globalfilters my property doesn't get injectedi tried solution register my filter doesn't get calledany idea how do,You should now use Pete's solution now to do this. Thanks to him for an updated solution.I finally made it here is how to do it:First create your attribute with a constructor with all dependenciespublic class CustomFilterAttribute : ActionFilterAttribute IAuthorizationFilter{private IProperty _property;public CustomFilterAttribute(IProperty repository){_property = property;}.... }Register everything you need in autofacvar builder = new ContainerBuilder();builder.RegisterControllers(Assembly.GetExecutingAssembly());builder.RegisterType&lt;MyProperty&gt;().As&lt;IProperty&gt;();builder.RegisterType&lt;CustomFilterAttribute&gt;().SingleInstance();builder.RegisterFilterProvider();IContainer container = builder.Build();DependencyResolver.SetResolver(new AutofacDependencyResolver(container));Register your global filter like thatpublic static void RegisterGlobalFilters(GlobalFilterCollection filters){filters.Add(new HandleErrorAttribute());filters.Add(DependencyResolver.Current.GetService&lt;CustomFilterAttribute&gt;());}Make sure in your global.asax you register first Autofac and then the global filters.Now you don't need property injection anymore constructor injection will work fine which is a good thing!
could load file assembly 39 system.web.mvc version 3.0.0.0 elmah.mvc issue,locally my mvc 4 asp.net c app runs fine iis 8 windows 8.when deployed windows server 2008 i get error could load file assembly system.web.mvc version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 fileloadexception could load file assembly system.web.mvc version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 elmah.mvc.bootstrap.initialize 0 invalidoperationexception pre application start initialization method initialize type elmah.mvc.bootstrap threw exception following error message could load file assembly system.web.mvc version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 system.web.compilation.buildmanager.invokeprestartinitmethodscore icollection 1 methods func 1 sethostingenvironmentcultures 12881963 system.web.compilation.buildmanager.invokeprestartinitmethods icollection 1 methods 12881672 system.web.compilation.buildmanager.callprestartinitmethods string prestartinitlistpath 240 system.web.compilation.buildmanager.executepreappstart 152 system.web.hosting.hostingenvironment.initialize applicationmanager appmanager iapplicationhost apphost iconfigmappathfactory configmappathfactory hostingenvironmentparameters hostingparameters policylevel policylevel exception appdomaincreationexception 1151 httpexception 0x80004005 pre application start initialization method initialize type elmah.mvc.bootstrap threw exception following error message could load file assembly system.web.mvc version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies located assembly manifest definition does match assembly reference exception from hresult 0x80131040 system.web.httpruntime.firstrequestinit httpcontext context 12881108 system.web.httpruntime.ensurefirstrequestinit httpcontext context 159 system.web.httpruntime.processrequestnotificationprivate iis7workerrequest wr httpcontext context 12722297this happens i select only files needed run application from items deploy drop down project properties package publish web.if i select all files project works fine.i guess elmah reliant older version mvc something how can i fix without having upload all files whats best way problem solve situations like thanks,  There are some procedures using to fix the issue and if the binding redirect in web.config does not solve the problem you can try the following steps to fix it:1) In Visual Studio Solution Explorer tree right-click References under your web project and select Manage NuGet Packages.2) Go to Browse tab and select nuget.org as Package source.3) Search and install the following packages: Ninject Ninject.Web.Common and Ninject.MVC5.It is also better to update the packages particularly Microsoft ASP.NET MVC on Updates tab of Manage NuGet Packages.Hope this helps...
return custom error objects web api,i have web api i'm working using mvc 4 web api framework exception i'm currently throwing new httpresponseexception ie int32.tryparse id out userid throw new httpresponseexception request.createerrorresponse httpstatuscode.badrequest invalid id returns object client simply message invalid id i would like gain further control over response exceptions returning more detailed object something like status 1 substatus 3 message could find user how would i go about doing best way serialize my error object set response message i've also looked modelstatedictionary bit have come up bit hack still clean output var msd new modelstatedictionary msd.addmodelerror status 1 msd.addmodelerror substatus 3 msd.addmodelerror message invalid stuff throw new httpresponseexception request.createerrorresponse httpstatuscode.badrequest msd editlooks like custom httperror what i need seems do trick now make extensible from my business layer var error new httperror invalid stuff status 1 substatus 3 throw new httpresponseexception request.createerrorresponse httpstatuscode.badrequest error,These answers are way more complicated than they need to be.public static class WebApiConfig{public static void Register(HttpConfiguration config){config.Filters.Add(new HandleApiExceptionAttribute());// ...}}public class HandleApiExceptionAttribute : ExceptionFilterAttribute{public override void OnException(HttpActionExecutedContext context){var request = context.ActionContext.Request;var response = new{ //Properties go here...};context.Response = request.CreateResponse(HttpStatusCode.BadRequest response);}}That's all you need.  It's also nice and easy to unit test:[Test]public async void OnException_ShouldBuildProperErrorResponse(){var expected = new { //Properties go here...};//Setupvar target = new HandleApiExceptionAttribute()var contextMock = BuildContextMock();//Acttarget.OnException(contextMock);dynamic actual = await contextMock.Response.Content.ReadAsAsync&lt;ExpandoObject&gt;();Assert.AreEqual(expected.Aproperty actual.Aproperty);}private HttpActionExecutedContext BuildContextMock(){var requestMock = new HttpRequestMessage();requestMock.Properties.Add(HttpPropertyKeys.HttpConfigurationKey new HttpConfiguration());return new HttpActionExecutedContext(){ActionContext = new HttpActionContext{ControllerContext = new HttpControllerContext{Request = requestMock}}Exception = new Exception()};}
json response download ie 7 10,i am trying upload file return json response regarding properties name size etc file works fine all browsers except ie.ie tries download json file i have ie10 testing ie7 10 changing browser mode document mode from debugger.i am using asp.net mvc4 file upload action have httppost attribute i am returning json response using return json myobject here my http headersrequestkey valuerequest post file uploadfile http/1.1accept text html application xhtml xml referer http localhost 63903/accept language en nzuser agent mozilla/5.0 compatible msie 9.0 windows nt 6.1 wow64 trident/5.0 content typemultipart form data boundary 7dc1e71330526accept-encoding gzip deflatehostlocalhost 63903content-length 1377002dnt 1connection keep alivecache control cacheresponsekey valueresponsehttp/1.1 200 okserver asp.net development server/11.0.0.0datetue 18 dec 2012 23 44 19 gmtx aspnet-version4.0.30319x-aspnetmvc version 4.0cache-control privatecontent typeapplication json charset utf-8content-length 154connection closei tried few suggestions so far back square one,Even though this question is a few months old I thought I'll add one more suggestion just in case anyone else is using ASP.NET MVC 3 or 4 and runs into this problem. In my experience when IE attempts to download the Json response as a file all you have to do to correct the problem is to add a reference to jquery.unobtrusive to your view.for example:@Scripts.Render("~/Scripts/jquery.unobtrusive-ajax.min.js")Once this is in place IE will no longer try to download the json response from a JsonResult controller action. No need to change the response type etc..
how do i set default namespaces maphttproute,standard maproute method can pass string collection representing namespaces which search my controller seems have disappeared from maphttproute how does one define default namespaces using new api routing,We had this problem with the Umbraco core so we created our own IHttpControllerSelector the source code can be found here:https://github.com/WebApiContrib/WebAPIContrib/blob/master/src/WebApiContrib/Selectors/NamespaceHttpControllerSelector.csYou can also install nuget package WebAPIContrib which contains NamespaceHttpControllerSelector.To register this you can do this on app startup:GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerSelector)new NamespaceHttpControllerSelector(GlobalConfiguration.Configuration));The implementation is pretty straight forward and only deals with routes that have the "Namespaces" datatoken set which you have to manually set since the MapHttpRoute doesn't support this. Example:var r = routes.MapHttpRoute(name: "DefaultApi"routeTemplate: "api/{controller}/{id}"defaults: new { id = RouteParameter.Optional });r.DataTokens["Namespaces"] = new string[] {"Foo"};The implementation also only caches controllers found with duplicate names since the underlying default implementation removes duplicates from it's cache. 
jsonvalueproviderfactory throws ldquo request too large&rdquo,i'm getting exception json request too large deserialized.it s coming from jsonvalueproviderfactory mvc app currently has custom model binder using json.net which has problem deserializing json data however i'm assuming default json value provider tripping up has some weird limit built may do latest release mvc4 when using previous build mvc4 were problems large amounts json so way change setting s actual json value binder going http haacked.com archive/2011/06/30/whatrsquos difference between value provider model binder.aspxi get impression some custom thing turns dictionary i can't find any source code related any settings i can change alternative valuebinder i could use any other options server error application.the json request too large deserialized.description unhandled exception occurred during execution current web request please review stack trace more information about error where originated code.exception details system.invalidoperationexception json request too large deserialized.source error unhandled exception generated during execution current web request information regarding origin location exception can identified using exception stack trace below.stack trace invalidoperationexception json request too large deserialized system.web.mvc.entrylimiteddictionary.add string key object value 464621 system.web.mvc.jsonvalueproviderfactory.addtobackingstore entrylimiteddictionary backingstore string prefix object value 413 system.web.mvc.jsonvalueproviderfactory.addtobackingstore entrylimiteddictionary backingstore string prefix object value 164 system.web.mvc.jsonvalueproviderfactory.addtobackingstore entrylimiteddictionary backingstore string prefix object value 164 system.web.mvc.jsonvalueproviderfactory.addtobackingstore entrylimiteddictionary backingstore string prefix object value 373 system.web.mvc.jsonvalueproviderfactory.addtobackingstore entrylimiteddictionary backingstore string prefix object value 164 system.web.mvc.jsonvalueproviderfactory.getvalueprovider controllercontext controllercontext 116 systemwebmvc lt gt c displayclassc lt getvalueprovider&gt b 7 valueproviderfactory factory 34 system.linq.whereselectenumerableiterator 2.movenext 151 system.linq.whereselectenumerableiterator 2.movenext 177,For me the maxJsonLength was not being exceeded.  I had to add the following:&lt;appSettings&gt;  &lt;add key="aspnet:MaxJsonDeserializerMembers" value="150000" /&gt;&lt;/appSettings&gt;It worked a treat after that.
asp.net 4.5 custom membership provider configuration throws strange exception duplicate,question already has answer here asp.net method cannot called during application 39 s pre start initialization stage5 answersmy web site initially written mvc 4.0 rc using vs2010 i have just downloaded installed vs2012 upgraded my project dotnet framework 4.5.in my project i'm using custom membershipprovider custom roleprovider vs2010 worked like charm now i'm keeping getting strange configuration error method cannot called during application pre start initialization phase system.web membership providers add line my web.config marked red source problem.i eliminated suspicion problem has something do migration process creating new mvc 4.0 project vs2012 adding my custom membership role providers changing web.config appropriately finding error reappears digging deeper problem i found following information application log exception information exception type invalidoperationexception exception message pre application start initialization method start type webmatrix.webdata.preapplicationstartcode threw exception following error message method cannot called during application pre start initialization phase c users dov.ad documents visual studio 2012 projects mvcapplication2 mvcapplication2 web.config line 52 system.web.compilation.buildmanager.invokeprestartinitmethodscore icollection1 methods func1 sethostingenvironmentcultures system.web.compilation.buildmanager.invokeprestartinitmethods icollection 1 methods system.web.compilation.buildmanager.callprestartinitmethods string prestartinitlistpath system.web.compilation.buildmanager.executepreappstart system.web.hosting.hostingenvironment.initialize applicationmanager appmanager iapplicationhost apphost iconfigmappathfactory configmappathfactory hostingenvironmentparameters hostingparameters policylevel policylevel exception appdomaincreationexception method cannot called during application pre start initialization phase c users dov.ad documents visual studio 2012 projects mvcapplication2 mvcapplication2 web.config line 52 system.web.configuration.configutil.gettype string typename string propertyname configurationelement configelement xmlnode node boolean checkaptcabit boolean ignorecase system.web.configuration.configutil.gettype string typename string propertyname configurationelement configelement boolean checkaptcabit boolean ignorecase system.web.configuration.providershelper.instantiateprovider providersettings providersettings type providertype system.web.configuration.providershelper.instantiateproviders providersettingscollection configproviders providercollection providers type providertype system.web.security.membership.initializesettings boolean initializegeneralsettings runtimeconfig appconfig membershipsection settings system.web.security.membership.initialize system.web.security.membership.get providers webmatrix.webdata.websecurity.preappstartinit webmatrix.webdata.preapplicationstartcode.start method cannot called during application pre start initialization phase.at system.web.compilation.buildmanager.ensuretoplevelfilescompiled system.web.compilation.buildmanager.gettype string typename boolean throwonerror boolean ignorecase system.web.configuration.configutil.gettype string typename string propertyname configurationelement configelement xmlnode node boolean checkaptcabit boolean ignorecase request information request url http localhost 4995 request path user host address 1 user authenticated false authentication type thread account name ad dovthread information thread id 5 thread account name ad dov impersonating false stack trace gt system.web.compilation.buildmanager.invokeprestartinitmethodscore icollection 1methods func1 sethostingenvironmentcultures system.web.compilation.buildmanager.invokeprestartinitmethods icollection1 methods system.web.compilation.buildmanager.callprestartinitmethods string prestartinitlistpath system.web.compilation.buildmanager.executepreappstart system.web.hosting.hostingenvironment.initialize applicationmanager appmanager iapplicationhost apphost iconfigmappathfactory configmappathfactory hostingenvironmentparameters hostingparameters policylevel policylevel exception appdomaincreationexception please helpthank you here web.config lt xml version 1.0 encoding utf-8 gt lt more information how configure your asp.net application please visit http go.microsoft.com fwlink linkid 169433 gt lt configuration&gt lt configsections&gt lt more information entity framework configuration visit http go.microsoft.com fwlink linkid 237468 gt lt section name entityframework type system.data.entity.internal.configfile.entityframeworksection entityframework version 5.0.0.0 culture neutral publickeytoken b77a5c561934e089 requirepermission false gt lt configsections&gt lt connectionstrings&gt lt add name defaultconnection connectionstring data source localdb v11.0 initial catalog aspnet mywebsite-20120820105950 integrated security sspi attachdbfilename datadirectory aspnet mywebsite-20120820105950.mdf providername system.data.sqlclient gt lt add name mywebsitedbcontext providername system.data.sqlclient connectionstring server database mywebsitedb integrated security true gt lt connectionstrings&gt lt appsettings&gt lt add key webpages version value 2.0.0.0 gt lt add key webpages enabled value false gt lt add key preserveloginurl value true gt lt add key clientvalidationenabled value true gt lt add key unobtrusivejavascriptenabled value true gt lt appsettings&gt lt system.web gt lt compilation debug true targetframework 4.5 gt lt httpruntime targetframework 4.5 gt lt authentication mode forms gt lt forms loginurl account login timeout 2880 gt lt authentication&gt lt pages&gt lt namespaces&gt lt add namespace system.web.helpers gt lt add namespace system.web.mvc gt lt add namespace system.web.mvc.ajax gt lt add namespace system.web.mvc.html gt lt add namespace system.web.optimization gt lt add namespace system.web.routing gt lt add namespace system.web.webpages gt lt namespaces&gt lt pages&gt lt profile&gt lt providers&gt lt clear gt lt providers&gt lt profile&gt lt rolemanager defaultprovider mywebsiteroleprovider enabled true gt lt providers&gt lt clear gt lt add name mywebsiteroleprovider type mywebsite.security.mywebsiteroleprovider gt lt providers&gt lt rolemanager&gt lt membership defaultprovider mywebsitemembershipprovider gt lt providers&gt lt clear gt lt add name mywebsitemembershipprovider type mywebsite.security.mywebsitemembershipprovider gt lt providers&gt lt membership&gt lt system.web gt lt system.webserver gt lt validation validateintegratedmodeconfiguration false gt lt handlers&gt lt remove name extensionlessurlhandler isapi-4.0_32bit gt lt remove name extensionlessurlhandler isapi-4.0_64bit gt lt remove name extensionlessurlhandler integrated-4.0 gt lt add name extensionlessurlhandler isapi-4.0_32bit path verb getheadpostdebugputdeletepatchoptions modules isapimodule scriptprocessor windir microsoft.net framework v4.0.30319 aspnet isapi.dll precondition classicmoderuntimeversionv4.0bitness32 responsebufferlimit 0 gt lt add name extensionlessurlhandler isapi-4.0_64bit path verb getheadpostdebugputdeletepatchoptions modules isapimodule scriptprocessor windir microsoft.net framework64 v4.0.30319 aspnet isapi.dll precondition classicmoderuntimeversionv4.0bitness64 responsebufferlimit 0 gt lt add name extensionlessurlhandler integrated-4.0 path verb getheadpostdebugputdeletepatchoptions type system.web.handlers.transferrequesthandler precondition integratedmoderuntimeversionv4.0 gt lt handlers&gt lt system.webserver gt lt runtime&gt lt assemblybinding xmlns urn schemas microsoft com asm.v1 gt lt dependentassembly&gt lt assemblyidentity name system.web.helpers publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.mvc publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-4.0.0.0 newversion 4.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.webpages publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt assemblybinding&gt lt runtime&gt lt entityframework&gt lt defaultconnectionfactory type system.data.entity.infrastructure.localdbconnectionfactory entityframework gt lt parameters&gt lt parameter value v11.0 gt lt parameters&gt lt defaultconnectionfactory&gt lt entityframework&gt lt configuration&gt relevant custom membership i have simplified even though problem still code only validateuser really overridden using system using system.linq using system.web.security using dal.mywebsite namespace mywebsite.security public class mywebsitemembershipprovider membershipprovider lt summary&gt verifies specified user name password exist data source lt summary&gt lt returns&gt true specified username password valid otherwise false lt returns&gt lt param name username gt name user validate lt param&gt lt param name password gt password specified user lt param&gt public override bool validateuser string username string password simplifiedreturn true simplified roleprovider using system using system.linq using system.web.security using dal.mywebsite namespace mywebsite.security public class mywebsiteroleprovider roleprovider readonly mywebsitedbcontext context new mywebsitedbcontext lt summary&gt gets value indicating whether specified user specified role configured applicationname lt summary&gt lt returns&gt true specified user specified role configured applicationname otherwise false lt returns&gt lt param name username gt user name search lt param&gt lt param name rolename gt role search lt param&gt public override bool isuserinrole string username string rolename return true return getrolesforuser username contains rolename lt summary&gt gets list roles specified user configured applicationname lt summary&gt lt returns&gt string array containing names all roles specified user configured applicationname lt returns&gt lt param name username gt user return list roles lt param&gt public override string getrolesforuser string username return new string one two var sm context.salesmanagers.include permissionlevel firstordefault manager gt manager.username username sm null sm.permissionlevel.name sales manager return new salesmanagers sm.permissionlevel.name administrator return new salesmanagers administrators return null,I use my own custom Membership and Role providers in Since MVC2 and ran into this issue when I migrated from MVC3 to 4.I created a new project in MVC4 / .net4.5 EF5 and had the miss-fortune to encounter this error.I managed to fix it by doing the following:Add this to your webconfig appsettings:  &lt;appSettings&gt;&lt;add key="enableSimpleMembership" value="false"/&gt;&lt;add key="autoFormsAuthentication" value="false"/&gt;  &lt;/appSettings&gt;Add your connection string to your memberships and roles providers if not already set:&lt;membership defaultProvider="MyMembershipProvider"&gt;  &lt;providers&gt;&lt;add name="MyMembershipProvider" type="AMS.WebUI.Infrastructure.CustomMembershipProvider" connectionStringName="EFDbContext" /&gt;  &lt;/providers&gt;&lt;/membership&gt;&lt;roleManager defaultProvider="MyRoleprovider"&gt;  &lt;providers&gt;&lt;add name="MyRoleprovider" type="AMS.WebUI.Infrastructure.CustomRoleProvider" connectionStringName="EFDbContext" /&gt;  &lt;/providers&gt;&lt;/roleManager&gt;This resolved the issue for me and I hope it can help you.
asp.net web api returns 404 put only some servers,i have written site uses asp.net mvc web api everything working nicely until i put staging server site works fine my local machine dev web server both dev staging servers windows server 2008 r2.the problem basically site works some api calls use http put method fail staging returning 404 work fine elsewhere.the first problem i came across fixed request filtering still getting 404.i have turned tracing iis get following problem168 module set response error status modulename iis web core notification 16 httpstatus 404 httpreason found httpsubstatus 0 errorcode 2147942402 configexceptioninfo notification map request handler errorcode system cannot find file specified 0x80070002 configs same dev staging matter fact whole site direct copy.why would gets posts work puts,For those of you who do not have WebDAV enabled but are still running into this issue using MVC 4's Web API's...Steve Michelotti documented a solution that worked for me here.At the end of the day I enabled all verbs (verb="*") to the ExtensionlessUrlHandler-Integrated-4.0 handler in my web config.&lt;system.webServer&gt;&lt;validation validateIntegratedModeConfiguration="false" /&gt;&lt;modules runAllManagedModulesForAllRequests="true" /&gt;&lt;handlers&gt;&lt;remove name="ExtensionlessUrlHandler-Integrated-4.0" /&gt;&lt;add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedModeruntimeVersionv4.0" /&gt;&lt;/handlers&gt;&lt;/system.webServer&gt;
convert object json mvc 4,i am converting object json using javascriptserializer i can see json output server code userid 1 username admin ui getting converted something like below amp quot userid&amp quot 1 amp quot username&amp quot amp quot admin&amp quot how escape those amp quot,If you are using the Razor view engine you need to use the Html.Raw method:&lt;script type="text/javascript"&gt;var model = @Html.Raw(Json.Encode(Model));&lt;/script&gt;Notice the usage of the Json.Encode method which is shorter and equivalent to new JavaScriptSerializer().Serialize().
mvc 4 razor adding input type date,i'm wondering how insert lt input type date gt datetime attributes my model now razor creates plain input element type datetime i want make use new input types html5,The input date value format needs the date specified as per http://tools.ietf.org/html/rfc3339#section-5.6 full-date.So I've ended up doing:&lt;input type="date" id="last-start-date" value="@string.Format("{0:yyyy-MM-dd}" Model.LastStartDate)" /&gt;I did try doing it "properly" using:[DataType(DataType.Date)][DisplayFormat(ApplyFormatInEditMode = true DataFormatString = "{0:yyyy-MM-dd}")]public DateTime LastStartDate{get { return lastStartDate; }set { lastStartDate = value; }}with @Html.TextBoxFor(model =&gt; model.LastStartDate new { type = "date" })Unfortunately that always seemed to set the value attribute of the input to a standard date time so I've ended up applying the formatting directly as above.Edit:According to Jorn if you use@Html.EditorFor(model =&gt; model.LastStartDate)instead of TextBoxFor it all works fine.
intellisense views updating from asp.net mvc 4 mvc 5,i just updated mvc4 project using vs2012 mvc5 after having lot issues related dependencies i finally found tutorial straightened things up so builds without issues however i have intellisense any views cshtml files using model html styles nothing works i must have broken reference razor view engine being able parse them properly i have double checked web.configs cannot see anything any ideas thanks,Went through the same agony and was working without intellisense in views for about 3 weeks.Then I finally found it. It started working when I switched webpages setting to version 3 in web.config. So in my web.config this was version 2.0.0.0 after i updated to 3.0.0.0 it started to work  &lt;appSettings&gt;&lt;add key="webpages:Version" value="3.0.0.0"/&gt; ...&lt;/appSettings&gt;Hopfully this was your issue to and will help becouse I feel your pain :)--------------------------------------------------------UPDATE:   For others who are still looking for a fix for this issues in a post-MVC5 update this helped me: In the ~/Views/web.config updating from MVC 5.2.2.0 to 5.2.3.0 using Nuget did not update this line:&lt;host factoryType="System.Web.Mvc.MvcWebRazorHostFactory System.Web.Mvc Version=5.2.2.0 Culture=neutral PublicKeyToken=31BF3856AD364E35" /&gt;Updating 5.2.2.0 to 5.2.3.0 brought Intellisense back to life.  You may have to close the view and re-open it to get the Intellisense to load.
how pass razor value jquery function mvc view,so i'm trying pass parameter javascript function using razor notation mvc-4 view i'm getting syntax error unterminated string constant another way i should writing foreach var item model lt input type button value assign onclick assignbuttonclicked item.id gt i've used same syntax answer https stackoverflow.com a/5179316/1662619edit just syntax error functionality still works,try this &lt;input type="button" value="Assign"   onclick="@("AssignButtonClicked('"+item.ID+"')")"  /&gt;
how can i test custom delegatinghandler asp.net mvc 4 web api,i've seen question come up few places seen any great answers i've had do myself few times i thought i'd post my solution you have anything better please postnb using asp.net mvc 4 beta 2 version web api future versions may change update still works asp.net mvc 4 rc,I was just looking for the same thing but came up with a more concise approach that didn't use http client. I wanted a test to assert the message handler consumed a mocked logging component. I didn't really need the inner handler to function just to "stub" it out to satisfy the unit test. Works for my purpose :)//ARRANGEvar logger = new Mock&lt;ILogger&gt;();var handler= new ServiceLoggingHandler(logger.Object);var request = ControllerContext.CreateHttpRequest(Guid.NewGuid() "http://test"HttpMethod.Get);handler.InnerHandler = new Mock&lt;HttpMessageHandler&gt;(MockBehavior.Loose).Object;request.Content = new ObjectContent&lt;CompanyRequest&gt;(Company.CreateCompanyDTO() new JsonMediaTypeFormatter());var invoker = new HttpMessageInvoker(handler);//ACTvar result = invoker.SendAsync(request new System.Threading.CancellationToken()).Result;//ASSERT&lt;Your assertion&gt;
asp.net identity vs simple membership pros cons,mvc4 we had simple membership my opinion simple membership good identity model tried tested good documentation didn't need fixed simply needed upgrade terms email verification password reset all other stuff we normally have deal when building app however new asp.net identity model seems achieve something sorts vista achieved over xp i mean aspnetuserclaims aspnetlogins could have been bunched together useraliases microsoft should have provided some methods email part my babble having just discussed my opinion based first looks which might deceiving my question isi am trying decide whether i should move from simple membership new asp.net identity since documentation tests asp.net identity model sparse conflicting hard locate using google so can someone experience both please summarize pros cons,As for me they are all quite far from being perfect. Check these out: The good the bad and the ugly of ASP.NET Identity Think twice about using MembershipProvider (andSimpleMembership).So I prefer to use MembershipReboot.EDIT: (May 2018). Brock Allen of MembershipReboot has the following to say on the Project site.  As of 2017 MembershipReboot will no longer be maintained. It has  served its purpose and ASP.NET Identity has finally caught up (and  surpassed) this library in terms of security and functionality. If you  are interested in taking over maintenance let me know.
require.js optimization vs asp.net mvc 4 bundling minification,off lately i saw mvc 4 has included bundling minification several scripts css single link which minifies decreases script load time single configuration require.js r.js also optimization tool available script loading minification can someone tell me which better require.js can used same minification bundling tool load script single file like same mvc 4 i prefer use require.js amd loading so thinking apply concepts mvc 4 minification idea its available require.js single url loading scripts css optimization minification can someone put some ideas lights topic,In my particular case (and many others that I have met previously) there is not much sense in performing additional server-load with separate request just for the purpose of loading 1-3kb script or style file.As mentioned such request uses server resources which are usually limitedIt takes time to load 50-200ms guaranteed lagThe more files you have the more the probability that one of them will fail loading due to connection issueThere is also an overhead with amount of boilerplate code required for wrapping everything into modulesIt looks much more efficient and safe to load even huge 5mb (which is unreal) bundled script once and having it loaded later from cache. By using GZip you will squeeze your 5 mb of text into 200kb of binary data which is far more less than the amount of graphical content an average site uses per request.
same view both create edit mvc4,can we have single razor view both create edit operations yes how do we achieve,I don't recommend it.This should be a rather long answer because there's a lot of things involved in the process request and workflow of a normal MVC GET/POST workflow. I will try to answer your question with the minimum information required and why I do not recommend the use of the same view.First why?You don't have control over the views which may have over-posting;No flexibility;Not reusable views or parts;Hard to maintain the views (one change in the view must be tested on both actions).My suggested approach would be to have different actions/views but share common code:Create both views as normal.You will have duplicated code but not all code is the same for example you may not want to send an ID on the create action this is not directly related to your question but using the same view implies you are also sending the same data and this is not recommended especially for over-posting or mass assignment. More info about mass assignment here (an Architectural Approach is what I'm using here).So let's start from what are you going to receive in your controllers.In this case I used inheritance but it's not the only strategy.Binding modelspublic class UpdateBindingModel : CreateBindingModel {// since we are not using the same binding model // we can have a "real" validation rules on our update binding and view.[Required]public int? Id {get;set;}}public class CreateBindingModel {// no id here prevent overposting.[Required]public string Name {get;set;}[Required]public int? CountryId {get;set;}}That will make sure the data you send to your Create and Edit is the minimum needed and nothing else.Let's then see the View Models that will be sent to the View for this example I will include a List that will be used to select some value but should not be posted (the list) to the controller only the selected value.View modelspublic class CreateViewModel : CreateBindingModel {public IEnumerable&lt;SelectListItem&gt; CountryList {get;set;}}public class UpdateViewModel : UpdateBindingModel {public IEnumerable&lt;SelectListItem&gt; CountryList {get;set;}}As you can see this gives you lot of flexibility but still have some duplicated code (the extra information needed on view model for both views) which can be mitigated in several ways (depending the needs/context):Have an action to retrieve the common data and using @Html.Action("GetCountryList");Use the same View Model aka CreateUpdateViewModel and discarding extra UpdateBindingModel properties in the view but still posting the corresponding model on POST.Having your binding models as properties and select one or the other in the specific view. (better use @Html.EditorFor instead of partials so Model Binder will work with no additional change on code)The controller actions will look like:Controller[HttpGet]public ActionResult Create(){ViewData.Model = new CreateViewModel();return View();}[HttpPost]public RedirectToRouteResult Create(CreateBindingModel binding) {// check valid model state and create datareturn RedirectToAction("Index");}[HttpGet]public ActionResult Update(int id) {var objectToEdit = service.GetObjectToEdit(id);ViewData.Model = new UpdateViewModel(objectToEdit);return View();}[HttpPost]public RedirectToRouteResult Update(UpdateBindingModel binding) {// check valid model state and update datareturn RedirectToAction("Index");}And your views:ViewsUpdate.cshtml&lt;form action="Update"&gt;@Html.HiddenFor(Model.Id);@Html.Partial("EditFieldsPartial")&lt;button&gt;delete&lt;/button&gt; // no delete button on create.&lt;button&gt;create new&lt;/button&gt; // you can have a create new instead of update.&lt;/form&gt;Create.cshtml&lt;form action="Create"&gt;@Html.Partial("EditFieldsPartial")&lt;/form&gt;Note: code is incomplete and didn't use helpers in most cases for brevity and clarity. Do NOT copy paste :D
mvc controller return bad request,i wondering possible return bad request content from mvc controller only way i have been able do throw httpexception however here i can't set any content tried approach some odd reason i am always getting ok back possible do public class somecontroller controller httppost public async task&lt httpresponsemessage&gt foo var response new httpresponsemessage httpstatuscode.badrequest response.content new stringcontent naughty return response,Set the Http status code to bad request and use Content method to send your content along with response.public class SomeController : Controller{[HttpPost]public async Task&lt;ActionResult&gt; Foo(){Response.StatusCode = 400;return Content("Naughty");}}
how manually validate model attributes,i have class called user property namepublic class user required public string name get set i want validate any errors add controller modelstate instantiate another modelstate httppost public actionresult newuser userviewmodel uservm user u new user u.name null something assume uservm valid i want following false because user.name nullif modelstate.isvalid tempdata newusercreated new user created sucessfully return redirecttoaction index return view attributes works userviewmodel i want know how validate class without posting action.how can i accomplish,I made an entry in the Stack Overflow Documentation explaining how to do this: Validation ContextAny validation needs a context to give some information about what is being validated. This can include various information such as the object to be validated some properties the name to display in the error message etc.ValidationContext vc = new ValidationContext(objectToValidate); // The simplest form of validation context. It contains only a reference to the object being validated.Once the context is created there are multiple ways of doing validation.Validate an Object and All of its PropertiesICollection&lt;ValidationResult&gt; results = new List&lt;ValidationResult&gt;(); // Will contain the results of the validationbool isValid = Validator.TryValidateObject(objectToValidate vc results true); // Validates the object and its properties using the previously created context.// The variable isValid will be true if everything is valid// The results variable contains the results of the validationValidate a Property of an ObjectICollection&lt;ValidationResult&gt; results = new List&lt;ValidationResult&gt;(); // Will contain the results of the validationbool isValid = Validator.TryValidatePropery(objectToValidate.PropertyToValidate vc results true); // Validates the property using the previously created context.// The variable isValid will be true if everything is valid// The results variable contains the results of the validationAnd MoreTo learn more about manual validation see:ValidationContext Class DocumentationValidator Class Documentation
entity framework creates plural table name view expects singular table name,i am using mysql net connector 6.4.4.0 entity frame work 4.1 trying create most basic code first implementations.public class mydb dbcontext public dbset&lt vote&gt votes get set my modelpublic class vote public guid id get set public int value get set my home controllerpublic class homecontroller controller mydb db new mydb public actionresult index var model db.votes return view model my strongly typed view using list scaffold model ienumerable&lt namespace.models.vote gt viewbag.title index lt h2 gt index&lt h2 gt lt p&gt html.actionlink create new create lt p&gt lt table&gt lt tr&gt lt th&gt html.displaynamefor model gt model.value lt th&gt lt th&gt lt th&gt lt tr&gt foreach var item model lt tr&gt lt td&gt html.displayfor modelitem gt item.value lt td&gt lt td&gt html.actionlink edit edit new id item.id html.actionlink details details new id item.id html.actionlink delete delete new id item.id lt td&gt lt tr&gt lt table&gt creates table votes mysql all right properties.however throws line foreach var item model exception table mydb.vote doesn't exist edit clarify i actually want table pluralization seems properly create table i'm hoping discover reason singular plural discrepancy none tutorials videos from microsoft plural sight scott gu handle using mysql so i have imagine netconnector might culprit i would also like avoid using table votes attributes basically i'm hoping much out box solution possible.edit2 some more relevant code when i remove tables fail create all together.but view throws exception looking votes vote within global.asaxprotected void application start database.setinitializer new dropcreatedatabasealways&lt mydb&gt arearegistration.registerallareas registerglobalfilters globalfilters.filters registerroutes routetable.routes public class mydbinitializer dropcreatedatabasealways&lt mydb&gt protected override void seed mydbcontext base.seed context,In your myDB context class override the following methodprotected override void OnModelCreating(ModelBuilder modelBuilder){modelBuilder.Conventions.Remove&lt;PluralizingTableNameConvention&gt;();base.OnModelCreating(modelBuilder);}to have it not pluralize the generated table names.
enable rear camera html5,i'm working project mvc asp.net 4 html5 default browser google chrome v29.0.1547.57 i can interact tools take photographs only front camera how i could enable rear camera characteristic tablet samsung galaxy tab 2i hope you can help me,A demo can be found at https://webrtc.github.io/samples/src/content/devices/input-output/. This will allow access to both the front and rear camera.Many demos that you will find rely on the deprecated function:MediaStreamTrack.getSources() As of Chrome 45 and FireFox 39 you will need to use the function:MediaDevices.enumerateDevices()Example:if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {  console.log("enumerateDevices() not supported.");  return;}// List cameras and microphones.navigator.mediaDevices.enumerateDevices()  .then(function(devices) {devices.forEach(function(device) {  console.log(device.kind + ": " + device.label +" id = " + device.deviceId);});  })  .catch(function(e) {console.log(e.name + ": " + e.message);  });Further documentation can be found here: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/enumerateDevices
mvc4 data annotation compare two dates,i have two fields my model required errormessage start date required display name start date displayformat dataformatstring 0d public datetime startdate get set required errormessage end date required display name end date displayformat dataformatstring 0d public datetime enddate get set i require enddate must greater than startdate i tried using compare startdate only works equal operation.what should i use greater than operation,IValidatableObject interface provides a way for an object to be validated which implements IValidatableObject.Validate(ValidationContext validationContext) method. This method always return  IEnumerable object. That's why you should create list of ValidationResult objects and errors are added to this and return. Empty list means to validate your conditions. That is as follows in mvc 4... public class LibProject : IValidatableObject{[Required(ErrorMessage="Project name required")]public string Project_name { get; set; }[Required(ErrorMessage = "Job no required")]public string Job_no { get; set; }public string Client { get; set; }[DataType(DataType.DateErrorMessage="Invalid Date")]public DateTime ExpireDate { get; set; }IEnumerable&lt;ValidationResult&gt; IValidatableObject.Validate(ValidationContext validationContext){List &lt; ValidationResult &gt;  res =new List&lt;ValidationResult&gt;();if (ExpireDate &lt; DateTime.Today){ValidationResult mss=new ValidationResult("Expire date must be greater than or equal to Today");res.Add(mss);}return res; }}
entry point found exception,i have installed vs2012 11.0.50727.1 i opened new mvc4 net 4.5 solution i create simple homecontroller i've wanted start locally i have received very strange error how can resolve what error why happens thank you advance any your help.server error application.entry point found.description unhandled exception occurred during execution current web request please review stack trace more information about error where originated code.exception details system.entrypointnotfoundexception entry point found.source error unhandled exception generated during execution current web request information regarding origin location exception can identified using exception stack trace below.stack trace entrypointnotfoundexception entry point found system.web.mvc.idependencyresolver.getservice type servicetype 0 system.web.mvc.dependencyresolverextensions.getservice idependencyresolver resolver 56 system.web.mvc.singleserviceresolver 1.getvaluefromresolver 44 system.lazy 1.createvalue 180 system.runtime.exceptionservices.exceptiondispatchinfo.throw 22 system.lazy 1.get value 10749357 system.web.mvc.singleserviceresolver 1.get current 15 system.web.mvc.mvcroutehandler.getsessionstatebehavior requestcontext requestcontext 121 system.web.mvc.mvcroutehandler.gethttphandler requestcontext requestcontext 33 system.web.mvc.mvcroutehandler.system.web.routing.iroutehandler.gethttphandler requestcontext requestcontext 10 system.web.routing.urlroutingmodule.postresolverequestcache httpcontextbase context 9709656 system.web.routing.urlroutingmodule.onapplicationpostresolverequestcache object sender eventargs e 82 system.web.synceventexecutionstep.system.web.httpapplication.iexecutionstep.execute 136 system.web.httpapplication.executestep iexecutionstep step boolean&amp completedsynchronously 69version information microsoft net framework version 4.0.30319 asp.net version 4.0.30319.17929,I have converted a project from MVC3+.NET4 to MVC4+.NET4.5 and I receive the exception Entry point was not found when invoking a controller's action.My solution was to insert an assembly binding redirect inside web.config to point at MVC 4 assemblies:  &lt;runtime&gt;&lt;assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1"&gt;  &lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" /&gt;&lt;bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" /&gt;  &lt;/dependentAssembly&gt;  &lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" /&gt;&lt;bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" /&gt;  &lt;/dependentAssembly&gt;  &lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" /&gt;&lt;bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" /&gt;  &lt;/dependentAssembly&gt;&lt;/assemblyBinding&gt;  &lt;/runtime&gt;I don't know the exact cause of the problem maybe some third party library that still references MVC3.
how register areas routing,i created mvc application have 3 different area admin user news my routeconfig.cs file app start directory public class routeconfig public static void registerroutes routecollection routes routes.ignoreroute resource axd pathinfo routes.maproute name default url controller action id defaults new controller home action index id urlparameter.optional namespaces new testmvcapplication.controllers my adminarearegisteration.cs file namespace testmvcapplication.areas.admin public class adminarearegistration arearegistration public override string areaname get return admin public override void registerarea arearegistrationcontext context context.maproute admin default admin controller action id new controller home action index id urlparameter.optional namespaces new testmvcapplication.areas.admin.controllers finally my global.asax.cs file content namespace testmvcapplication note instructions enabling iis6 iis7 classic mode visit http go.microsoft.com linkid 9394801public class mvcapplication system.web.httpapplication protected void application start arearegistration.registerallareas webapiconfig.register globalconfiguration.configuration filterconfig.registerglobalfilters globalfilters.filters routeconfig.registerroutes routetable.routes bundleconfig.registerbundles bundletable.bundles authconfig.registerauth home page my website fully loaded works homepage admin other areas detect route i gave error message server error application.the resource cannot found.description http 404 resource you looking one its dependencies could have been removed had its name changed temporarily unavailable please review following url make sure spelled correctly.requested url admin homehow can i solve problem thanks,From the code provided I can see 2 potential issues:You aren't calling RegisterAllAreasYou don't appear to be overriding the AreaName propertyTry changing your code to:Global.asaxpublic static void RegisterRoutes(RouteCollection routes){routes.IgnoreRoute("{resource}.axd/{*pathInfo}");AreaRegistration.RegisterAllAreas();routes.MapRoute(name: "Default"url: "{controller}/{action}/{id}"defaults: new { controller = "Home" action = "Index" id = UrlParameter.Optional }namespaces: new[] { "TestMvcApplication.Controllers" });}Admin areapublic class AdminAreaRegistration : AreaRegistration{public override string AreaName{get{return "Admin";}}public override void RegisterArea(AreaRegistrationContext context){context.MapRoute("Admin_default""Admin/{controller}/{action}/{id}"new { controller = "Home" action = "Index" id = UrlParameter.Optional });}}
mvc 4 use different model partial view,please bear my noobness i'm super new mvc pattern.what i'm trying doi am building profile information page registered users my site page would list data about user date birth telephone number subscription status etc you get idea i would also like have form let users change password email address personal information same page.my problemthe user data comes from my controller via passed model variable public actionresult profil var model db.users.first e gt e.username websecurity.currentusername return view model output looks like my view lt label&gt phone number lt label&gt model.phonenumber null model.phonenumber else lt span class red gt you haven't set up your phone number yet lt span&gt form which user could change his info would use another model profilemodel so basiccaly i need use two models my view one outputting information one posting data i thought using partial view i can achieve i get error model item passed dictionary type applicense.models.user dictionary requires model item type applicense.models.profilemodel here what my call partial view looks like using html.beginform html.antiforgerytoken html.validationsummary html.partial modifyprofileinfo here partial view model applicense.models.profilemodel lt ul&gt lt li&gt html.labelfor m gt m.email html.editorfor m gt m.email lt li&gt lt li&gt html.labelfor m gt m.confirmemail html.editorfor m gt m.confirmemail lt li&gt lt input type submit value update e mail gt lt ul&gt finally here my profilemodel public class profilemodel required datatype datatype.emailaddress display name new e mail address public string email get set datatype datatype.emailaddress display name confirm new e mail address compare email errormessage e mail confirmation field do match public string confirmemail get set am i missing something what proper way do edit i remade my code reflecting nikola mitev answer now i have another problem here error i get object reference set instance object model.userobject.lastname only occurs when i'm posting changed e mail address values here my viewmodel profilemodel.cs public class profilemodel public user userobject get set required datatype datatype.emailaddress display name új e mail cím public string email get set datatype datatype.emailaddress display name új e mail cím megerősítése compare email errormessage két e mail cím nem egyezik public string confirmemail get set datatype datatype.emailaddress display name e mail cím public string referemail get set controller public actionresult profil var user db.users.first e gt e.username websecurity.currentusername var profileviewmodel new profilemodel userobject user return view profileviewmodel finally here my user.cs model class table userprofile public class user key databasegeneratedattribute databasegeneratedoption.identity public int userid get set column username public string username get set column email required public string email get set column firstname public string firstname get set column lastname public string lastname get set column phonenumber public string phonenumber get set you get idea rest i'm thinking happening because model trying put data each required columns database.edit2 httppost method my profil action httppost authorize validateantiforgerytoken public actionresult profil profilemodel model modelstate.isvalid insert databasereturn content everything good else outputs form errorsreturn view model,There is an overload of @Html.Partial which allows you to send ViewData as defined in your controller - this is the method I generally use for partial views.In your controller define ViewData["mypartialdata"] as ViewDataDictionary. Then in your view@Html.Partial("_ModifyProfileInfo"ViewData["mypartialdata"])
error 22 ldquo ensurebindingredirects&rdquo task could loaded from assembly,i cloned project vs 2013 when i run i get error.error 1 ensurebindingredirects task could loaded from assembly d bmaster packages microsoft.bcl.build.1.0.13 tools microsoftbclbuildtasksdll could load file assembly file d bmaster packages microsoft.bcl.build.1.0.13 tools microsoft.bcl.build.tasks.dll one its dependencies system cannot find file specified confirm lt usingtask&gt declaration correct assembly all its dependencies available task contains public class implements microsoftbuildframeworkitask bargainmaster.web,(For some reason none of the other answers worked for me.)I resolved the issue by doing this:Delete the "packages" folder.Right click on the solution > Manage NuGet Packages or Solution.Downgrade Microsoft.Bcl.Build to a previous version 1.0.14. (Latest stable version at the moment of writing this is 1.0.21)Restore packages and rebuild.
twitter bootstrap nuget package differences,i want bootstrap my mvc 4 application am sure which ones i want need descriptions pretty vague i'm having trouble finding nice breakdown what each versions mean.what main differences similarities which one should i choose,I have been wondering about the same thing it is really confusing with all these different versions and in my opinion it highlights kind of a big problem with NuGet. Maybe they could introduce a "Supported"/"Verified" badge or something?Anyways - the first package has Outercurve as its owner and doesn't come with the Twitter namespace. As Outercurve was funded by Microsoft and only started offering the package as of May 2012 (oddly version 1.0.0 even though Bootstrap had reached at least 2.0.3 by then) I would imagine that this is the "official" MS-version of Bootstrap that now comes included as the default template in Visual Studio.It is worth noting that even though NuGet wants you to update to the latest version 3 the VS 2013RC project templates still come with version 2 markup and the samples will (at least visually) break if updated.
all requests asp.net web api return 404 error,i have asp.net mvc 4 web site includes web api site developed tested visual studio 2012 net 4.5 windows 8 iis express web server development environment everything works.now deployed windows 2008 r2 sp1 server iis 75 net 4.0 4.5 installed application pool running net 4.0 integrated pipeline mode.in production environment mvc web site works web api does every request matter get post i get 404 error i just enter web api url browser ie 9 opened locally server run get request i get 404 page i issue post request from web api client application i get 404 well message http resource found matches request urii've created test website mvc 4 web api well deployed same server web api works web api mvc assemblies have same version number both projects.furthermore i have added web api route debugger application i use valid route like http myserver api order/12 i get following result me means correct route template api controller id has been found correctly parsed controller order id 12 controller derived from apicontroller exists web assembly where also all mvc controllers are.however i don't know what status 000 could mean why route selecting section displayed which normally case even assembly doesn't contain single apicontroller see screenshots linked page above somehow looks like apicontroller found even searched search fails silently.the iis log files don't show anything useful changing various application pool settings using same app pool test real application didn't help.i am currently process remove features configuration settings third party assemblies etc from application bring down small size test application end hoping some point starts work.does somebody have clue what issue could also any debugging logging idea possibly find reason very welcome.editthanks darrel miller tip comments below i have integrated tracing asp.net web api.for get request url http myserver api order/12 i get following development environment successful short form message http localhost 50020/api order/12 category system.web.http.requestcontroller selection instantiation operator defaulthttpcontrollerselector operation selectcontroller message route controller orderid 12 category system.web.http.controllersoperator defaulthttpcontrollerselector operation selectcontroller message order category system.web.http.controllersoperator httpcontrollerdescriptor operation createcontroller message category system.web.http.controllersoperator defaulthttpcontrolleractivator operation create message category system.web.http.controllersoperator defaulthttpcontrolleractivator operation create message myapplication.apicontrollers.ordercontroller category system.web.http.controllersaction selection parameter binding action invocation follows content negotiation formatting result operator defaultcontentnegotiator operation negotiate message typ string moredisposing controller operator ordercontroller operation dispose message category system.web.http.controllersin production environment successful short form message http myserver api order/12 category system.web.http.requestoperator defaulthttpcontrollerselector operation selectcontroller message route controller orderid 12 category system.web.http.controllersthe whole part controller activation action selection parameter binding action invocation missing follows content negotiation formatting error message immediately operator defaultcontentnegotiator operation negotiate message type httperror more,Great resources in this answer however I was getting a 404 for what turned out to be a pretty silly reason:I created a WiX installer for my API projectInstalled it on a test VM (virtual machine)Requested for the a URI that the API should serveBANG! 404 :(It turned out that I had missed packaging and deploying the Global.asax to the root of the virtual directory in my deployment. Adding this here for the benefit of goofies like myself :)
html.actionlink click go previous page,currently link customer businessunit representativedetails representativeid cd3a7263-78f7-41bd-9eb0-12b30bc1059ai have following code view@html.actionlink back list index which takes me linkcustomer businessunit indexbut rather going index page i want go previous page when actionlink clicked which iscustomer businessunit businessunitdetails/c4a86253-a287-441e-b83d-71fbb6a588bchow do i create actionlink directs me previous page something like html.actionlink back details go previous page,If you still want to use ActionLink you can do something like as suggested by JuanPieterse @Html.ActionLink("Back to previous page" null null null new { href = Request.UrlReferrer})You can use action in controller too. See answers to similar question here
mvc model boolean display yes,i have boolean field my model mvc 4 entity framework 4.5i want display field my viewi use call@item.istruebut i got true falsei want get yes when true when false what should i do please,You could use a custom html helper extension method like this:@Html.YesNo(item.IsTrue)Here is the code for this:public static MvcHtmlString YesNo(this HtmlHelper htmlHelper bool yesNo){var text = yesNo ? "Yes" : "No";return new MvcHtmlString(text);}This way you could re-use it throughout the site with a single line of Razor code.
mvc 4 viewmodel being sent back controller,i can't seem figure out how send back entire viewmodel controller validate save function.here my controller httppost public actionresult send bitcointransactionviewmodel transaction here form view lt li class check gt lt h3 gt transaction id&lt h3 gt lt p&gt html.displayfor m gt m.transaction.transactionid lt p&gt lt li&gt lt li class money gt lt h3 gt deposited amount&lt h3 gt lt p&gt model.transaction.amount.tostring btc&lt p&gt lt li&gt lt li class time gt lt h3 gt time&lt h3 gt lt p&gt model.transaction.time.tostring lt p&gt lt li&gt using html.beginform send depositdetails formmethod.post new transaction model html.hiddenfor m gt m.token html.hiddenfor m gt m.transaction.transactionid html.textboxfor m gt m.walletaddress new placeholder wallet address maxlength 34 lt input type submit value send gt html.validationmessage walletaddress new class validation when i click submit conroller contains correct value walletaddress field transaction.transaction.time transaction.transaction.location transaction.transaction.transactionid empty.is way i could pass entire model back controller edit when i dont even receive walletaddress controller everything gets nulled when i remove line alone html.hiddenfor m gt m.transaction.transactionid works i get token property controller when i add back all properties transaction object controller null.here bitcointransactionviewmodel public class bitcointransactionviewmodel public string token get set public string walletaddress get set public bitcointransaction transaction get set public class bitcointransaction public int id get set public bitcointransactionstatustypes status get set public int transactionid get set public decimal amount get set public datetime time get set public string location get set any ideas edit i figured out its marked answer below,The signature of the Send method that the form is posting to has a parameter named transaction which seems to be confusing the model binder. Change the name of the parameter to be something not matching the name of a property on your model:[HttpPost]public ActionResult Send(BitcoinTransactionViewModel model){}Also remove the htmlAttributes parameter from your BeginForm call since that's not doing anything useful. It becomes:@using (Html.BeginForm("Send" "DepositDetails" FormMethod.Post))Any data coming back from the client could have been tampered with so you should only post back the unique ID of the transaction and then retrieve any additional information about it from your data source to perform further processing. You'll also want to verify here that the user posting the data has access to the specified transaction ID since that could've been tampered with as well.
mvc 4 assembly reference missing json.encode,i am trying call json.encode method mvc 4 i'm getting error name json does exist current context.i ve tried adding system.runtime.serialization namespace which has json class particular instance json class doesn't have encode method.what assembly am i missing here here my exact code url url.action deletedefinitionrule editdata companycode lo definitionid html.raw json.encode model.definitionid,To be clear even after you add the correct reference to your project you still have to add this line at the top of your Razor page:@using System.Web.Helpers;
asp.net webapi soap,does webapi support soap i'm trying write soap server mvc4 whilst i can do wcf seems webapi replacing i see ways utilize soap yet just json xml using rest style interface,WEB API is Microsoft's answer to REST based apis. If you want SOAP go with WCF.
use authconfig bundleconfig filterconfig routeconfig webapiconfig app start folder mvc,can you please explain detail use app start folder mvc4 i see folder actually available previous versions mvc 5 files folder authconfigbundleconfigfilterconfigrouteconfigwebapiconfig,App_start folder has been introduced in Mvc4. It contains various configurations files like:BundleConnfig.csFilterConfig.csRouteConfig.cs WebApiConfig.csAuthConfig.csApp_start is not a special folder in MVC nor the class files inside this these are just normal class files with different application configurations(filtering bundling routing etc.) and all these settings gets registered within Application_Start method of Global.asax.cs file.BundleConfig.cs:  This is used to create and register bundles for CSS and JS files. for  eg. jQueryjQueryUIjQuery validationModernizr and Site CSS..Bundling and minification are two techniques to improve request load time by  reducing the number of  requests to the server and reducing the size of   requested assets (such as CSS and JavaScript.)  Microsoft provides assembly Microsoft.Web.Optimization for the samefor eg.Lets create two Bundles. one for style(css) and another for script(javascript)  You can create bundle for css and javascripts respectively by calling  BundleCollection class Add() method within BundleConfig.cs file.STEP 1:  Creating Style Bundlebundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.min.css""~/Content/mystyle.min.css"));Creating Script Bundlebundles.Add(new ScriptBundle("~/bundles/jqueryval").Include( "~/Scripts/jquery-1.7.1.min.js" "~/Scripts/jquery.validate.min.js"));STEP 2:  Above bundles are defined in BundleConfig class as:public class BundleConfig{ public static void RegisterBundles(BundleCollection bundles) { //Adding StyleBundle to BundleCollection bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.min.css" "~/Content/mystyle.min.css")); //Adding ScriptBundle to BundleCollection bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include( "~/Scripts/jquery-1.7.1.min.js" "~/Scripts/jquery.validate.min.js")); }} STEP 3:  Registering BundleAll bundles are registered in the Application_Start event of Global.asax:protected void Application_Start(){ BundleConfig.RegisterBundles(BundleTable.Bundles);}Minification is a technique for removing unnecessary characters (like white space newline tab) and comments from the JavaScript and CSS files to reduce the size in turn improve load time of a web page. for eg. jquery-1.7.1.min.js is the minified js file for jquery-1.7.1 mostly used for production environment for non-prod you can better use non- minified js to have better readability.for eg.A Jquery function in uncompressed js may look something like:( function( global factory ) {"use strict";if ( typeof module === "object" &amp;&amp; typeof module.exports === "object" ) {// For CommonJS and CommonJS-like environments where a proper `window`// is present execute the factory and get jQuery.// For environments that do not have a `window` with a `document`// (such as Node.js) expose a factory as module.exports.// This accentuates the need for the creation of a real `window`.// e.g. var jQuery = require("jquery")(window);// See ticket #14549 for more info.module.exports = global.document ?factory( global true ) :function( w ) {if ( !w.document ) {throw new Error( "jQuery requires a window with a document" );}return factory( w );};} else {factory( global );}same above function in compressed or minified js will look like:!function(ab){"use strict";"object"==typeof module&amp;&amp;"object"==typeof module.exports?module.exports=a.document?b(a!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}FilterConfig.cs:  This is used to create and register global MVC filter: for eg. Authentication filters  (Executed First)Authorization filters Action filters   Result filters   Exception filters   (Exected Last)Note: As mentioned above Filters are executed in an order.  for eg. Authentication Filters introduced with MVC5: public interface IAuthenticationFilter {  void OnAuthentication(AuthenticationContext filterContext);   void OnAuthenticationChallenge(AuthenticationChallengeContext filterContext); }You can create your CustomAuthentication filter attribute by implementing  IAuthenticationFilter as shown below-  public class CustomAuthenticationAttribute : ActionFilterAttribute IAuthenticationFilter  {   public void OnAuthentication(AuthenticationContext filterContext)   { //logic goes here   }  Runs after the OnAuthentication method public void OnAuthenticationChallenge(AuthenticationChallengeContext filterContext) {{//logic goes here } }  Configuring Filters You can configure your own custom filter into your application at  followingthree levels: Global levelBy registering your filter into Application_Start event of  Global.asax.cs file:  protected void Application_Start() {  FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters); }Controller levelBy putting your filter on the top of the controller name: [Authorize(Roles="Admin")] public class AdminController : Controller {  // Logic goes here }Action levelBy putting your filter on the top of the action name: public class UserController : Controller {  [Authorize(Users="User1User2")]  public ActionResult LinkLogin(string provider)  {  // Logic goes here  return View();  } }RouteConfig.cs:  This is used to register various route patterns for your Asp.Net MVC  application. Routing plays an important role in an ASP.NET MVC Application  execution flow it maps request URL to a specific controller action using a   Routing Table. We can define Routing Rules for the engine so that it can map > incoming URLs to appropriate controller. Routing Engine uses routing rules   that are defined in Global.asax file in order to parse the URL and find out   the path of corresponding controller. We can find the following piece of code > in Application_Start() method of Global.asax file.protected void Application_Start() {AreaRegistration.RegisterAllAreas();FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);RouteConfig.RegisterRoutes(RouteTable.Routes); BundleConfig.RegisterBundles(BundleTable.Bundles); }  We can find RouteConfig.cs file under App_Start folder. If we follow  this method in RouteConfig class we will find one default configured  route as follows. Line 3 to 7 is configuring one default route.public static void RegisterRoutes(RouteCollection routes){1.   routes.IgnoreRoute(“{resource}.axd/{*pathInfo}”);2.3.  routes.MapRoute(4.  name: “Default”5.  url: “{controller}/{action}/{id}”6.  defaults: new { controller = “Home” action = “Index” id = UrlParameter.Optional }7.  );}Line 4 : Name for the route. Line 5 : represent URL : Controller  action followed by id (if any). Line 6 : default controller will be  Home default action will be Index and Id is optional.WebApiConfig.cs:This is used to register various WEB API routes like as Asp.Net MVC as well as set any addtional WEB API configurations settings.AuthConfig.cs:Used to register external authentication providersfor eg. if you want to enable users to log in with credentials from an external provider such as Facebook Twitter Microsoft or Google and then integrate some of the functionality from those providers into your web application.
mvc scaffolding does support entity framework 6 later,just upgraded entity framework 6 take look i'm using mvc4.but i recieve message when trying make controller from model context mvc scaffolding does support entity framework 6 later,After a bit more digging  ASP.NET MVC 4 scaffolding does not support Entity Framework 6 or higher. Support of scaffolding of Entity Framework 6 is targeted for the next release of ASP.NET MVC.So looks like ill wait until MVC 5 is properly released 
entity framework code first issues simplemembership userprofile table,you've used asp.net mvc 4 you'll notice default internet application use simplemembership provider all well good works fine.the issue comes default database generation have poco userprofile defined like so table userprofile public class userprofile key databasegeneratedattribute databasegeneratedoption.identity public int userid get set public string username get set which generated like using var context new userscontext context.database.exists create simplemembership database without entity framework migration schema iobjectcontextadapter context objectcontext.createdatabase works fine database generated just fine works without issue however i am change poco like delete database table userprofile public class userprofile key databasegeneratedattribute databasegeneratedoption.identity public int userid get set public string emailaddress get set public string firstname get set public string surname get set public string country get set public string companyname get set only first 2 columns generated userid emailaddress works just fine code wise talking login registration obviously none my other user data stored.am i missing something here surely should generate database based off whole userprofile object,1 - You need to enable migrations prefereably with EntityFramework 5. Use Enable-Migrations in the NuGet package manager.2 - Move your WebSecurity.InitializeDatabaseConnection("DefaultConnection" "UserProfile" "UserId" "EmailAddress" autoCreateTables: true); to your Seed method in your YourMvcApp/Migrations/Configuration.cs classprotected override void Seed(UsersContext context){WebSecurity.InitializeDatabaseConnection("DefaultConnection""UserProfile""UserId""UserName" autoCreateTables: true);if (!Roles.RoleExists("Administrator"))Roles.CreateRole("Administrator");if (!WebSecurity.UserExists("lelong37"))WebSecurity.CreateUserAndAccount("lelong37""password"new {Mobile = "+19725000000" IsSmsVerified = false});if (!Roles.GetRolesForUser("lelong37").Contains("Administrator"))Roles.AddUsersToRoles(new[] {"lelong37"} new[] {"Administrator"});}Now EF5 will be in charge of creating your UserProfile table after doing so you will call the WebSecurity.InitializeDatabaseConnection to only register SimpleMembershipProvider with the already created UserProfile table also tellling SimpleMembershipProvider which column is the UserId and UserName. I am also showing an example of how you can add Users Roles and associating the two in your Seed method with custom UserProfile properties/fields e.g. a user's Mobile (number).3 - Now when you run update-database from Package Manager Console EF5 will provision your table with all your custom propertiesFor additional references please refer to this article with sourcecode: http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/
ldquo outputpath property set project&rdquo when outputpath set,mvc4 i create new build configuration all projects solution i get following when building web csproj alone msbuild company.directory.web.csproj p configuration dev error c windows microsoft.net framework v4.0.30319 microsoft.common.targets 483 9 outputpath property set project company.directory.web.csproj please check make sure you have specified valid combination configuration platform project configuration dev platform anycpu you may seeing message because you trying build project without solution file have specified non default configuration platform doesn't exist project.however outputpath property set lt xml version 1.0 encoding utf-8 gt lt project toolsversion 4.0 defaulttargets build xmlns http schemas.microsoft.com developer msbuild/2003 gt lt propertygroup condition configuration platform dev anycpu gt lt debugsymbols&gt true&lt debugsymbols&gt lt outputpath&gt bin lt outputpath&gt lt defineconstants&gt debug trace&lt defineconstants&gt lt debugtype&gt full&lt debugtype&gt lt platformtarget&gt anycpu&lt platformtarget&gt lt errorreport&gt prompt&lt errorreport&gt lt codeanalysisignorebuiltinrulesets&gt false&lt codeanalysisignorebuiltinrulesets&gt lt codeanalysisignorebuiltinrules&gt false&lt codeanalysisignorebuiltinrules&gt lt deployiisapppath&gt port 80/directory dev&lt deployiisapppath&gt lt propertygroup&gt lt import project msbuildextensionspath msbuildtoolsversion microsoft.common.props condition exists msbuildextensionspath msbuildtoolsversion microsoft.common.props gt lt propertygroup&gt lt configuration condition configuration gt debug&lt configuration&gt lt platform condition platform gt anycpu&lt platform&gt lt productversion&gt lt productversion&gt lt schemaversion&gt 2.0 lt schemaversion&gt lt projectguid&gt 285fbf79-7933-4af9-aaaf-25ee7734aaaa lt projectguid&gt lt projecttypeguids&gt e3e379df-f4c6-4180-9b81-6769533abe47 349c5851-65df-11da-9384-00065b846f21 fae04ec0-301f-11d3-bf4b-00c04f79efbc lt projecttypeguids&gt lt outputtype&gt library&lt outputtype&gt lt appdesignerfolder&gt properties&lt appdesignerfolder&gt lt rootnamespace&gt company.directory.web lt rootnamespace&gt lt assemblyname&gt company.directory.web lt assemblyname&gt lt targetframeworkversion&gt v4.0 lt targetframeworkversion&gt lt mvcbuildviews&gt false&lt mvcbuildviews&gt lt useiisexpress&gt true&lt useiisexpress&gt lt solutiondir condition solutiondir solutiondir undefined gt lt solutiondir&gt lt restorepackages&gt true&lt restorepackages&gt lt propertygroup&gt lt gt bug how can i fix,I had similar error when trying to build from the command line with msbuild.exe. My problem was I was specifying 'Any CPU' when I should have put 'AnyCPU'.
entity framework 5 migrations setting up initial migration single seed database,i have mvc4 app which i've recently upgraded entity framework 5 i am trying move our database over using migrations from development style dropping creating each run.here s what i've done my app start function.protected void application start database.setinitializer new migratedatabasetolatestversion&lt mycontext configuration gt i ran enable migrations command my repositories project i thought would create initial migration file however only file created configurationwhen i delete database creates expected via code first seeds database from configuration file configuration file i changed all add functions addorupdate however runs seed function my configuration file each time website starts duplicates all seed data again again.i imagined would create initial migration file blog i read suggested would i could put seed data didn'tcan anyone explain how i should setting up db code so only seeds once link migrations blog post i followedwhile quite interesting using ef migrate.exe i've since switched using roundhouse running migrations i still use ef scaffold my migrations based models i wrote little console app write migrations out sql files i use roundhouse perform migrations themselves through my rake build scripts little more process involved much more stable than using ef perform migrations fly when application starts up,You could add a migration manually and fill it with whatever seeding code you want? In package manager console run:Add-Migration [Name]You can then edit that file which is created for you in your migrations folder.In my project i actually do seeding like Richard though in the Seed method of the context configuration. I really have no preference. But migrations should be more efficient in that the application doesn't need to check if the rows exist in the database when the application starts. There is just the need to check if the migration has been run which should be faster.internal sealed class Configuration : DbMigrationsConfiguration&lt;MyContext&gt;{public Configuration(){// If you want automatic migrations as well uncomment below.// You can use both manual and automatic at the same time but I don't recommend it.//AutomaticMigrationsEnabled = true;//AutomaticMigrationDataLossAllowed = true;}protected override void Seed(MyContext context){//  This method will be called after migrating to the latest version.//  You can use the DbSet&lt;T&gt;.AddOrUpdate() helper extension method //  to avoid creating duplicate seed data.context.FontFamilies.AddOrUpdate(f =&gt; f.Idnew FontFamily { Id = 1 PcName = "Arial" }new FontFamily { Id = 2 PcName = "Times New Roman" }});I'm using this in Global.asax:public class MvcApplication : System.Web.HttpApplication{protected void Application_Start(){// Any migrations that haven't been applied before will// automatically be applied on Application Pool restartDatabase.SetInitializer&lt;MyContext&gt;(new MigrateDatabaseToLatestVersion&lt;MyContextMyApp.Migrations.Configuration&gt;());}}
installing asp.net mvc 4 server,how does one go about installing asp.net mvc 4 server web platform installer insists installing all kinds visual studio 2010 stuff i don't see server only installation example wants install visual studio 2010 core sp1 visual web developer express,The safest thing to do would be to mark your reference to System.Web.Mvc as "copy local = true" in the reference's properties window. When you do a deploy it will get copied into your bin folder.It feels a bit backwards but there you go.
asp.net mvc 4 async child action,i have asp.net mvc 4 application targeting net 45 one our child actions makes call out web service using httpclient since we're blocking io waiting httpclient response makes great deal sense convert code async await pattern however when mvc 4 attempts execute child action we get following error message httpserverutility.execute blocked while waiting asynchronous operation complete.at first glance appears though mvc 4 does support async await within child action only remaining option run using synchronous code force wait async task.as we all know touching result wait async task asp.net context cause immediate deadlock my async logic wrapped class library so i can't use await blah.configureawait false trick remember tagging async child action using await causes error prevents me from configuring await.i m painted corner point any way consume async methods mvc 4 child action seems like flat out bug workarounds,The format of Stephen's answer didn't quite work for me (maybe it's an async noob problem but hey).I had to do write the async expression in this format to get a strongly typed return value.Person myPerson = Task.Run(() =&gt; asyncMethodWhichGetsPerson(id)).Result;
how integrate mef asp.net mvc 4 asp.net web api,how does one integrate managed extensibility framework mef asp.net mvc 4 asp.net web api same project consider example application mvc controller homecontroller web api controller contactcontroller both have property type icontactrepository which rely mef resolve problem how plug mef mvc web api so instances created via mef.homecontroller lt summary&gt home controller instruct mef create one instance class per importer since what mvc expects lt summary&gt export partcreationpolicy creationpolicy.nonshared public class homecontroller controller import private icontactrepository contactrepository null public actionresult index return view contactrepository.getallcontacts contactcontroller lt summary&gt contact api controller instruct mef create one instance class per importer since what web api expects lt summary&gt export partcreationpolicy creationpolicy.nonshared public class contactcontroller apicontroller import private icontactrepository contactrepo null public contact get return contactrepo.getallcontacts icontactrepository contactrepository public interface icontactrepository contact getallcontacts export typeof icontactrepository public class contactrepository icontactrepository public contact getallcontacts return new contact new contact id 1 name glenn beck new contact id 2 name bill o'riley contact public class contact public int id get set public string name get set,You can take a look at this http://kennytordeur.blogspot.be/2012/08/mef-in-aspnet-mvc-4-and-webapi.html. It explains how to use MEF in an Asp.net MVC 4/Web Api project. There also exists a Nuget package based on this code. That way you can test it very easily and quickly.
asp.net mvc 4 mobile display modes stop working,mobile display modes asp.net mvc 4 stop serving correct views after about hour uptime despite browser overrides correctly detecting overridden mobile device.recycling application pool temporarily solves problem.the new browser override feature correctly allows mobile devices view desktop version site vice versa after about hour uptime mobile views longer rendered mobile device only default desktop razor templates rendered only fix recycle application pool.strangely browser override cookie continues function master layout.cshtml template correctly shows mobile desktop text depending value viewcontext.httpcontext.getoverriddenbrowser ismobiledevice wrong views still being rendered leads me believe problem lies displaymodes.the action question being cached outputcache nostore true duration 0 varybyparam i am using 51degrees mobile detection i don't think should affect overridden mobile detection bug displaymodes feature asp.net mvc 4 beta amp developer preview am i doing something else wrong here my displaymodes setup application start displaymodeprovider.instance.modes.insert 0 new defaultdisplaymode iphone contextcondition context gt context.getoverriddenbrowser ismobiledevice&amp amp context.request.useragent.indexof iphone stringcomparison.ordinalignorecase gt 0 context.request.useragent.indexof android stringcomparison.ordinalignorecase gt 0 context.request.browser.ismobiledevice looks complicated renders home.iphone.cshtml overriding browser ismobile real browser iphone android falls throughto next instance home.mobile.cshtml more basic phones like blackberry displaymodeprovider.instance.modes.insert 1 new defaultdisplaymode mobile contextcondition context gt context.getoverriddenbrowser ismobiledevice,This is a known issue in MVC 4 (Codeplex: #280: Multiple DisplayModes - Caching error will show wrong View). This will be fixed in the next version of MVC.In the meantime you can install a workaround package available here: http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes. For most applications simply installing this package should resolve the issue. For some applications that customize the collection of registered view engines you should make sure that you reference Microsoft.Web.Mvc.FixedRazorViewEngine or Microsoft.Web.Mvc.FixedWebFormViewEngine instead of the default view engine implementations.
mvc bundle client caching,default mvc bundle cached client 1 year possible set client headers manually 1 specific bundle what i need set custom expire headers one my bundles i can't rely v hash querystring because bundle external website won't change url pointing my bundle each time i change it.what i've tried create custom bundle class inherit bundle overridde generatebundleresponse method way i can control server caching only way customizing client caching set bundleresponse.cacheability public private nocache etc i can't set headers manually i have access bundlecontext httpcontext when i set headers context have effect all other requests well,The default behavior of the ASP.NET MVC bundling feature is that if any of the files that compose a bundle change - the query string for that bundle will automatically change - assuming you are using the following in your view's code:@Scripts.Render("bundle name")So this means if you have a new version of a file that is in a bundle the next time your page renders a view that uses that bundle it will send a script tag that the client browser will not found in its cache (since the query string is different).So it seems like this will solve your problem - depends on what you mean by:  and they won't change the url pointing to my bundle each time I change  it
asp.net mvc resource files sometimes incorrectly loaded resoucemanager,overviewwe have multinational website which has localised content various countries serves localisation implemented using standard net resource files.when our web application starts up recycles under load production environment sometimes display wrong resources particular country eg uk site may show french content continues happen until application restarted.detailthe production environment iis 8 windows server 2012.the application implemented asp.net mvc 4.the application decides which locale serving incoming url so www.mysite.com uk english www.mysite.fr french etc.we have implementation ihttpmodule which registered via web.config.in init method module attaches handler beginrequest event.in method incoming url examined thread currentuiculture set appropriate value en gb www.mysite.com fr fr www.mysite.fr etc.this system works well most part however sometimes when application starts up while receiving requests consistently serve wrong content some resource files.it continues do until application restarted may again restart serving incorrect content we have keep restarting until serving correct content which point remain stable.analysiswe have been able reproduce locally development pc throwing requests application during startup using fiddler site showing german content some resource files uk version site.having checked obvious culprits our code currentuiculture set correctly http module remains correct throughout processing request we started look resource manager.with application started incorrect state we examined contents resourcesets property resourcemanager class.this dictionary keyed iso culture code.examining contents en gb we found did actually contain resource strings from german version resource file.it seems sometimes when site starting up while receiving requests resourcemanager class loading wrong resource file culture incorrectly classifying file its dictionary.has anyone else experienced kind behavior anyone aware any workarounds thanks,This sounds like you are having thread safety problems in your handler. When you modify the threads current culture you are modifying it for the current thread that could be processing multiple requests. When the responses are generated another request could have altered the thread current language giving all responses the same language.I have a few suggestions you can start off with:Make sure your handler is NOT reusable. I assume you've made implemented IHttpHandler return false for the IsReusable property since multiple threads should hit it at the same time and a new instance will be created per request.Don't use a handler... A handler is not the ideal solution for something like this The preferred place to set the thread culture is in Application_AcquireRequestState which will be correctly fired for each request without overlapping.Use a routing handler instead: http://adamyan.blogspot.com/2010/07/addition-to-aspnet-mvc-localization.htmlWithout seeing the handler you speak of the rest can only be speculation as to why responses are sharing thread cultures. The problem could easily lie in the dictionary you are using as well which is inherently not thread safe.
can 39 t access added service reference,i've added service reference my mvc4 web project left default namespace servicereference1 when i wanna use namespace visual studio can't find like doesn't exist webservice up working fine what exactly am i doing wrong,This is caused by having the same namespace name as class name.Change your namespace to a name that is not the same name as your class and this will compile
pass objects automapper mapping,i am working automapper some values entity being mapped variables my current method i have tried google avail can i pass set keyvalue pairs object something my mapping have use those values sample post mapping modification comment variable comment class instancevar imagecomment automapper.mapper.map lt data.imagecomment gt comment i want pass imageid so i dont have manually add after mappingimagecomment.imageid imageid,For Automapper 6.0.2:Profile:public class CoreProfile : Profile{public CoreProfile(){CreateMap&lt;Source Dest&gt;().ForMember(d =&gt; d.Fooopt =&gt; opt.ResolveUsing((src dst arg3 context) =&gt; context.Options.Items["Foo"]));}}Mapping:var result = Mapper.Map&lt;PlanResult&gt;(aa opt =&gt; {opt.Items["Foo"] = 2;opt.Items["OtherFoo"] = 1000;});
how cache database tables prevent many database queries asp.net c mvc,i build my own cms using asp.net mvc 4 c i want cache some database data likes localization search categories long tail each category have own sub sub sub categories etc overkill query database all time because can more than 30-100 queries each page request however users update those database rarelyso what best way performance convenience do i know how use outputcache action what i need situation cache html what i need example my own helper html.localization newsletter.tite take value language any another helper interact data etc.i think really sure i need cache data i want only when application invoke first time work cache location i don't have any experience even about,I had to cache common database data like data that were displayed in drop downs. I used MemoryCache. And I used Entity Framework code first and Autofac for dependency injection.Here is part of what I did in my solution might not work for you but it worked for me not perfect though but needs a lot of cleaning up to do.My ICacheManager interface:public interface ICacheManager{ T Get&lt;T&gt;(string key); void Set(string key object data int cacheTime); bool IsSet(string key); void Remove(string key); void Clear();}My CacheManager class:public class CacheManager : ICacheManager{ private ObjectCache Cache {  get  {   return MemoryCache.Default;  } } public T Get&lt;T&gt;(string key) {  return (T)Cache[key]; } public void Set(string key object data int cacheTime) {  if (data == null)  {   return;  }  CacheItemPolicy policy = new CacheItemPolicy();  policy.AbsoluteExpiration = DateTime.Now + TimeSpan.FromMinutes(cacheTime);  Cache.Add(new CacheItem(key data) policy); } public bool IsSet(string key) {  return (Cache.Contains(key)); } public void Remove(string key) {  Cache.Remove(key); } public void Clear() {  foreach (var item in Cache)  {   Remove(item.Key);  } }}An extension class for my caching:public static class CacheExtensions{ public static T Get&lt;T&gt;(this ICacheManager cacheManager string key Func&lt;T&gt; acquire) {  return Get(cacheManager key 60 acquire); } public static T Get&lt;T&gt;(this ICacheManager cacheManager string key int cacheTime Func&lt;T&gt; acquire) {  if (cacheManager.IsSet(key))  {   return cacheManager.Get&lt;T&gt;(key);  }  else  {   var result = acquire();   cacheManager.Set(key result cacheTime);   return result;  } }}And this is how I would use it in my repository class. This method returns a list of all my banks which is displayed in a drop down.public class BankRepository : RepositoryBase&lt;Bank&gt; IBankRepository{ private readonly ICacheManager cacheManager; private const string BanksAllCacheKey = "banks-all"; public BankRepository(IDatabaseFactory databaseFactory ICacheManager cacheManager)  : base(databaseFactory) {  Check.Argument.IsNotNull(cacheManager "cacheManager");  this.cacheManager = cacheManager; } public IEnumerable&lt;Bank&gt; FindAll() {  string key = string.Format(BanksAllCacheKey);  return cacheManager.Get(key () =&gt;  {   var query = from bank in DatabaseContext.Banks   orderby bank.Name   select bank;   return query.ToList();  }); }}I hope this helps. It's a very simple implementation but it works for me. There are many articles online on how to use a caching strategy in ASP.NET MVC. Just Google it.
dataannotation compare two properties,any way using data annotations compare two form field eg confirm email address same before allowing form posted eg can regular expression data annotation use match function reference another property viewmodel,As one possibe option self-validation:Implement an interface IValidatableObject with method Validate where you can put your validation code.public class TestModel : IValidatableObject{public string Email{ get; set; }public string ConfirmEmail { get; set; }public IEnumerable&lt;ValidationResult&gt; Validate(ValidationContext validationContext){if (Email != ConfirmEmail){yield return new ValidationResult("Emails mismatch" new [] { "ConfirmEmail" });}}}Please notice: this is only server-side validation.
webapi method email address parameter returns 404 from httpclient,i have webapi controller method looks like httpget acceptverbs get public httpresponsemessage run string reportname int someid string sometext datetime asofdate string username i have custom route configured specifically action when i navigate my browser web service everything works fine appropriate action executed http localhost xxxx controllername run asdf/1/asdf/07-01-2012/user domain.comhowever when i attempt programatically call web service using httpclient executing get i get 404 error i don't get error when username parameter email address example when username just user everything works fine here sample code var url http localhost xxxx controllername run asdf/1/asdf/07-01-2012/user domain.com var client new system.net.http.httpclient var response client.get url fails here 404 errorresponse.ensuresuccessstatuscode i have tried urlencoding email address luck any advice appreciated,This is because IIS is trying to map special characters. Adding the following to the web.config should fix the issue:&lt;system.webServer&gt;   &lt;modules runAllManagedModulesForAllRequests="true" /&gt;&lt;/system.webServer&gt;More information here: http://www.iis.net/configreference/system.webserver/modules
custom authentication asp.net mvc,i have internal web app being built asp.net 4 we stuck using authentication api built another team user site authenticated successfully site i would like give them access entire site.in asp.net webform days i just used keep custom user object session object null i knew user wasn't authenticated similar improved method mvc i don't want have build my own provider asp.net membership model possible what simplest way doing,You can use Forms Authentication in conjuction with Authorize attibute as followsTo restrict access to a view :Add the AuthorizeAttribute attribute to the action method declaration as shown below[Authorize]public ActionResult Index(){return View();}Configuring Forms Authentication in web.config&lt;authentication mode="Forms"&gt; &lt;forms loginUrl="~/Account/Login" timeout="2880" /&gt;&lt;/authentication&gt;Login Post Action:Set Authentication cookie if user is valid [HttpPost]public ActionResult Login(User model string returnUrl){//Validation codeif (userValid){ FormsAuthentication.SetAuthCookie(username false);}}Log off Action:public ActionResult LogOff(){FormsAuthentication.SignOut();return RedirectToAction("Index" "Home");}
how add assembly web.config file mvc 4,i have mvc 4 project i want add assembly web.config file i don't know where should i put i try any ways i cant find solution.every time i got error you must add reference assembly system.data.entity version 4.0.0.0 culture neutral publickeytoken b77a5c561934e089 my web.config file lt xml version 1.0 encoding utf-8 gt lt more information how configure your asp.net application please visit http go.microsoft.com fwlink linkid 152368 gt lt configuration&gt lt connectionstrings&gt lt add name parsgraphicentities connectionstring metadata res entities.parsgraphic.csdl res entities.parsgraphic.ssdl res entities.parsgraphic.msl provider system.data.sqlclient provider connection string amp quot data source initial catalog parsgraphic integrated security true multipleactiveresultsets true app entityframework&amp quot providername system.data.entityclient gt lt add name defaultconnection connectionstring data source sqlexpress initial catalog aspnet ui.mvc.internetapplication 2012317193118 integrated security true providername system.data.sqlclient gt lt connectionstrings&gt lt appsettings&gt lt add key webpages version value 2.0.0.0 gt lt add key webpages enabled value true gt lt add key preserveloginurl value true gt lt add key clientvalidationenabled value true gt lt add key unobtrusivejavascriptenabled value true gt lt appsettings&gt lt system.web gt lt compilation debug true targetframework 4.0 gt lt authentication mode forms gt lt forms loginurl account login timeout 2880 gt lt authentication&gt lt pages&gt lt namespaces&gt lt add namespace system.web.helpers gt lt add namespace system.web.mvc gt lt add namespace system.web.mvc.ajax gt lt add namespace system.web.mvc.html gt lt add namespace system.web.routing gt lt add namespace system.web.webpages gt lt namespaces&gt lt pages&gt lt profile defaultprovider defaultprofileprovider gt lt providers&gt lt add name defaultprofileprovider type system.web.providers.defaultprofileprovider system.web.providers version 1.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 connectionstringname defaultconnection applicationname gt lt providers&gt lt profile&gt lt membership defaultprovider defaultmembershipprovider gt lt providers&gt lt add name defaultmembershipprovider type system.web.providers.defaultmembershipprovider system.web.providers version 1.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 connectionstringname defaultconnection enablepasswordretrieval false enablepasswordreset true requiresquestionandanswer false requiresuniqueemail false maxinvalidpasswordattempts 5 minrequiredpasswordlength 6 minrequirednonalphanumericcharacters 0 passwordattemptwindow 10 applicationname gt lt providers&gt lt membership&gt lt rolemanager defaultprovider defaultroleprovider gt lt providers&gt lt add name defaultroleprovider type system.web.providers.defaultroleprovider system.web.providers version 1.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 connectionstringname defaultconnection applicationname gt lt providers&gt lt rolemanager&gt lt sessionstate mode inproc customprovider defaultsessionprovider gt lt providers&gt lt add name defaultsessionprovider type system.web.providers.defaultsessionstateprovider system.web.providers version 1.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 connectionstringname defaultconnection applicationname gt lt providers&gt lt sessionstate&gt lt system.web gt lt system.webserver gt lt validation validateintegratedmodeconfiguration false gt lt modules runallmanagedmodulesforallrequests true gt lt system.webserver gt lt runtime&gt lt assemblybinding xmlns urn schemas microsoft com asm.v1 gt lt dependentassembly&gt lt assemblyidentity name system.web.helpers publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.mvc publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-4.0.0.0 newversion 4.0.0.0 gt lt dependentassembly&gt lt dependentassembly&gt lt assemblyidentity name system.web.webpages publickeytoken 31bf3856ad364e35 gt lt bindingredirect oldversion 1.0.0.0-2.0.0.0 newversion 2.0.0.0 gt lt dependentassembly&gt lt assemblybinding&gt lt runtime&gt lt configuration&gt please help methanks,I just experienced the same issue with MVC 4 in VS Express 2012 for Web but while Alfonso's answer was much more helpful than anything else I found on the Web it unfortunately did not clear up the error in my project. After doing some research on the Internet (to no avail) and then just poking around Visual Studio I found the following solution.In addition to adding EntityFramework to my project's references and adding the  tag to my Web.config I also had to take the following steps to satisfy the compiler:Right-click the References folder > Add Reference...Expand Assemblies on the left side of the window and select Framework.Scroll to and select System.Data.Entity in the list of assemblies.Make sure the box next to System.Data.Entity is checked then click 'OK'.Rebuild the project.
objectcontext instance has been disposed can longer used operations require connection reference table,i have two tables customers country use entity framework vs 2012 model class using system using system.collections.generic public partial class customer public int id get set public string firstname get set public string lastname get set public string address get set public string email get set public string phone get set public nullable&lt int&gt countrryid get set public string note get set public virtual country country get set i try build select query get all customers country name i always get below error message,You have lazy loading enabled. So when you try to load reference property there is no way to do it because ObjectContext disposed right after using block.There are two ways to fix it://1. Tell EF to load Country property immediately.using(var db = new jQGridEntities()){customers = db.Customers.Include(c =&gt; c.Country).ToList();}//2. Put return inside using block.using(var db = new jQGridEntities()){customers = db.Customers.ToList();return Json(/*your code*/);}Also you can disable lazy loading but in that case you will get NullReferenceException which can be also fixed using .Include(c =&gt; c.Country).
mvc4 bundling minification angularjs services,way customize way asp.net mvc4 bundling&amp minification feature minifies js files meaning i don't want completely turn off minification just breaks angularjs.since angularjs uses di ioc approach injecting services controllers following function mycontroller scope once minified becomes function mycontroller n normally wouldn't problem angularjs uses parameter names understand which service inject so scope should remain scope well any other parameter angular controllers everything else like local variables etc should minified normally.i can't find any clear documentation how configure mvc4 minification seems rather dumb all nothing so i think i'm missing somethingthanks,if you still want to control what to minify and what not (or if you want to include an already minified version by the plugin vendor) just declare two bundles and only minify one of them on your BundleConfig.cs:var dontMinify = new Bundle("~/bundles/toNotMinify").Include("~/Scripts/xxxxx.js");bundles.Add(dontMinify);var minify = new Bundle("~/bundles/toNotMinify").Include("~/Scripts/yyyyyy.js");minify.Transforms.Add(new JsMinify());bundles.Add(minify);
some official upgrade mvc3 mvc5 guide,non microsoft nuget package allows upgrading mvc3 mvc4.there microsoft article explains how manually migrate from mvc3 mvc4 we can read from article ex locate projecttypeguids element replace e53f8fea-eae0-44a6-8774-ffd645390401 e3e379df-f4c6-4180-9b81-6769533abe47 now something similar allows migrating from mvc3 mvc5 sufficient migrate first from 3 4 re target framework version 4.5 install official mvc nu get,Due to the installation of VS2015 I had to convert my applications from MVC3 on MVC5. I've done this with success :). I hope that the following description will help someone in a similar issue:1) Change .Net Framework to 4.5Project -&gt; Properties -&gt; Application -&gt; Target Framework -&gt; 4.52) Install from Package Manager Console:Install-Package Microsoft.AspNet.Mvc -Version 5.2.33) There is a line in web.config that is:&lt;add key="webpages:Version" value="1.0.0.0" /&gt;Changed it to the version of system.web.webpages.dll in your bin folder:&lt;add key="webpages:Version" value="3.0.0.0" /&gt;4) If your project uses the EntityFramework you have to upgrade it to version 5.x or higher and set dll references to....\net45\EntityFramework.dll....\net45\EntityFramework.SqlServer.dll5) To solve problems like:Error   CS0104  'Compare' is an ambiguous reference between 'System.ComponentModel.DataAnnotations.CompareAttribute' and 'System.Web.Mvc.CompareAttribute'you can add:using CompareAttribute = System.Web.Mvc.CompareAttribute;6) You will probably have to change additional definitions in the web.config and the Views\web.config and find and replace text as shown below:System.Web.Mvc System.Web.Mvc.* System.Web.Razor System.Web.WebPages.Razor change from 3.0.0.0 to 5.0.0.0System.Web.WebPages System.Web.WebPages.* change from 1.0.0.0 to 3.0.0.0That's all :)
ldquo system cannot find file specified&rdquo while creating new mvc4 project,opening visual studio 2012file new project asp.net mvc 4 web application razor view engineerror number 0x80070002visual studio ultimate 2012 amp up dateedit http forums.asp.net post/5373941.aspxdidn t work.any ideas thanks advance,Downloading Asp.net &amp; Web tools solved the problem.AKA: Clicking "Get Everything in One Simple Install"http://www.asp.net/downloads
how upload bundled minified files windows azure cdn,i'm using asp.net mvc 4 bundling minifying features microsoft.aspnet.web.optimization namespace eg styles.render content static css i'd like use combination windows azure cdn.i looked writing custom bundletransform content optimized yet.i also looked parsing uploading optimized stream runtime feels like hack me i don't really like stylescdn.render url.absolutecontent styles.url content static css tostring public static ihtmlstring render string absolutepath get version hashstring versionhash httputility.parsequerystring new uri absolutepath query get v only parse upload cdn version hash differentif versionhash versionhash versionhash versionhash webclient client new webclient stream stream client.openread absolutepath uploadstreamtoazurecdn stream var stylesheetlink string.format lt link href 0 1 2 3 v 4 rel stylesheet type text css gt cdnendpointprotocol cdnendpointurl cdncontainer cdncssfilename versionhash return new htmlstring stylesheetlink how can i upload bundled minified versions automatically my windows azure cdn,Following Hao's advice I Extended Bundle and IBundleTransform.Adding AzureScriptBundle or AzureStyleBundle to bundles;bundles.Add(new AzureScriptBundle("~/bundles/modernizr.js" "cdn").Include("~/Scripts/vendor/modernizr.custom.68789.js"));Results in;&lt;script src="//127.0.0.1:10000/devstoreaccount1/cdn/modernizr.js?v=g-XPguHFgwIb6tGNcnvnI_VY_ljCYf2BDp_NS5X7sAo1"&gt;&lt;/script&gt;If CdnHost isn't set it will use the Uri of the blob instead of the CDN.Classusing System;using System.Text;using System.Web;using System.Web.Optimization;using System.Security.Cryptography;using Microsoft.WindowsAzure;using Microsoft.WindowsAzure.ServiceRuntime;using Microsoft.WindowsAzure.StorageClient;namespace SiegeEngineWebRole.BundleExtentions{public class AzureScriptBundle : Bundle{public AzureScriptBundle(string virtualPath string containerName string cdnHost = ""): base(virtualPath null new IBundleTransform[] { new JsMinify() new AzureBlobUpload { ContainerName = containerName CdnHost = cdnHost } }){ConcatenationToken = ";";}}public class AzureStyleBundle : Bundle{public AzureStyleBundle(string virtualPath string containerName string cdnHost = ""): base(virtualPath null new IBundleTransform[] { new CssMinify() new AzureBlobUpload { ContainerName = containerName CdnHost = cdnHost } }){}}public class AzureBlobUpload : IBundleTransform{public string ContainerName { get; set; }public string CdnHost { get; set; }static AzureBlobUpload(){}public virtual void Process(BundleContext context BundleResponse response){var file = VirtualPathUtility.GetFileName(context.BundleVirtualPath);if (!context.BundleCollection.UseCdn){return;}if (string.IsNullOrWhiteSpace(ContainerName)){throw new Exception("ContainerName Not Set");}var conn = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("DataConnectionString"));var blob = conn.CreateCloudBlobClient().GetContainerReference(ContainerName).GetBlobReference(file);blob.Properties.ContentType = response.ContentType;blob.UploadText(response.Content);var uri = string.IsNullOrWhiteSpace(CdnHost) ? blob.Uri.AbsoluteUri.Replace("http:" "").Replace("https:" "") : string.Format("//{0}/{1}/{2}" CdnHost ContainerName file);using (var hashAlgorithm = CreateHashAlgorithm()){var hash = HttpServerUtility.UrlTokenEncode(hashAlgorithm.ComputeHash(Encoding.Unicode.GetBytes(response.Content)));context.BundleCollection.GetBundleFor(context.BundleVirtualPath).CdnPath = string.Format("{0}?v={1}" uri hash);}}private static SHA256 CreateHashAlgorithm(){if (CryptoConfig.AllowOnlyFipsAlgorithms){return new SHA256CryptoServiceProvider();}return new SHA256Managed();}}}
client side validation custom validation attribute asp.net mvc 4,i have followed some articles tutorials over internet order create custom validation attribute also supports client side validation asp.net mvc 4 website what i have until now requiredifattribute.cs attributeusage attributetargets.property allowmultiple true addedpublic class requiredifattribute validationattribute iclientvalidatable private readonly string condition private string propertyname addedpublic requiredifattribute string condition this.condition condition this.propertyname propertyname added protected override validationresult isvalid object value validationcontext validationcontext propertyinfo propertyinfo validationcontext.objecttype.getproperty this.propertyname addeddelegate conditionfunction createexpression validationcontext.objecttype condition bool conditionmet bool conditionfunction.dynamicinvoke validationcontext.objectinstance conditionmet value null return new validationresult formaterrormessage null return validationresult.success private delegate createexpression type objecttype string expression lambdaexpression lambdaexpression system.linq.dynamic.dynamicexpression.parselambda objecttype typeof bool expression addeddelegate function lambdaexpression.compile return function public ienumerable&lt modelclientvalidationrule&gt getclientvalidationrules modelmetadata metadata controllercontext context var modelclientvalidationrule new modelclientvalidationrule validationtype requiredif errormessage errormessage added modelclientvalidationrule.validationparameters.add param this.propertyname addedreturn new list&lt modelclientvalidationrule&gt modelclientvalidationrule i applied attribute property class like requiredif inapppurchase true inapppurchase errormessage please enter app purchase promotional price added inapppurchase public string inapppurchasepromotionalprice get set public bool inapppurchase get set so what i want do display error message field inapppurchasepromotionalprice required when inapppurchase field true means checked form following relevant code form view lt div class control group gt lt label class control label inapppurchase gt does your app include app purchase lt label&gt lt div class controls gt html.checkboxfor o gt o.inapppurchase html.labelfor o gt o.inapppurchase yes lt div&gt lt div&gt lt div class control group id inapppurchasepromotionalpricediv model.inapppurchase true html.raw style display block html.raw style display none gt lt label class control label inapppurchasepromotionalprice gt app friday promotional price app purchase lt label&gt lt div class controls gt html.textboxfor o gt o.inapppurchasepromotionalprice new title should lowest price tier free 99 just your app friday date lt span class help inline gt html.validationmessagefor o gt o.inapppurchasepromotionalprice lt span&gt lt div&gt lt div&gt code works perfectly when i submit form full post requested server order display message so i created javascript code enable client side validation requiredif.js function validator.addmethod requiredif function value element params var inapppurchase inapppurchase checked inapppurchase return true return false var ischecked param checked ischecked return false return true validator.unobtrusive.adapters.add requiredif param function options options.rules requiredif options.params.param options.messages requiredif options.message jquery proposed way msdn tutorials i have foundof course i have also inserted needed scripts form jquery.unobtrusive ajaxminjsjqueryvalidateminjsjqueryvalidateunobtrusiveminjsrequiredifjsbut client side validation still does work so could you please help me find what am i missing thanks advance,It's worth noting that the [RequiredIf] attribute needs to be added to the second form field in the view model in order for client validation to work.
visual studio 2013 c web project builds ide reports type namespace name xxx could found error,when opening mvc4 c web project visual studio 2013 ide reports error type namespace name could found you missing using directive assembly reference project builds runs without any errors furthermore intellisense does include project namespace.the missing reference files within same project.for example web project namespace webproject.com references controller files webproject.com.models underlined red error above.i have checked following all solution projects configured use same target framework net 4 web.config views folder contains namespace system.web.webpages.razor sectioncleaned rebuilt solutiondeleted all bin obj contentdeleted suo csproj.user files were created vs2010the only way i can get rid errors being reported vs2013 unload reload project.when opened visual studio 2010 i do get problems,I have the same issue.ALthough the project compiles correctly the code editor shows an error The type or namespace name '_' could not be found (are you missing a using directive or an assembly reference).THere is one workaround. Just delete the *.SUO files and re-open the solution. THen for this only Session it works. Unfortunately after closing and reopening the solution the issue is back again. VS 2012 works fine.Seems to be a bug in VS 2013....
migrating from asp.net membership simplemembership mvc4 rtm,new mvc4 rtm internet application templates use simplemembership providers descibed here simplemembershipmy existing mvc website uses asp.membership framework ideally i would like migrate user data tables new simplemembership tables my reasons wanting do cleaner integration rest my database which uses efsupport azure oauth out boxuse latest mvc4 rtm controllers views without needing modifyi've always felt existing membership implementation little bloated what i neededso i wrote sql script today migrate data existing asp.net membership tables new simple membership tables can found heretesting login my mvc 4 website password verification failing i believe simplemembership uses different password algo than old membership framework new passwords created under simplemembership framework look lot longer.so my question since i using hashed password format old asp.net membership providers users original password irretrievable what options do i have get simplemembership provider working.i guessing some options get my users reset passwordsgetting simplemembership provider use same password algo old asp.net membership providers.revert new mvc 4 rtm internet application templates use old asp.net membership providers least desirable options me i would like use simplemembership framework.i would suspect many people also looking migrate existing membership databases new simplemembership provider.any help greatly appreciated.cheersjim,You have access to the plain text password when the user logs in which gives you another option: Keep the old passwords in a separate tableOn login first use the SimpleMembership methodIf that fails check against the old password table using the old hash algorithm (you'll need to make sure the plain text password is still in the context)If that succeeds update the SimpleMembership tables and remove from the old password tableThe users wouldn't need to know about the change and the active users would have a more secure hash. If you'd like to force the security upgrade in the future you can warn the users that their accounts will be deleted after a year of inactivity and just retire the two-step system.
when use redirecttoaction where use redirecttorouteresult,questionin which context i can use redirecttoaction where use redirecttorouteresult i have two action methods like below.approach 1public class actionresulttypescontroller controller public actionresult content return new redirecttorouteresult new routevaluedictionary new action fileresult controller actionresulttypes public actionresult fileresult return view approach 2i could write same code like below well only difference time i used redirecttoaction place redirecttorouteresultpublic class actionresulttypescontroller controller public actionresult content return redirecttoaction fileresult actionresulttypes public actionresult fileresult return view both piece code have common resultant,I am new to MVC but have found that I am using a custom class Authenticate and one of the properties returns a RedirectToRouteResult. This class is not a controller (or derived from it) so RedirectToAction is not available and I would use RedirectToRouteResult. The Property looks like this:public RedirectToRouteResult NotLoggedInPage{get{return new RedirectToRouteResult(new RouteValueDictionary(new { action = "LoggedOut" controller = "Login" }));}}
unit work amp generic repository entity framework 5,i'm using asp.net mvc 4 entity framework 5 i have model classes entity maps map existing tables those model classes all setup fine works great.now i want mock i created unit work takes datacontext uses generic repository upon i built services able get data from many repositories once only needing have one instance datacontext also works great.now problem i want test services mock data when i create unit work instance i want able insert datacontext mocked instead real datacontext.i tried create icontext interface let real mocked datacontext implement ran problems dbset i tried use idbset creating fakedbset without success i also read internet mocking context idbset using fakedbset bad approach.do you have any idea what would best way achieve what i have now behavior i would like keep would really like able mock data from model classes datacontext.i m aware entity framework already comes unit work behavior you don't need add extra behavior top i wanted wrap inside another class keeps track all repositories called unitofwork class edit i wrote two articles explaining my solution both linq entity framework.http gaui.is how mock datacontext linq http gaui.is how mock datacontext entity framework here my code irepository.cspublic interface irepository&lt t&gt where t class void add t entity void delete t entity void update t entity t getbyid long id ienumerable&lt t&gt all ienumerable&lt t&gt find expression&lt func&lt t bool&gt gt predicate iunitofwork.cspublic interface iunitofwork idisposable irepository&lt tentity&gt getrepository&lt tentity&gt where tentity class void save repository.cspublic class repository&lt t&gt irepository&lt t&gt where t class private readonly idbcontext context private readonly idbset&lt t&gt dbset public repository idbcontext context context context dbset context.set lt t&gt public virtual void add t entity dbset.add entity public virtual void delete t entity var entry context.entry entity entry.state system.data.entitystate.deleted public virtual void update t entity var entry context.entry entity dbset.attach entity entry.state system.data.entitystate.modified public virtual t getbyid long id return dbset.find id public virtual ienumerable&lt t&gt all return dbset public ienumerable&lt t&gt find expression&lt func&lt t bool&gt gt predicate return dbset.where predicate unitofwork.cspublic class unitofwork&lt tcontext&gt iunitofwork where tcontext idbcontext new private readonly idbcontext ctx private dictionary&lt type object&gt repositories private bool disposed public unitofwork ctx new tcontext repositories new dictionary&lt type object&gt disposed false public irepository&lt tentity&gt getrepository&lt tentity&gt where tentity class repositories.keys.contains typeof tentity return repositories typeof tentity irepository&lt tentity&gt var repository new repository&lt tentity&gt ctx repositories.add typeof tentity repository return repository public void save ctx.savechanges public void dispose dispose true gc.suppressfinalize protected virtual void dispose bool disposing disposed disposing ctx.dispose disposed true exampleservice.cspublic class exampleservice private irepository&lt example&gt m repo public exampleservice iunitofwork uow m repo uow.getrepository lt example&gt public void add example example m repo.add example public ienumerable&lt example&gt getall return m repo.all examplecontroller.cspublic ienumerable&lt example&gt getall create unit work objectiunitofwork uow new unitofwork&lt appdatacontext&gt create service unit work attached datacontextexampleservice service new exampleservice uow return service.getall,You can follow the following link it is very helpful.Generic Repository Pattern in MVC3 Application with Entity FrameworkEntity Framework and Data Patterns
restoring delete files visual studio 2012,i have accidentally removed part my project thinking i temp folder.it asp.net mvc 4 application.i don t have tfs any other program monitoring my filesystem.i had just publish my application all i have left bunch compiled files js css images.is any tool from microsoft i could perform reverse engineering does vs2012 keep track files so i could restore,Open folder/solution of the deleted items in 'Windows File Explorer'Press Ctrl+z (undo). This will instruct windows to undo the last actions on the folderGo to the Visual Studio solution againClick 'Show All files' icon on Solutions explorerClick RefreshInclude the files againPS. Its always safer to use a version control system to make sure you can retrieve not just the file itself but any previously checked-in state. http://www.incredible-web.com/blog/revision-control-systems/
format datetime kendo ui grid using asp.net mvc wrapper,i want build kendo ui grid format date dd mm yyyy however all questions i found about were resolved code format 0 d so i have tried like code below gridboundcolumnbuilder&lt tmodel&gt builder par.bound field.name switch field.type.type case ctype.boolean builder builder.clienttemplate string.format lt input type checkbox 0 checked checked disabled disabled gt lt input&gt field.name break case ctype.datetime builder builder.format 0 d break case ctype.decimal case ctype.double builder builder.format 0 0.00 break another formats works fine just datetime do works i had result datetime date 1377020142000,.Format("{0:" + System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern + "}");There may be some other options in System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat that might work for you if that is not what you want.
field date must date mvc chrome duplicate,question already has answer here jquery datepicker chrome6 answersi'm doing simple mvc4 internet application which allows add some items categories.here what i've done so far.i ve datepicker mvc view script datepicker like lt script src url.content scripts jquery-1.7.1.min js type text javascript gt lt script&gt lt script src url.content scripts jquery ui-1.8.20.min js type text javascript gt lt script&gt scripts.render bundles jqueryval lt script type text javascript gt function dtitemduedate datepicker dateformat dd mm yy'mindate 0 lt script&gt my model property displayname item duedate required displayformat dataformatstring 0 dd mm yyyy applyformatineditmode true datatype datatype.datetime public datetime dtitemduedate get set public char charcompleted get set my view i've done html.textboxfor m gt m.dtitemduedate html.validationmessagefor m gt m.dtitemduedate error like field item duedate must date.the strange does work ie mozilla doesnot work chrome.i found many posts so none them helpany ideas suggestions,Without changing jquery.validate.js you can use the code snip below in $(document).ready():jQuery.validator.methods.date = function (value element) {var isChrome = /Chrome/.test(navigator.userAgent) &amp;&amp; /Google Inc/.test(navigator.vendor);if (isChrome) {var d = new Date();return this.optional(element) || !/Invalid|NaN/.test(new Date(d.toLocaleDateString(value)));} else {return this.optional(element) || !/Invalid|NaN/.test(new Date(value));}};
asp.net help pages default home page,i want go http myserver able get help pages default home page so first thing guest http myserver should see help page.i have default route set up like public static void registerroutes routecollection routes routes.ignoreroute resource axd pathinfo routes.maproute name default url controller action id defaults new controller home action index id urlparameter.optional i have my help page area registration set up like public override void registerarea arearegistrationcontext context context.maproute helppage default doc action apiid new controller help action index apiid urlparameter.optional helppageconfig.register globalconfiguration.configuration when i change routeconfig controller help i get view index its master found view engine supports searched locationswhen i change help page route controller action apiid my attributeroutes stop working.is some easy way make asp.net help pages default home page,For those who search where to add the route with the current version of the WebApi and of the NuGet package you have to search for the file named "HelpPageAreaRegistration" in the Area folder added by NuGet.Here is mine once it was coded to have the help page with WebApi has default web page.public class HelpPageAreaRegistration : AreaRegistration{public override string AreaName{get{return "HelpPage";}}public override void RegisterArea(AreaRegistrationContext context){context.MapRoute("HelpPage_Default""Help/{action}/{apiId}"new { controller = "Help" action = "Index" apiId = UrlParameter.Optional });context.MapRoute("Help Area"""new { controller = "Help" action = "Index" });HelpPageConfig.Register(GlobalConfiguration.Configuration);}}
could load file assembly 39 system.web.http.webhost version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 39,visual studio 2012 i created asp.net mvc 4 project where target framework net framework 45 when i deployed my project web server gave following error could load file assembly system.web.http.webhost version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies system cannot find file specified.description unhandled exception occurred during execution current web request please review stack trace more information about error whereit originated code exception details system.io.filenotfoundexception could load file assembly system.web.http.webhost version 4.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies system cannot find file specified.source error version information microsoft net framework version 4.0.30319 asp.net version 4.0.30319.34237,I had the same issue today during deployment. I was able to fix it by marking the assembly to be copied to the deployment file.In order to do this in my Visual Studio project select the System.Web.Http.Webhost assembly in your references and alter the 'Copy Local' property to True. I had to repeat this for a few other assemblies that were missing.Thanks to this website for the tips - http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx/
model binding list mvc 4,pattern bind ilist items view i seem having issues httppost i know phil haack wrote nice article dated he said might have fix mvc 4,A clean solution could be create a generic class to handle the list so you don't need to create a different class each time you need it.public class ListModel&lt;T&gt;{public List&lt;T&gt; Items { get; set; }public ListModel(List&lt;T&gt; list) {Items = list;}}and when you return the View you just need to simply do:List&lt;customClass&gt; ListOfCustomClass = new List&lt;customClass&gt;();//Do as needed...return View(new ListModel&lt;customClass&gt;(ListOfCustomClass));then define the list in the model:@model ListModel&lt;customClass&gt;and ready to go:@foreach(var element in Model.Items) {  //do as needed...}
executecore base class fired mvc 4 beta,i have base controller class all my other controller inherits baseclass like thisall works great mvc3 test again today really works seems executecore basecontroller fired any more mvc 4 beta.any idea anything huge has changed under hood thanks very much.public class basecontroller controller private string mydata public string mydata get return mydata protected override void executecore mydata i am doing something base.executecore public class homecontroller basecontroller public actionresult index viewbag.mydata mydata doing something value baseclassreturn view,I voted nemesv answer because it gave me an explanation about what is going on. I have MVC3 and MVC4 projects and this this was driving me mad.However I have another solution. Override Initialize method in the Controller class:public abstract class BaseController : Controller{  protected override void Initialize(System.Web.Routing.RequestContext requestContext)  { string languageId = "en"; try{   // all your code here. You have access to all the context information// like querystring values:   string languageId = requestContext.HttpContext.Request.QueryString["lang"];   Thread.CurrentThread.CurrentUICulture =   CultureInfo.CreateSpecificCulture(languageId); } finally {   Thread.CurrentThread.CurrentUICulture =  CultureInfo.CreateSpecificCulture(languageId); } base.Initialize(requestContext);  }}Then in your project just make your controllers inherit from BaseController and that is all BaseController call works automatically passing the request context. It works for both MVC3 and MVC4.
get list users assigned roles asp.net identity 2.0,i have drop down list box which lists roles i want get list users having role i mean list users administrator role canedit role here my code public iqueryable&lt microsoft.aspnet.identity.entityframework.identityuser gt getrolestousers control string ddlrole ddlrole returns role id based id i want list users var db new applicationdbcontext iqueryable&lt microsoft.aspnet.identity.entityframework.identityuser gt query db.users ddlrole null query query.where e gt e.claims ddlrole.value return query please help.updated code still error public list&lt identityuserrole&gt getrolestousers control string ddlrole var rolemanager new rolemanager&lt identityrole&gt new rolestore&lt identityrole&gt new applicationdbcontext var users rolemanager.findbyname administrator users.tolist return users error select method must return one iqueryable ienumerable microsoft.aspnet.identity.entityframework.identityuser when itemtype set microsoft.aspnet.identity.entityframework.identityuser i tried various castings none them helped.update working solution thanks chris544 his idea helped me fix here working method public list&lt applicationuser&gt getrolestousers control string ddlrole var context new applicationdbcontext var users context.users.where x gt x.roles.select y gt y.roleid contains ddlrole tolist return users,I find the role by the role name input. After I find list users by id of the role.public List&lt;ApplicationUser&gt; GetUsersInRole(string roleName){ var roleManager =   new RoleManager&lt;IdentityRole&gt;(new RoleStore&lt;IdentityRole&gt;(new  ApplicationDbContext())); var role = roleManager.FindByName(roleName).Users.First(); var usersInRole =   Users.Where(u =&gt; u.Roles.Select(r =&gt; r.RoleId).Contains(role.RoleId)).ToList(); return usersInRole;}
bootstrap icons showing published asp.net mvc application,nb go edited 2 section summary i have asp.nt mvc 4 application i integrated twitter bootstrap it.bootstrap working perfectly icons does show correctly when i publish application.i tried republish application without success.for clarify i put some images here below.when i run my application from vs2013 result which ok booth ie chrome.but when i run published application result which ok chromeie 10 problem has somehow evaluated css i don't know which point could happening.the evaluated css local application which ok chromeiebut published application i have which ok chrome ie some has experienced behavior what can i do solve weird problem edited i get font files eot svg ttf woff included when publishing my application.when i access default page application root http localhost which page showing icons files being showed chrome developper tools network tab before including files i getting 404 errors files so i could guess continue requested even showed network tab.though icons showed correctly edited 2 well i restart my site iis 7 request start triggered file requests showed chrome developper tools network tab resquest looking files content themes fonts content themes base fonts base folder containt bootstrap folder which containt bootstrap.css file css file class referening fonts files font face font family glyphicons halflings src url fonts glyphicons halflings regular.eot src url fonts glyphicons halflings regular.eot iefix format embedded opentype url fonts glyphicons halflings regular.woff format woff url fonts glyphicons halflings regular.ttf format truetype url fonts glyphicons halflings regular.svg glyphicons halflingsregular format svg seems references fonts files good files tree i could change class font face font family glyphicons halflings src url base fonts glyphicons halflings regular.eot src url base fonts glyphicons halflings regular.eot iefix format embedded opentype url base fonts glyphicons halflings regular.woff format woff url base fonts glyphicons halflings regular.ttf format truetype url base fonts glyphicons halflings regular.svg glyphicons halflingsregular format svg i would actually know what happening how solve besides icons showed published site local site running from vs2013 iisexpress thank you advance your help,IIS doesn't know how to handle (serve) those  files (MIMEs).Add this to your system.webServer node in the web.config file and you'll be golden:&lt;staticContent&gt;  &lt;mimeMap fileExtension=".otf" mimeType="font/otf" /&gt;  &lt;mimeMap fileExtension=".woff" mimeType="font/x-woff" /&gt;  &lt;!-- add more MIMEs if needed... --&gt;&lt;/staticContent&gt;--Edited see Ryans and mine comment below:Even better to be safe remove and add the mime type maping:&lt;staticContent&gt;&lt;remove fileExtension=".otf" /&gt;&lt;mimeMap fileExtension=".otf" mimeType="font/otf" /&gt;&lt;remove fileExtension=".woff" /&gt;&lt;mimeMap fileExtension=".woff" mimeType="font/x-woff" /&gt;&lt;!-- add more MIMEs if needed... --&gt;&lt;/staticContent&gt;
compiler error message cs0246 when i renamed my project,i renamed my project would compile before when i made some changes stopped working some reasonthe error iscompiler error message cs0246 type namespace name lab4 could found you missing using directive assembly reference i made new project from template lab4 renamed lab5 following steps herehttp petermcintyre.com topics using app template asp net mvc i found source fileline 28 using lab4 line 29 line 30 source file c users albert appdata local temp temporary asp.net files root 4b806faf de1f1e7 app web index.cshtml.a8d08dba.c hu0onk.0.csline 28 when i try change using lab4 lab5 recompile same error happens file gets deleted new one gets made same lab4 issue does anyone know answer,When Visual Studio creates your project it automatically adds its original namespace to \Views\web.config:&lt;system.web.webPages.razor&gt;&lt;pages pageBaseType="System.Web.Mvc.WebViewPage"&gt;&lt;namespaces&gt;.........&lt;add namespace="OriginalProjectNamespace" /&gt;&lt;/namespaces&gt;&lt;/pages&gt;&lt;/system.web.webPages.razor&gt;After renaming the project or changing its default namespace you must manually change it in this file.
why css js files bypass asp.net mvc routes,i received prototype application built asp.net mvc4 currently replacing default controller factory custom one using ninject servicelocator all.the problem replacing default controller factory requests js files being treated legit request controller action.so looking default template create visual studio route configuration looks like public static void registerroutes routecollection routes routes.ignoreroute resource axd pathinfo routes.maproute name default url controller action id defaults new controller home action index id urlparameter.optional after looking i'm asking myself how come request scripts jquery.js does get interpreted asp.net mvc i mean why doesn't think script controller jquery.js action because project works i disable controller factory override i can only assume default factory responsible kind check would mean scripts jquery.js indeed passed controller factory which something i didn't really know.could anyone shed some light what kind treatment should one do when overriding controller factory avoid problems,It's not because of how MVC handles the request to jquery.js it's because of the way IIS handles the request to jquery.js. IIS assumes that resources such as .js .jpg etc are all static resources and thus doesn't need to pass them through the ASP.NET engine. In order to to prevent this from occurring you can add a line to the web.config for a path that you want IIS to leave alone. &lt;system.webserver&gt;&lt;handlers&gt;&lt;add name="scripts" path="/Scripts/*" verb="GET" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedModeruntimeVersionv4.0"/&gt;&lt;/handlers&gt;&lt;/system.webserver&gt;Adding something like that should allow your JS files to be served via ASP.NET and not directly through IIS.
mvc4 bundling tinymce,i have problem using mvc4 bundling together tinymce i get error get http localhost 54717/admin edittext langs da.js 404 found site 1get http localhost 54717/admin edittext plugins lists editor plugin.js 404 found site 1get http localhost 54717/admin edittext plugins autolink editor plugin.js 404 found site 1get http localhost 54717/admin edittext themes advanced editor template.js 404 found site 1get http localhost 54717/admin edittext plugins spellchecker editor plugin.js 404 found site 1get http localhost 54717/admin edittext plugins pagebreak editor plugin.js 404 found site 1get http localhost 54717/admin edittext plugins style editor plugin.js 404 found site 1get http localhost 54717/admin edittext plugins table editor plugin.js 404 found site 1get http localhost 54717/admin edittext plugins layer editor plugin.js 404 found site 1get http localhost 54717/admin edittext plugins save editor plugin.js 404 found failed load http localhost 54717/admin edittext langs da.js code looks like bundleconfig.cs bundles.add new scriptbundle scripts site include scripts jquery-1.9.1.js scripts tinymce tiny mce.js scripts jquery ui-1.10.1.js scripts jquery.ui.slider.js scripts oline.base.js scripts validate language jquery.validationengine da.js scripts validate jquery.validationengine.js scripts jquery.ui.effect blind.js scripts jquery.placeholder.min.js bundletable.enableoptimizations true layout scripts.render scripts site i remove tiny mce.js form bundling place like so lt script src scripts tinymce tiny mce.js gt lt script&gt works just fine because i need override automatic loading tinymce place do manually,Before calling tinymce.init do the following:tinymce.baseURL = "@Url.Content("~/Scripts/tinymce")";Or wherever your scripts are kept.I had this same issue. This is my working final product&lt;script&gt;tinymce.baseURL = "@Url.Content("~/Scripts/tinymce")";// tinyMCE setuptinymce.init({selector: "textarea.rt-edit"browser_spellcheck: truemenubar: falseplugins: "pastepreviewcodetextcolorlink"invalid_elements: "script"// Theme options - button# indicated the row# onlytoolbar1: "bold italic underline strikethrough subscript superscript link | fontselect fontsizeselect forecolor backcolor | justifyleft justifycenter justifyright cut copy paste pastetext pasteword| outdent indent | undo redo | code preview "});&lt;/script&gt;
why displayformat dataformatstring working,i have property my view model follows editable false display name date displayformat dataformatstring 0 yyyy mm dd applyformatineditmode true public datetime movementdate get set yet markup&lt td&gt html.displayfor modelitem gt item.movementdate lt td&gt renders date value 2013/05/15 12 00 00 am.what am i doing wrong my model public class withdatemodel displayformat dataformatstring 0 yyyy mm dd public datetime thedate get set public withdatemodel thedate datetime.now my view model parkpay.webtests.models.withdatemodel@html.displayfor m gt m.thedate section scripts scripts.render bundles jqueryval what gets rendered 2013/05/25 02 23 37 am,If you can't get it working on the model you could try it on the view.@Html.TextBoxFor(m =&gt; m.ValidFrom "{0:dd/MM/yyyy}" new {maxlength = 10})
mvc bundling breaking my calc css statements removing spaces,i have css statements like margin left calc 50 480px which work fine unminified soon i begin minifying statement gets changed margin left calc 50 480px rendering all calc statements broken similar things happen width max width min width etc any way i can change behavior bundle leave those css properties alone currently i'm just using bundles.add new bundle prevent minification entirely would nice i could minify correctly,In addition to the answer above:if you use:margin-left: calc((50%) + 480px);You should rewrite it as:margin-left: calc((50%) - -480px);Since it didn't seem to fix (50%)+ for me.
why can 39 t we add web api ldquo service reference&rdquo visual studio same way we can wcf asmx,i've decided use web api middle tier app i'm developing can't seem figure out how tie front end front end being asp.net mvc4 project normally i would just right click services front end choose add service reference put url my service web api i can't do what some options creating client proxy class off my web api used my front end why doesn't web api support being added reference same way wcf asmx added,  why doesn't a Web API support being added as a reference the same way a WCF or ASMX is addedWCF or ASMX-based web services are SOAP-based and there typically is an associated WSDL. WSDL allows tooling to be built around to generate proxy classes and all that but ASP.NET Web API is meant to build REST (or HTTP based) services and there is no meta data in the form of WSDL or anything similar and hence adding service reference through VS is not applicable for ASP.NET Web API. WADL (Web Application Description Language) is supposed to be the WSDL for REST but that spec went no where.
net web api 2 owin bearer token authentication,i'm implementing web api 2 service architecture my net web application client consuming requests pure javascript mvc aspnet i'm using owin try enable token authentication per article owin bearer token authentication web api sample i seem missing something authentication step after its authorized.my login looks like httppost allowanonymous route api account login public httpresponsemessage login loginbindingmodel login todo add authif login.username a@a.com amp amp login.password var identity new claimsidentity startup.oauthbeareroptions.authenticationtype identity.addclaim new claim claimtypes.name login.username authenticationticket ticket new authenticationticket identity new authenticationproperties var currentutc new systemclock utcnow ticket.properties.issuedutc currentutc ticket.properties.expiresutc currentutc.add timespan.fromminutes 30 defaultrequestheaders.authorization new authenticationheadervalue bearer accesstoken return new httpresponsemessage httpstatuscode.ok content new objectcontent&lt object&gt new username login.usernameaccesstoken startup.oauthbeareroptions.accesstokenformat.protect ticket configuration.formatters.jsonformatter return new httpresponsemessage httpstatuscode.badrequest returns accesstoken tsjw9rh1zgu9cjvwzd_3a855gmjy6vbkit4yq8ecbnu1-pszna ilukp3uw88rsumjq7hotklc78adh3uha3o7zd2ne2pzilg4t3kdldjjo41gequbg2nsm3zbhw7uzi8vmdsgece8ryuqj1xqbzzvv90zjos4nfngchhen3powr6cdud8yr3vbldznxoyjiiucf3_xlhggrxuogkbsq username a@a.com i try set http header bearer further requests angularjs like http.defaults.headers.common.bearer response.accesstoken api like httpget route api account profile authorize public httpresponsemessage profile return new httpresponsemessage httpstatuscode.ok content new objectcontent&lt object&gt new username user.identity.name configuration.formatters.jsonformatter matter what i do service unauthorized am i missing something here,You can configure it with your angular application module. So authorization token will be set as header for every http request.var app = angular.module("app" ["ngRoute"]);app.run(function ($http) { $http.defaults.headers.common.Authorization = 'Bearer ' + token.accessToken;});
http error 403.14 forbidden iis error asp.net mvc 4 application,we developed asp.net mvc 4 application vs 2012 work fine we publish web application putting iis 7.5 when we want browse web application through iis error message show http error 403.14 forbiddenthe web server configured list contents directory.we think error may from web application we create another asp.net mvc 4 application without any change internet template putting iis again top error show us.we search internet see more poeples problem happened their.for example 403 forbidden basic mvc 3 deploy iis7.5 link introduce idea solve problem assume problem solved poeple solution work me.another links we say includes https stackoverflow.com questions/6885509/http error-403-14 forbiddenand http yassershaikh.com http error-403-14 forbidden web server configured list contents directory solutions work meany idea solve problem,I had the same problem on a brand new machine after installing IIS 7.5 Visual Studio etc.I ended up refreshing ASP.NET registration and it worked.C:\windows\Microsoft.NET\Framework64\v4.0.30319> .\aspnet_regiis.exe -irC:\windows\Microsoft.NET\Framework64\v4.0.30319> iisresetHTH
system.web.mvc.htmlhelper 39 does contain definition 39 actionlink 39,i would like use custom html.actionlinki am trying use following code public static class linkextensions public static mvchtmlstring myactionlink htmlhelper htmlhelper string linktext string action string controller var currentaction htmlhelper.viewcontext.routedata.getrequiredstring action var currentcontroller mlhelper.viewcontext.routedata.getrequiredstring controller action currentaction amp amp controller currentcontroller var anchor new tagbuilder anchor.attributes href anchor.addcssclass currentpagecss anchor.setinnertext linktext return mvchtmlstring.create anchor.tostring return htmlhelper.actionlink linktext action controller from custom actionlink helper knows what page you 39 re onbut i am getting system.web.mvc.htmlhelper does contain definition actionlink extension method actionlink accepting first argument type system.web.mvc.htmlhelper could found you missing using directive assembly reference,Make sure you have the namespace for your extensions class included in your web.config. For example:namespace MyProject.Extensions{public static class LinkExtensions{//code}}In your site Web.config and/or Web.config located in your "Views" folder:  &lt;system.web&gt;&lt;pages&gt;  &lt;namespaces&gt;&lt;add namespace="MyProject.Extensions" /&gt;  &lt;/namespaces&gt;&lt;/pages&gt;  &lt;/system.web&gt;Otherwise include a "using" block for the namespace at the top of your view page can work but for common namespaces I would do the above.ASPX:&lt;%@ Import namespace="MyProject.Extensions" %&gt;RAZOR: @using MyProject.Extensions
error executing child request handler view,i have mvc 4 view where i render following actions html.renderaction index logo html.renderaction index mainmenu i have form my view which filled out posted controller controller i perform some tasks send model back my view httppost public actionresult index manageadministratormodel manageadministratormodel i save some fields database here return view manageadministratormodel when i'm redirected view i receive following error error executing child request handler system.web.mvc.httphandlerutil serverexecutehttphandlerasyncwrapper linehtml.renderaction index logo any idea why happening,I just got this error occurring in my razor when my partial view had a code formatting error in it.If you click 'Continue' to get past the error you'll see the actual error message displayed in the browser window that you loaded it from.Correct the error in the partial view and it'll work!
you must call ldquo websecurity.initializedatabaseconnection rdquo method before you call any other method ldquo websecurity&rdquo class,i can't make websecurity object work anywhere except what already been generated accountcontroller.cs file account controller has initializesimplemembership attribute set top login functions don't complain about calling websecurity.login example i added child action accountcontroller childactiononly allowanonymous public actionresult navbar navbarviewmodel viewmodel new navbarviewmodel viewmodel.linkitems new list&lt navbarlinkitem&gt request.isauthenticated simpleroleprovider roleprovider new simpleroleprovider roleprovider.isuserinrole user.identity.name user viewmodel.linkitems.add new navbarlinkitem title create project action create controller project viewmodel.linkitems.add new navbarlinkitem title help action index controller help return partialview navbar viewmodel left code crashes roleprovider.isuserinrole user.identity.name user line subject error message so i go initialzesimplemembershipattribute.cs file copy paste line top my function websecurity.initializedatabaseconnection defaultconnection userprofile userid username autocreatetables true get error message websecurity.initializedatabaseconnection should only called once makes sense because attribute top controller definition should've called function already seems does just fine so safe i change above call websecurity.initialized websecurity.initializedatabaseconnection defaultconnection userprofile userid username autocreatetables true get back original error message websecurity.initializedatabaseconnection should called before blah blah blah any insight madness would greatly appreciated,There's a better explanation here:http://odetocode.com/blogs/scott/archive/2012/09/24/perils-of-the-mvc4-accountcontroller.aspxHere's all you have to do:Remove [InitializeSimpleMembership] from the top of AccountControllerCopy the WebSecurity.InitializeDatabaseConnection(...) call from /Filters/InitializeSimpleMembershipAttribute.cs (line 39) to /AppStart/AuthConfig.csFeel free to remove InitializeSimpleMembershipAttribute.cs from your projectYou don't have to add the InitializeDatabaseConnection() call to AuthConfig.RegisterAuth() but it seems like the logical place and keeps your Global.asax cleaner.What you are essentially doing is extracting the initialization call from the original attribute and explicitly calling it on Application_Start. Everything else in the attribute is just conditional checking in case you aren't using (or don't need) SimpleMembership.
redirect action from application beginrequest global.asax,my web application i am validating url from glabal.asax i want validate url need redirect action needed i am using application beginrequest catch request event protected void application beginrequest object sender eventargs e product registered redirect user product registraion page.if application applicationvarinfo.productnotregistered null how redirect action action registercontroller product any other way validate each url while getting requests mvc redirect action needed,All above will not work you will be in the loop of executing the method Application_BeginRequest.You need to use HttpContext.Current.RewritePath("Home/About");
how do i create custom model binder using bindmodel httpactioncontext actioncontext&hellip signature,i need know how create custom imodelbinder mvc 4 has been changed.the new method has implemented bool bindmodel httpactioncontext actioncontext modelbindingcontext bindingcontext,This link provided by Steve provides a complete answer. I'm adding it here for reference. Credit goes to dravva on asp.net forums.First create a class derived from IModelBinder. As Darin says be sure to use the System.Web.Http.ModelBinding namespace and not the familiar MVC equivalent.public class CustomModelBinder : IModelBinder{public CustomModelBinder(){//Console.WriteLine("In CustomModelBinder ctr");}public bool BindModel(HttpActionContext actionContext ModelBindingContext bindingContext){//Console.WriteLine("In BindModel");bindingContext.Model = new User() { Id = 2 Name = "foo" };return true;}}Next provide a provider which acts as a factory for your new binder and any other binders you may add in the future.public class CustomModelBinderProvider : ModelBinderProvider{CustomModelBinder cmb = new CustomModelBinder();public CustomModelBinderProvider(){//Console.WriteLine("In CustomModelBinderProvider ctr");}public override IModelBinder GetBinder(HttpActionContext actionContextModelBindingContext bindingContext){if (bindingContext.ModelType == typeof(User)){return cmb;}return null;}}Finally include the following in your Global.asax.cs (e.g. Application_Start).var configuration = GlobalConfiguration.Configuration;IEnumerable&lt;object&gt; modelBinderProviderServices = configuration.ServiceResolver.GetServices(typeof(ModelBinderProvider));List&lt;Object&gt; services = new List&lt;object&gt;(modelBinderProviderServices);services.Add(new CustomModelBinderProvider());configuration.ServiceResolver.SetServices(typeof(ModelBinderProvider) services.ToArray());Now you can just delare the new type as a parameter to your action methods.public HttpResponseMessage&lt;Contact&gt; Get([ModelBinder(typeof(CustomModelBinderProvider))] User user)or evenpublic HttpResponseMessage&lt;Contact&gt; Get(User user)
how do i create mvc razor template displayfor,i have couple properties my view model display only i need retrieve values using jquery perform calculation page standard html.displayfor method just writes value page i want create razor template allow me render each element lt span id elementsid gt element value&lt span&gt i know i can specify template html.displayfor use particular template rendering property within template how do i identify id attribute write span tag html.displayfor model gt model.element mytemplate,You could make this id part of the view model and use it in the display template:&lt;span id="@Model.Id"&gt;@Html.DisplayFor(x =&gt; x.Value)&lt;/span&gt;
submit same partial view called multiple times data controller,i have added button my view when button clicked partial view added my form i can add much partial view i can when submitting form data i am unable send all partial view data controller i have made different model having all attributes i have made list model my main model can anyone please give me some trick so i can send all partial view content my controller my view&lt div id csqgroup gt lt div&gt lt div&gt lt input type button value add field id addfield onclick addfieldss gt lt div&gt function addfieldss ajax url url.content adminproduct getcolorsizeqty type get'success function result var newdiv document.createelement div attr id csq mycounter newdiv.html result newdiv.appendto csqgroup mycounter error function result alert failure my controllerpublic actionresult getcolorsizeqty var data new adminproductdetailmodel data.colorlist commoncore.getalltypeoflist color data.sizelist commoncore.getalltypeoflist size return partialview data httppost public actionresult adddetail adminproductdetailmodel model my partial view@model ikle.model.productmodel.adminproductdetailmodel lt div class editor field gt html.labelfor model gt model.fkconfigchoicecategorysizeid html.dropdownlistfor model gt model.fkconfigchoicecategorysizeid model.sizelist select size html.validationmessagefor model gt model.fkconfigchoicecategorysizeid lt div&gt lt div class editor field gt html.labelfor model gt model.fkconfigchoicecategorycolorid html.dropdownlistfor model gt model.fkconfigchoicecategorycolorid model.colorlist select color html.validationmessagefor model gt model.fkconfigchoicecategorycolorid lt div&gt lt div class editor field gt html.labelfor model gt model.producttotalquantity html.textboxfor model gt model.producttotalquantity html.validationmessagefor model gt model.producttotalquantity lt div&gt,Your problem is that the partial renders html based on a single AdminProductDetailModel object yet you are trying to post back a collection. When you dynamically add a new object you continue to add duplicate controls that look like &lt;input name="productTotalQuantity" ..&gt; (this is also creating invalid html because of the duplicate id attributes) where as they need to be &lt;input name="[0].productTotalQuantity" ..&gt; &lt;input name="[1].productTotalQuantity" ..&gt; etc. in order to bind to a collection on post back.The DefaultModelBinder required that the indexer for collection items start at zero and be consecutive or that the form values include a Index=someValue where the indexer is someValue (for example &lt;input name="[ABC].productTotalQuantity" ..&gt;&lt;input name="Index" value="ABC"&gt;. This is explained in detail in Phil Haack's article Model Binding To A List. Using the Index approach is generally better because it also allows you to delete items from the list (otherwise it would be necessary to rename all existing controls so the indexer is consecutive).Two possible approaches to your issue.Option 1Use the BeginItemCollection helper for your partial view. This helper will render a hidden input for the Index value based on a GUID. You need this in both the partial view and the loop where you render existing items. Your partial would look something like@model IKLE.Model.ProductModel.AdminProductDetailModel@using(Html.BeginCollectionItem()) {  &lt;div class="editor-field"&gt;@Html.LabelFor(model =&gt; model.fkConfigChoiceCategorySizeId)@Html.DropDownListFor(model =&gt; model.fkConfigChoiceCategorySizeId Model.sizeList "--Select Size--")@Html.ValidationMessageFor(model =&gt; model.fkConfigChoiceCategorySizeId)  &lt;/div&gt;  ....}Option 2Manually create the html elements representing a new object with a 'fake' indexer place them in a hidden container then in the Add button event clone the html update the indexers and Index value and append the cloned elements to the DOM. To make sure the html is correct create one default object in a for loop and inspect the html it generates. An example of this approach is shown in this answer&lt;div id="newItem" style="display:none"&gt;  &lt;div class="editor-field"&gt;&lt;label for="_#__productTotalQuantity"&gt;Quantity&lt;/label&gt;&lt;input type="text" id="_#__productTotalQuantity" name="[#].productTotalQuantity" value /&gt;....  &lt;/div&gt;  // more properties of your model&lt;/div&gt;Note the use of a 'fake' indexer to prevent this one being bound on post back ('#' and '%' wont match up so they are ignored by the DefaultModelBinder)$('#addField').click(function() {  var index = (new Date()).getTime();   var clone = $('#NewItem').clone();  // Update the indexer and Index value of the clone  clone.html($(clone).html().replace(/\[#\]/g '[' + index + ']'));  clone.html($(clone).html().replace(/"%"/g '"' + index  + '"'));  $('#yourContainer').append(clone.html());}The advantage of option 1 is that you are strongly typing the view to your model but it means making a call to the server each time you add a new item. The advantage of option 2 is that its all done client side but if you make any changes to you model (e.g. add a validation attribute to a property) then you also need to manually update the html making maintenance a bit harder.Finally if you are using client side validation (jquery-validate-unobtrusive.js) then you need re-parse the validator each time you add new elements to the DOM as explained in this answer.$('form').data('validator' null);$.validator.unobtrusive.parse($('form'));And of course you need to change you POST method to accept a collection[HttpPost]public ActionResult AddDetail(IEnumerable&lt;AdminProductDetailModel&gt; model){  ....}
how set debug false release mode,i have web.config file compilation option set belowweb.config lt configuration&gt lt system.web gt lt compilation debug true targetframework 4.5 gt lt system.web gt lt configuration&gt here what visual studio puts release mode default.web.release.config lt configuration xmlns xdt http schemas.microsoft.com xml document transform gt lt system.web gt lt compilation xdt transform removeattributes debug gt lt system.web gt lt configuration&gt i am using mvc4 project based tutorial i expecting minified versions js css would served when application run under release mode doesn't seem working non minified versions js css being served other hand i explicitly set debug false web.config min versions served correctly seems like compilation tag transform issue when application run under release mode i don't understand what wrong same web.release.config.in short i am unable get bundling minification working running application under release mode,If you'd like to test your .NET bundling and minification that you've got set up in your Global.asax file you can also use precompilation notation...for example#if DEBUG  BundleTable.EnableOptimizations = false;#else  BundleTable.EnableOptimizations = true;#endifWith this your application won't need to trigger the transform in the build operation and will run just like you want it to.
dataannotations stringlength attribute mvc without max value,i am using data annotations model validation mvc4 am currently using stringlengthattribute however i do want specify maximum value currently set 50 do want specify minimum string length value.is way only specify only minimum length perhaps another attribute i can use my current code required datatype datatype.password display name confirm new password stringlength 50 minimumlength 7 compareattribute newpassword errormessage new password confirm new password fields did match public string confirmnewpassword get set any help much appreciated,There is the [MinLength(7)] attribute as well for this purpose.  Source: https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.minlengthattribute(v=vs.110).aspx
asp.net mvc 4 iis6 ldquo page cannot found&rdquo,i am having trouble getting asp.net mvc 4 running iis 6.first i got directory listing denied already solved after i setup extensionless urls based phil haack blog post asp.net mvc iis 6 walkthrough now i'm getting page cannot found 404 page.it s simple asp.net web api project mvc 4 beta,I fixed this problem using these steps: Open IIS ConsoleSelect “Web Service ExtensionsSelect “ASP.NET v4.0.30319”Click Allow
asp.net mvc 4 migrations how run 39 update database 39 production server,i can use package manager run update database verbose locally.probably stupid question i can't find online once my website deployed how can i run manually server secondarily what other strategies would you recommend deploying database migrations production how would preferable thanks,I know that the question is already answered but for future reference:One of the options is to put something like this in the constructor of your DB context class:public MyDbContext(){System.Data.Entity.Database.SetInitializer(new MigrateDatabaseToLatestVersion&lt;MyDbContext Configuration&gt;());}
web api request.createresponse httpresponsemessage intellisense vs2012,some reason request.createresponse now red vs2012 when i hover over usage ide says cannot resolve symbol createresponse'here apicontroller class using system using system.collections.generic using system.linq using system.net using system.net.http using system.web.http using system.web.http.filters using gocapi.attributes using gocapi.models using gocapi.models.abstract using attributerouting using attributerouting.web.http namespace gocapi.controllers routeprefix courses public class coursescontroller apicontroller private icoursesrepository coursesrepository get set public coursescontroller icoursesrepository coursesrepository coursesrepository coursesrepository get id public httpresponsemessage get int id var course coursesrepository.getsingle id course null return request.createresponse httpstatuscode.notfound invalid id return request.createresponse httpstatuscode.ok course granted code does compile works just really annoying seeing all red my screen also intellisense doesn't work now when i type requestcreateresponse also used work i started developing other parts my api just came back building controllers so i do know what happened.any thoughts,You need to add a reference to System.Net.Http.Formatting.dll. The CreateResponse extension method is defined there.
unit test asp.net web api controller fake httpcontext,i'm using following approach upload files through asp.net web api controllers system.web.http.httppost public httpresponsemessage uploadfile httpresponsemessage response try int id 0 int qid null int.tryparse httpcontext.current.request.form id out id qid id var file httpcontext.current.request.files 0 int filepursuitid bl.uploadfile qid file catch exception ex return response my unit tests i've created httpcontext class manually before calling uploadfile action var request new httprequest http localhost var context new httpcontext request new httpresponse new stringwriter httpcontext.current context response controller.uploadfile unfortunately i wasn't able add custom values form collection since read only also i couldn't change files collection.is any way add custom values form files properties request add needed data id file content during unit test,Use some mocking framework like Moq instead. Create a mock HttpRequestBase and mock HttpContextBase with whatever data you need and set them on the controller.using Moq;using NUnit.Framework;using SharpTestsEx;namespace StackOverflowExample.Moq{public class MyController : Controller{public string UploadFile(){return Request.Form["id"];}}[TestFixture]public class WebApiTests{[Test]public void Should_return_form_data(){//arrangevar formData = new NameValueCollection {{"id" "test"}};var request = new Mock&lt;HttpRequestBase&gt;();request.SetupGet(r =&gt; r.Form).Returns(formData);var context = new Mock&lt;HttpContextBase&gt;();context.SetupGet(c =&gt; c.Request).Returns(request.Object);var myController = new MyController();myController.ControllerContext = new ControllerContext(context.Object new RouteData() myController);//actvar result = myController.UploadFile();//assertresult.Should().Be.EqualTo(formData["id"]);}}}
how create select list country states province mvc,hi i am new mvc even asp i want create form mvc help some examples i am able create textboxes i now i don't understand how create select list i tried searching many examples implementing select list mvc i am able understand.i have form which half coded html half mvc.here my code using system using system.collections.generic using system.linq using system.web namespace medavail.applications.medprovision.web.models public class addressviewmodel public string street1 get set public string street2 get set public string city get set public string province get set public string country get set public string postalcode get set public string phonenumber get set lt form id locationinfo gt lt h1 gt location information&lt h1 gt lt table width 80 id locinfo gt lt colgroup&gt lt col width 20 gt lt col gt lt colgroup&gt lt tr&gt lt th&gt html.label country lt th&gt lt td&gt lt select required gt lt option&gt select country&lt option&gt lt option&gt canada&lt option&gt lt option&gt united states&lt option&gt lt select&gt lt span class required gt lt span&gt lt td&gt lt tr&gt lt tr&gt lt th&gt html.labelfor x gt x.state lt th&gt lt td&gt lt select required gt lt option&gt select state&lt option&gt lt option&gt state 1 lt option&gt lt option&gt state 2 lt option&gt lt option&gt state 3 lt option&gt lt select&gt lt span class required gt lt span&gt lt td&gt lt tr&gt lt tr&gt lt th&gt html.labelfor x gt x.postalcode lt th&gt lt td&gt html.textboxfor x gt x.postalcode lt span class required gt lt span&gt lt td&gt lt tr&gt lt tr&gt lt th&gt html.labelfor x gt x.city lt th&gt lt td&gt html.textboxfor x gt x.city lt span class required gt lt span&gt lt td&gt lt tr&gt lt tr&gt lt th&gt html.labelfor x gt x.streetaddress1 lt th&gt lt td&gt html.textboxfor x gt x.streetaddress1 lt span class required gt lt span&gt lt td&gt lt tr&gt lt tr&gt lt th&gt html.labelfor x gt x.streetaddress2 lt th&gt lt td&gt html.textboxfor x gt x.streetaddress2 lt td&gt lt tr&gt lt tr&gt lt th&gt html.labelfor x gt x.phonenumber lt th&gt lt td&gt html.textboxfor x gt x.phonenumber lt td&gt lt tr&gt lt table&gt lt div role button class margintop50 marginbottom gt lt input type button id step3back value back class active gt lt input type button id step3confirmnext value next class active marginleft50 gt lt div&gt lt form&gt please guide me how create select list kind form,public static List&lt;SelectListItem&gt; States = new List&lt;SelectListItem&gt;(){new SelectListItem() {Text="Alabama" Value="AL"}new SelectListItem() { Text="Alaska" Value="AK"}new SelectListItem() { Text="Arizona" Value="AZ"}new SelectListItem() { Text="Arkansas" Value="AR"}new SelectListItem() { Text="California" Value="CA"}new SelectListItem() { Text="Colorado" Value="CO"}new SelectListItem() { Text="Connecticut" Value="CT"}new SelectListItem() { Text="District of Columbia" Value="DC"}new SelectListItem() { Text="Delaware" Value="DE"}new SelectListItem() { Text="Florida" Value="FL"}new SelectListItem() { Text="Georgia" Value="GA"}new SelectListItem() { Text="Hawaii" Value="HI"}new SelectListItem() { Text="Idaho" Value="ID"}new SelectListItem() { Text="Illinois" Value="IL"}new SelectListItem() { Text="Indiana" Value="IN"}new SelectListItem() { Text="Iowa" Value="IA"}new SelectListItem() { Text="Kansas" Value="KS"}new SelectListItem() { Text="Kentucky" Value="KY"}new SelectListItem() { Text="Louisiana" Value="LA"}new SelectListItem() { Text="Maine" Value="ME"}new SelectListItem() { Text="Maryland" Value="MD"}new SelectListItem() { Text="Massachusetts" Value="MA"}new SelectListItem() { Text="Michigan" Value="MI"}new SelectListItem() { Text="Minnesota" Value="MN"}new SelectListItem() { Text="Mississippi" Value="MS"}new SelectListItem() { Text="Missouri" Value="MO"}new SelectListItem() { Text="Montana" Value="MT"}new SelectListItem() { Text="Nebraska" Value="NE"}new SelectListItem() { Text="Nevada" Value="NV"}new SelectListItem() { Text="New Hampshire" Value="NH"}new SelectListItem() { Text="New Jersey" Value="NJ"}new SelectListItem() { Text="New Mexico" Value="NM"}new SelectListItem() { Text="New York" Value="NY"}new SelectListItem() { Text="North Carolina" Value="NC"}new SelectListItem() { Text="North Dakota" Value="ND"}new SelectListItem() { Text="Ohio" Value="OH"}new SelectListItem() { Text="Oklahoma" Value="OK"}new SelectListItem() { Text="Oregon" Value="OR"}new SelectListItem() { Text="Pennsylvania" Value="PA"}new SelectListItem() { Text="Rhode Island" Value="RI"}new SelectListItem() { Text="South Carolina" Value="SC"}new SelectListItem() { Text="South Dakota" Value="SD"}new SelectListItem() { Text="Tennessee" Value="TN"}new SelectListItem() { Text="Texas" Value="TX"}new SelectListItem() { Text="Utah" Value="UT"}new SelectListItem() { Text="Vermont" Value="VT"}new SelectListItem() { Text="Virginia" Value="VA"}new SelectListItem() { Text="Washington" Value="WA"}new SelectListItem() { Text="West Virginia" Value="WV"}new SelectListItem() { Text="Wisconsin" Value="WI"}new SelectListItem() { Text="Wyoming" Value="WY"}};How we do it is put this method into a class and then call the class from the view@Html.DropDownListFor(x =&gt; x.State Class.States)
how add global.asax file asp.net mvc4 project,my project global.asax file removed i want add global.asax file my projet.but add new item dialog global.asax exist,Create an empty new project. Go to that folder and copy the Global.asax file.  Go to your project and in solution explorer paste it on root.Open Global.asax file and change namespace match to your namespace.In solution explorer right click on Global.asax and pick View Markup and change inherits match to your namespace.
how get all values from appsettings key which starts specific name pass any array,my web.config file i have&lt appsettings&gt lt add key service1url1 value http managementservice.svc gt lt add key service1url2 value http managementsettingsservice.svc hostinstances gt lots keys like above&lt appsettings&gt i want get value key starts service1url pass value string repositoryurls my c class how can i achieve i tried something like couldn't grab values foreach string key configurationmanager.appsettings key.startswith service1url string value configurationmanager.appsettings key string repositoryurls value either i am doing wrong way missing something here any help would really appreciated,You are overwriting the array for every iterationList&lt;string&gt; values = new List&lt;string&gt;();foreach (string key in ConfigurationManager.AppSettings){if (key.StartsWith("Service1URL")){string value = ConfigurationManager.AppSettings[key];values.Add(value);}}string[] repositoryUrls = values.ToArray();
asp.net web api returning xml instead json duplicate,question already has answer here how do i get asp.net web api return json instead xml using chrome 29 answersi read default web api return json data some reason when creating api returns xml instead json.public class currencycontroller apicontroller private companydatabasecontext db new companydatabasecontext get api currencypublic ienumerable&lt currency&gt getcurrencies return db.currencies.asenumerable i haven't modified anything out ordinary so i'm stumped,Web Api looks for the headers of the upcoming request to choose the returning data type. For instance if you set Accept:application/json it will automatically set the returning type to JSON. Besides that setting content-type gives a clue to Web-API about upcoming request data type. So if you want to post JSON data to Web API you should have Content-Type:application/json in header.
conditionally execute javascript razor view,i'd like execute piece javascript when certain condition true my view model lt script type text javascript gt model.employees.count gt 1 executejsfunction lt script&gt code doesn't compile how should i do,Try with this:&lt;script type="text/javascript"&gt;@if (Model.Employees.Count &gt; 1){@:executeJsfunction();}&lt;/script&gt;Note the "@:"
adding validation attributes entity framework data model,preface feb 2015 you still using entity framework edmx please do yourself favor checkout using entity framework code first instead difference your tables created from your model classes rather than edmx where your model classes created your tables all around easier solution problem question doesn't even exist getting started entity framework 6 code first using mvc 5i have existing sql database i am using ado.net enity data model model i am trying build some crud features my mvc application.in all tutorials i have found subject build model from scratch add attributes model class example required stringlength 10 public string name get set however model classes auto generated so i think changing them bad idea get written over anyway database model refreshed how would i add validation attributes,Mason240 answer works well I will try to improve it : you could create a new ContactDataAnnotations.cs class with ://ContactDataAnnotations.cs - A new file using System.ComponentModel;using System.ComponentModel.DataAnnotations;[MetadataType(typeof(ContactMetadata))]public partial class Contact{// No field here}internal sealed class ContactMetadata{[Required(ErrorMessage = "Name is required.")][StringLength(5)]  public string ContactName {get; set; }}This way you can regenerate your Contact class through EF without touching DataAnnotations - and without warning by the way.
how link html5 form action controller actionresult method asp.net mvc 4,i have basic form which i want handle buttons inside form calling actionresult method view associated controller class here following html5 code form lt h2 gt welcome&lt h2 gt lt div&gt lt h3 gt login&lt h3 gt lt form method post action lt what goes here gt gt username lt input type text name username gt lt br gt password lt input type text name password gt lt br gt lt input type submit value login gt lt input type submit value create account gt lt form&gt lt div&gt lt more code gt corresponding controller code following httppost public actionresult myaction string input formcollection collection switch input case login do some stuff break case create account do some other stuff break return view,Here I'm basically wrapping a button in a link. The advantage is that you can post to different action methods in the same form. &lt;a href="Controller/ActionMethod"&gt;&lt;input type="button" value="Click Me" /&gt;&lt;/a&gt;Adding parameters:&lt;a href="Controller/ActionMethod?userName=ted"&gt;&lt;input type="button" value="Click Me" /&gt;&lt;/a&gt;Adding parameters from a non-enumerated Model:&lt;a href="Controller/ActionMethod?userName=@Model.UserName"&gt;&lt;input type="button" value="Click Me" /&gt;&lt;/a&gt;You can do the same for an enumerated Model too. You would just have to reference a single entity first. Happy Coding!
how minify javascript inside script block view pages,how minify javascript inside view page script block minimal effort i have some page specific scripts would like put specific view pages asp.net mvc4 bundling minification only works script files script code inside view page.updatei took sohnee advice extract scripts files i need use them specific pages so what i end up doing layout page i created optional section page specific javascript block rendersection js required false lt body&gt view page let say index.cshtml i render script section like section js scripts.render bundles js path.getfilenamewithoutextension this.virtualpath you can see assumes javascript filename index.js same view page name index.cshtml bundle config i have var jsfiles directory.getfiles httpcontext.current.server.mappath scripts pages js foreach var jsfile jsfiles var bundlename path.getfilenamewithoutextension jsfile bundles.add new scriptbundle bundles js bundlename include scripts pages path.getfilename jsfile you index page html output lt script src bundles js index v ydlmxiub9gtrm508o0saicc8ljwgpvk-v9iuqwxzgcg1 gt lt script&gt lt body&gt you products page html output lt script src bundles js products v ydlmxiub9gtrm508o0saicc8ljwgpvk-v9iuqwxzgcg1 gt lt script&gt lt body&gt,You can minify inline scripts using this HTML helperusing Microsoft.Ajax.Utilities;using System;namespace System.Web.Mvc{public class HtmlHelperExtensions{public static MvcHtmlString JsMinify(this HtmlHelper helper Func&lt;object object&gt; markup){   string notMinifiedJs =markup.Invoke(helper.ViewContext)?.ToString() ?? "";var minifier = new Minifier();var minifiedJs = minifier.MinifyJavaScript(notMinifiedJs new CodeSettings{EvalTreatment = EvalTreatment.MakeImmediateSafePreserveImportantComments = false});return new MvcHtmlString(minifiedJs);}}}And inside your Razor View use it like this &lt;script type="text/javascript"&gt;   @Html.JsMinify(@&lt;text&gt;window.Yk = window.Yk || {};Yk.__load = [];window.$ = function (f) {Yk.__load.push(f);} &lt;/text&gt;)&lt;/script&gt;If you use System.Web.Optimization than all necessary dlls are already referenced otherwise you can install WebGrease NuGet package.Some additional details available here: http://www.cleansoft.lv/minify-inline-javascript-in-asp-net-mvc-with-webgrease/EDIT:Replaced DynamicInvoke() with Invoke(). No need for runtime checks here Invoke is much faster than DynamicInvoke. Added .? to check for possible null.
redirecting from cshtml page,i want redirect different view depending result dataset i keep getting returned page i am currently can't work out why i drop statement action gets called once i return view new page returns me back current page.cshtml page viewbag.title search results enumerablerowcollection&lt datarow&gt custs viewbag.customers bool anyrows custs.any anyrows false html.action noresults home redirect search results view controller public actionresult noresults return view noresults view i cant get too viewbag.title noresults lt h2 gt noresults&lt h2 gt,Would be safer to do this.@{ Response.Redirect("~/Account/LogIn?returnUrl=Products");}So the controller for that action runs as well to populate any model the view needs.  Source  Redirect from a view to another viewAlthough as @Satpal mentioned I do recommend you do the redirecting on your controller.
delegatinghandler response webapi,i am currently using several delegation handlers classes derived from delegatinghandler work request before sent things like validating signature etc all very nice because i don't have duplicate signature validation all calls example i would like use same principle response from same web request something similar delegatinghandler response way catch response before has returned method way additional information i am calling web api using httpclient.putasync,Here is an example for intercepting the request and the response.  the overridden method SendAsync is used to capture the original request whereas the method called ResponseHandler is used to capture the response.Example to capture original request and responseusing System.Net.Http;using System.Threading.Tasks;namespace webAPI_Test{public class MessageInterceptor : DelegatingHandler{protected override System.Threading.Tasks.Task&lt;HttpResponseMessage&gt; SendAsync(HttpRequestMessage request System.Threading.CancellationToken cancellationToken){// CATCH THE REQUEST BEFORE SENDING TO THE ROUTING HANDLERvar headers = request.ToString();var body = request.Content.ReadAsStringAsync().Result;var fullRequest = headers + "\n" + body;// SETUP A CALLBACK FOR CATCHING THE RESPONSE - AFTER ROUTING HANDLER AND AFTER CONTROLLER ACTIVITYreturn base.SendAsync(request cancellationToken).ContinueWith(task =&gt;{// GET THE COPY OF THE TASK AND PASS TO A CUSTOM ROUTINEResponseHandler(task);// RETURN THE ORIGINAL RESULTvar response = task.Result;return response;});}public void ResponseHandler(Task&lt;HttpResponseMessage&gt; task){var headers = task.Result.ToString();var body = task.Result.Content.ReadAsStringAsync().Result;var fullResponse = headers + "\n" + body;}}}To use this method the class needs to be identified and registered as a MessageHandler.  I added the following line to my Global.asax file...Example how to register the new MessageInterceptor classGlobalConfiguration.Configuration.MessageHandlers.Add(new MessageInterceptor());Here is my complete Global.asax file.  Notice how the MessageInterceptor is referenced...Full version of Global.asax showing MessageInterceptor integrationusing System.Web.Http;using System.Web.Mvc;using System.Web.Optimization;using System.Web.Routing;namespace webAPI_Test{// Note: For instructions on enabling IIS6 or IIS7 classic mode // visit http://go.microsoft.com/?LinkId=9394801public class WebApiApplication : System.Web.HttpApplication{protected void Application_Start(){AreaRegistration.RegisterAllAreas();WebApiConfig.Register(GlobalConfiguration.Configuration);FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);RouteConfig.RegisterRoutes(RouteTable.Routes);BundleConfig.RegisterBundles(BundleTable.Bundles);GlobalConfiguration.Configuration.MessageHandlers.Add(new MessageInterceptor());}}}
39 webform dopostbackwithoptions 39 undefined ie11 preview,ie11 coming i just installed developer preview version however i run some my web application i got error webform dopostbackwithoptions undefined.the error popped up when i playing autopostback dropdownlist.moreover looks like similar issue ie10 before http www.hanselman.com blog/bugandfixaspnetfailstodetectie10causingdopostbackisundefinedjavascripterrorormaintainff5scrollbarposition.aspx,I had a similar issue with Internet Explorer 11 not being detected correctly by .NET 4.0 framework. Here's how I worked around the problem:Installing the suggested patches didn't do the trick. After digging deeper into the issue I found that although the http://support.microsoft.com/kb/2836939 patch is installed on the server the browser is still recognized as Mozilla with version 0.0 on the server. After additional research I found that if you have any .browser file in your site's app_browsers folder the version detected on the server is wrong namely Mozilla 0.0.To work around the issue I created a custom .browser file in the app_browsers directory with the following content:&lt;browsers&gt;  &lt;browser id="IE11" parentID="Mozilla"&gt;&lt;identification&gt;  &lt;userAgent match="Trident\/7.0; rv:(?'version'(?'major'\d+)(\.(?'minor'\d+)?)(?'letters'\w*))(?'extra'[^)]*)" /&gt;  &lt;userAgent nonMatch="IEMobile" /&gt;&lt;/identification&gt;&lt;capture&gt;  &lt;userAgent match="Trident/(?'layoutVersion'\d+)" /&gt;&lt;/capture&gt;&lt;capabilities&gt;  &lt;capability name="browser"  value="IE" /&gt;  &lt;capability name="layoutEngine" value="Trident" /&gt;  &lt;capability name="layoutEngineVersion"  value="${layoutVersion}" /&gt;  &lt;capability name="extra"value="${extra}" /&gt;  &lt;capability name="isColor"  value="true" /&gt;  &lt;capability name="letters"  value="${letters}" /&gt;  &lt;capability name="majorversion" value="${major}" /&gt;  &lt;capability name="minorversion" value="${minor}" /&gt;  &lt;capability name="screenBitDepth"   value="8" /&gt;  &lt;capability name="type" value="IE${major}" /&gt;  &lt;capability name="version"  value="${version}" /&gt;&lt;/capabilities&gt;  &lt;/browser&gt;  &lt;!-- Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:110) like Gecko --&gt;  &lt;browser id="IE110" parentID="IE11"&gt;&lt;identification&gt;  &lt;capability name="majorversion" match="11" /&gt;&lt;/identification&gt;&lt;capabilities&gt;  &lt;capability name="ecmascriptversion"value="3.0" /&gt;  &lt;capability name="jscriptversion"   value="5.6" /&gt;  &lt;capability name="javascript"   value="true" /&gt;  &lt;capability name="javascriptversion"value="1.5" /&gt;  &lt;capability name="msdomversion" value="${majorversion}.${minorversion}" /&gt;  &lt;capability name="w3cdomversion"value="1.0" /&gt;  &lt;capability name="ExchangeOmaSupported" value="true" /&gt;  &lt;capability name="activexcontrols"  value="true" /&gt;  &lt;capability name="backgroundsounds" value="true" /&gt;  &lt;capability name="cookies"  value="true" /&gt;  &lt;capability name="frames"   value="true" /&gt;  &lt;capability name="javaapplets"  value="true" /&gt;  &lt;capability name="supportsCallback" value="true" /&gt;  &lt;capability name="supportsFileUpload"   value="true" /&gt;  &lt;capability name="supportsMultilineTextBoxDisplay" value="true" /&gt;  &lt;capability name="supportsMaintainScrollPositionOnPostback" value="true" /&gt;  &lt;capability name="supportsVCard"value="true" /&gt;  &lt;capability name="supportsXmlHttp"  value="true" /&gt;  &lt;capability name="tables"   value="true" /&gt;  &lt;capability name="supportsAccessKeyAttribute"value="true" /&gt;  &lt;capability name="tagwriter"value="System.Web.UI.HtmlTextWriter" /&gt;  &lt;capability name="vbscript" value="true" /&gt;&lt;/capabilities&gt;  &lt;/browser&gt;&lt;/browsers&gt;A similar approach is suggested in the following article:doPostback failing in IE 11+ Windows 8.1I would like to clarify that the issue is happening only with .NET 4.0. With .NET 4.5 the browser and its version are detected correctly.
how make ajax request anti forgery token mvc,i have problem below details from mvc project.when i am trying use jquery ajax request loading panel like spinning gif even text i am getting error observed from fiddler required anti forgery form field requestverificationtoken present i comment validateantiforgerytoken attribute post action method use loading panel working fine.i want know why i am getting error.i have even used query string serialized requestverificationtoken input name requestverificationtoken val still i am getting error anti forgery token could decrypted application hosted web farm cluster ensure all machines running same version asp.net web pages lt machinekey&gt configuration specifies explicit encryption validation keys autogenerate cannot used clusterwhat should i use here updated question code var token input name requestverificationtoken val submitaddress click function subaddr event event.preventdefault event.stoppropagation addaddress html lt img src img animated overlay.gif gt sending addaddress blur blif jobid val transportjobid val parseint jobid val ajax url transportjobaddress create type post data requestverificationtoken token form action transportjobaddress create serialize success function poste data textstatus jqxhr addaddress html data return false error function err jqxhr textstatus errorthrown alert error address errorthrown else var transportid 2 ajax url transportjob create'type post'data requestverificationtoken token form action transportjob create serialize success function sfn data textstatus jqxhr transportid parseint data jobid val data alert inserted id data transportjobid val transportid ajax url transportjobaddress create type post beforesend function myintserver xhr addaddress html lt div id temp load style text align center gt please wait lt div&gt data requestverificationtoken token form action transportjobaddress create serialize success function poste data textstatus jqxhr addaddress html data error function err jqxhr textstatus errorthrown alert error address errorthrown error function myfunction jqxhr textstatus errorthrown alert error transport jqxhr.textstatus complete function completefunc alert ajax completed all requests return false form tags lt form action transportjob create method post gt lt input name requestverificationtoken type hidden value ydysei0_rfybf619dqrhdwwocm7owwkjqqemnvndakefiffyvrq0mjyyu0zkktnxljk_y1zjo9-yb coap8mqd0cvh8cdyyik4hj0pzxtge1 gt transportjobform tag 2 same page&lt form action transportjobaddress create method post novalidate novalidate gt lt input name requestverificationtoken type hidden value np2vuzjpk1tjlv846opsu6hg4sjmhrcck1cacaqzbphog8wbv4gzv06nordl7f_it9qqf3bixo3n9wgw68su mki7g3-ku bshbdn-g2aakc1 gt,Rather than manually adding it to each request I usually do something like this:var token = $('input[name="__RequestVerificationToken"]').val();$.ajaxPrefilter(function (options originalOptions) {  if (options.type.toUpperCase() == "POST") {options.data = $.param($.extend(originalOptions.data { __RequestVerificationToken: token }));  }});This will automatically add your token to any ajax POST you do.
runtime error could load file assembly 39 system.web.webpages.razor version 3.0.0.0,i tinkered my asp.net mvc4 packages via nuget now system.web.webpages.razor v3 won't load sometimes other packages won't load either.my coworker runs solution without any trouble so issue definitely configuration my development system opposed anything been checked i have already tried recommendations various sof other fora links including could load file assembly 39 system.web.webpages.razor version 2.0.0.0could load file assembly 39 system.web.webpages.razor version 2.0.0.0could load file assembly 39 system.web.webpages.razor version 3.0.0.0as well suggestions linked from i also checked control panel found installed programs referenced mvc matters i'm running ms win 7 sp 1 i am open any all suggestions.here s my core dump info server error application.could load file assembly system.web.webpages.razor version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies system cannot find file specified.description unhandled exception occurred during execution current web request please review stack trace more information about error where originated code exception details system.io.filenotfoundexception could load file assembly system.web.webpages.razor version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies system cannot find file specified.source error unhandled exception generated during execution current web request information regarding origin location ofthe exception can identified using exception stack trace below.assembly load trace following information can helpful determine why assembly system.web.webpages.razorversion 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 could loaded pre bind state information log user codeswithhammer log displayname system.web.webpages.razor version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 fully specified log appbase file c users codeswithhammer documents visual studio 2012/projects mpp mpp log initial privatepath c users codeswithhammer documents visual studio 2012 projects mpp mpp bin calling assembly microsoft.web.webpages.oauth version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 log bind starts default load context log using application configuration file c users codeswithhammer documents visual studio 2012 projects mpp mpp web.config log using host configuration file c users codeswithhammer documents iisexpress config aspnet.config log using machine configuration file from c windows microsoft.net framework v4.0.30319 config machineconfig log post policy reference system.web.webpages.razor version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 log attempting download new url file c users codeswithhammer appdata local temp temporary asp.net files root/5bf3ca07/f960d9c5 systemwebwebpagesrazordll log attempting download new url file c users codeswithhammer appdata local temp temporary asp.net files root/5bf3ca07/f960d9c5 system.web.webpages.razor systemwebwebpagesrazordll log attempting download new url file c users codeswithhammer documents visual studio 2012/projects mpp mpp bin systemwebwebpagesrazordll log attempting download new url file c users codeswithhammer documents visual studio 2012/projects mpp mpp bin system.web.webpages.razor systemwebwebpagesrazordll log attempting download new url file c users codeswithhammer appdata local temp temporary asp.net files root/5bf3ca07/f960d9c5 systemwebwebpagesrazorexe log attempting download new url file c users codeswithhammer appdata local temp temporary asp.net files root/5bf3ca07/f960d9c5 system.web.webpages.razor systemwebwebpagesrazorexe log attempting download new url file c users codeswithhammer documents visual studio 2012/projects mpp mpp bin systemwebwebpagesrazorexe log attempting download new url file c users codeswithhammer documents visual studio 2012/projects mpp mpp bin system.web.webpages.razor system.web.webpages.razor.exe.stack trace filenotfoundexception could load file assembly system.web.webpages.razor version 3.0.0.0 culture neutralpublickeytoken 31bf3856ad364e35 one its dependencies system cannot find file specified microsoft.web.webpages.oauth.preapplicationstartcode.start 0 invalidoperationexception pre application start initialization method start typemicrosoft.web.webpages.oauth.preapplicationstartcode threw exception following error message could load file assembly system.web.webpages.razor version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies system cannot find file specified system.web.compilation.buildmanager.invokeprestartinitmethodscore icollection1 methods func1 sethostingenvironmentcultures 550 system.web.compilation.buildmanager.invokeprestartinitmethods icollection 1 methods 132 system.web.compilation.buildmanager.callprestartinitmethods string prestartinitlistpath 90 system.web.compilation.buildmanager.executepreappstart 135 system.web.hosting.hostingenvironment.initialize applicationmanager appmanager iapplicationhost apphost iconfigmappathfactory configmappathfactory hostingenvironmentparameters hostingparameters policylevel policylevel exception appdomaincreationexception 516 httpexception 0x80004005 pre application start initialization method start typemicrosoft.web.webpages.oauth.preapplicationstartcode threw exception following error message could load file assembly system.web.webpages.razor version 3.0.0.0 culture neutral publickeytoken 31bf3856ad364e35 one its dependencies system cannot find file specified system.web.httpruntime.firstrequestinit httpcontext context 9874840 system.web.httpruntime.ensurefirstrequestinit httpcontext context 101 system.web.httpruntime.processrequestnotificationprivate iis7workerrequest wr httpcontext context 254version information microsoft net framework version 4.0.30319 asp.net version 4.0.30319.18055 those who read far i don't have enough reputation make tag pulling out my hair appropriate extant tag please include kthx eta when i tried manually updating microsoft.aspnet.mvc version 3 here error i got package manager console install failed rolling back install package updating microsoft.aspnet.mvc 5.0.0 microsoft.aspnet.mvc 3.0.20105.1 failed unable find version microsoft.aspnet.mvc.fixeddisplaymodes compatible wi th microsoft.aspnet.mvc 3.0.20105.1 line 1 char 16 install package lt lt lt lt microsoft.aspnet.mvc version 3.0.20105.1 categoryinfo notspecified install package invalidoperationexception fullyqualifiederrorid nugetcmdletunhandledexceptionnuget.powershell.commands.installpackagecommandeta2 i got packages directory from my coworker have ms.aspnet.mvc v5 they're running just fine also have ms.aspnet.mvc.fixeddisplaymodes v5 so i'm going add both those yes i have backed up my entire solution eta3 so i re upgraded aspnet mvc v5 skipped deprecated mvcfixeddisplaynodes i got problem conflicting versions aspnet.webpages so i used fix conflicting versions asp.net web pages detected specified version quot 1.0.0.0 quot version bin quot 2.0.0.0 quot asp.met mvc 3and now my project runs thanks all help,You can find it in Nuget Package Microsoft ASP.NET Web Pages Version 3.2.0If you have a reference to an earlier version than 3.0.0.0 Delete the reference add the reference to the correct .dll in your packages folder and make sure "Copy Local" is set to "True" in the properties of the .dll.Then in your web.config (as mentioned by @MichaelEvanchik)  &lt;runtime&gt;&lt;assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1"&gt;  &lt;dependentAssembly&gt;&lt;assemblyIdentity name="System.Web.WebPages.Razor" PublicKeyToken="31bf3856ad364e35"/&gt;&lt;bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0"/&gt;  &lt;/dependentAssembly&gt;&lt;/assemblyBinding&gt;
convert boolean property editor dropdownlist mvc view,i currently have scaffolded view where boolean property my model gets passed html.editorfor helper html.editorfor model gt model.endcurrentdeal all well good what i'm really looking do massage dropdown like lt select&gt lt option value true selected selected gt yes&lt option&gt lt option value false gt no&lt option&gt lt select&gt what easiest way achieve thankschris,MVC 4@*/////////////////// bool ////////////////////////////////*@@model bool@Html.DropDownListFor(m =&gt; m new SelectList(new[] { new { Value = "true" Text = "Yes" }new { Value = "false" Text = "No" }}"Value""Text"Model))@*/////////////////// bool? ////////////////////////////////*@@model bool?@Html.DropDownListFor(m =&gt; m new SelectList(new[] { new { Value = "" Text = "(none)" }new { Value = "true" Text = "Yes" }new { Value = "false" Text = "No" }}"Value""Text"Model))
how get get parameters asp.net mvc apicontroller,i feel bit absurd asking i can't find way get parameters get request api foo sort name instance.in apicontroller class i gave public string get putting get string sort makes api foo bad request request instance apicontroller type systemnethttphttprequestmessage doesn't have querystring parameters property anything,The ApiController is designed to work without the HttpContext object (making it portable and allowing it to be hosted outside of IIS).You can still access the query string parameters but it is done through the following property:Request.GetQueryNameValuePairs()Here's an example loop through all the values:foreach (var parameter in Request.GetQueryNameValuePairs()){ var key = parameter.Key; var value = parameter.Value;}
why initializesimplemembershipattribute mvc 4 app,i think my understanding simplemembershipprovider almost 60 rest getting know how internally work.you can quickly found some issue when using initializesimplemembership filter only accountcontroller default template i think anywhere you use memberhsip api webmatrix.websecurity you need make sure filter should called first.later you use user.isinrole my layoutcshtml you need apply filter all controllers you start registering globally.however i just realize lazyinitializer.ensureinitialized which make initialization performed only once per app start.so why simplemembershipinitializer filter directly application start any reason use filter,I believe the template used an attribute for database initialization so that the non-authenticated portions of the site would still work if the initialization failed.For most practical purposes it's best to just have this done in the App_Start.
how can i get reference httpresponse asp.net mvc,i'm calling third party library takes systemwebhttpresponse i see i have httpresponsebase httpresponse like web forms.is way get httpresponse using mvc 3 edit i'm trying do controller method also corrected casing,In mvc application you can use HttpContext.ApplicationInstance.Response.This helped me for getting the HttpResponse in MVC Application.
mvc4 scaffolding add controller gives error ldquo unable retrieve metadata&hellip rdquo,i'm using rtm version windows 8 vs 2012 ultimate i have mvc4 project using sqlce 4.0 code first entity framework model.model very simple public class mything public int mythingid get set public int userid get set public string title get set public string address get set public string description get set public datetime date get set when i try create new controller built scaffolding too i get following error unable retrieve metadata mything using same dbcompiledmodel create contexts against different types database servers supported instead create separate dbcompiledmodel each type server being used.how do i get scaffolding work,I also stumbled into this symptom while running a tutorial on the subject of building an MVC Music Store application.There definitely seem to be a bug within Visual Studio. What seems to trigger this bug is choosing some name other than the default used for the connection string.My thanks goes to user dwaynef on http://forums.asp.net/t/1838396.aspx/1 for finding this workaround.A bit elaborated you need to temporarily during addition of the new scaffolding controller change the name of your connection string to 'DefaultConnection' in web.config:&lt;connectionStrings&gt; &lt;add name="DefaultConnection" ... /&gt;&lt;/connectionStrings&gt;If you have more than one connection string - make sure only this one is there while performing the action.
best practice passing mvc model knockoutjs,i googled around how pass mvc model knockoutjs seems two ways using html.raw json.encode model using get ajaxwhich ways best practice passing mvc model knockoutjs i know per requirement basis seems using get more cleaner versus html.raw method,I've successfully used several approaches.  In a strongly typed Razor view you can write the JavaScript ViewModel object like you would any other HTML inserting the Model elements as you go.  I find this klunky as Razor and JS don't play well together with Visual Studio and Intellisense but even with a bunch of red squigglies the resulting code works fine.&lt;script type="text/javascript"&gt;var data = [@for (int i=0; i &lt; Model.Packages.Count; i++){var package = Model.Packages[i];&lt;text&gt;{Id: ko.observable(package.Id)   Name: ko.observable(package.Name)  }&lt;/text&gt;}var viewModel = {var packages = ko.observableArray(data);// more code}ko.applyBindings(viewModel);&lt;/script&gt;This code can get ugly in a hurry depending on the complexity of your Model.  As you mentioned you can also serialize the model object into JSON using Html.Raw().  If you go that route you can use it to build your Knockout ViewModel using the KO Mapping library:&lt;script type="text/javascript"&gt;var data = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));var viewModel = ko.mapping.fromJS(data);ko.applyBindings(viewModel);&lt;/script&gt;This isn't as kludgy as the first option but I feel like I'm giving up too much control this way.  It means my KO ViewModel is pretty tightly coupled to the structure of my MVC ViewModel which I may or may not want.  Not to mention for this to work my JavaScript needs to be in my cshtml page which I really don't like.  Lastly both of these approaches are purely server side.  For more responsive web pages like SPIs you'll want to do more on the client side.My preference is to use $.getJSON calls client side from the JavaScript itself.  At that point you can process the return data into your ViewModel either hand rolling or using the mapping library.  If you are calling back to actions in your MVC controller just have the action return a JsonResult type (instead of an ActionResult).  (You can also do similar stuff with ContentResult)  If you can use the new MVC4 WebAPI those controllers will return JSON by default.
mvc 4-return error message from controller show view,i doing c project using razor vs2010 mvc 4 i need return error message from controller view show user.what i tried controller httppost public actionresult form edit formmodels model model.error msg model.update content model modelstate.addmodelerror error adfdghdghgdhgdhdgda viewbag.error tempdata error return redirecttoaction form edit form view model mvc cs.models.formmodels using ctrlr mvc cs.controllers.formcontroller using html.beginform form edit form formmethod.post lt table&gt lt tr&gt lt td&gt html.validationsummary error html.validationmessage error lt td&gt lt tr&gt lt tr&gt lt th&gt html.displaynamefor model gt model.content name html.dropdownlistfor x gt x.selectedvalue new selectlist model.countries model.dd value model.dd text select product lt th&gt lt tr&gt lt table&gt lt table&gt lt tr&gt lt td&gt lt input type submit value submit gt lt td&gt lt tr&gt lt table&gt please help me achieve,Thanks for all the replies.I was able to solve this by doing the following:CONTROLLER:[HttpPost]   public ActionResult form_edit(FormModels model){  model.error_msg = model.update_content(model);  return RedirectToAction("Form_edit" "Form" model);}public ActionResult form_edit(FormModels model string searchStringstring id){  string test = model.selectedvalue;  var bal = new FormModels();  bal.Countries = bal.get_contentdetails(searchString);  bal.selectedvalue = id;  bal.dd_text = "content_name";  bal.dd_value = "content_id";  test = model.error_msg;  ViewBag.head = "Heading";  if (model.error_msg != null)  {ModelState.AddModelError("error_msg" test);  }  model.error_msg = "";  return View(bal);}   VIEW:@using (Html.BeginForm("form_edit" "Form" FormMethod.Post)){  &lt;table&gt;&lt;tr&gt;  &lt;td&gt;@ViewBag.error@Html.ValidationMessage("error_msg")  &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;  &lt;th&gt;@Html.DisplayNameFor(model =&gt; model.content_name)@Html.DropDownListFor(x =&gt; x.selectedvalue new SelectList(Model.Countries Model.dd_value Model.dd_text) "-- Select Product--")  &lt;/th&gt;&lt;/tr&gt;  &lt;/table&gt;}
httpconfiguration missing assembly,i am building site using mvc4 i couldn't even begin i am having strange error my code using system using system.collections.generic using system.linq using system.web.http namespace myproject public static class webapiconfig public static void register httpconfiguration config config.routes.maphttproute name defaultapi routetemplate api controller id defaults new id routeparameter.optional error message type name assembly httpconfiguration does exist namespace system.web.http you missing using directive assembly reference also doesn't recognize readonly field routeparameter occurs me may have something do version my system.web dll version 4.0.0.0.another additional piece information when i type using systemweb intellisense does recognize http dllhowever code does recognize any its parameters,I encountered this error when cloning an MVC 4.0 application which previously worked for me. My problem was that the Microsoft.Net.Http NuGet package wasn't restoring properly. I solved it from the NuGet console:Update-Package -reinstall Microsoft.Net.Http
how use asp.net mvc 4 bundle less files release mode,i'm trying have less files my web project have mvc 4 bundling functionality call dotless library turn less css minify result give browser.i found example asp.net site under heading less coffeescript scss sass bundling has given me lesstransform class looks like public class lesstransform ibundletransform public void process bundlecontext context bundleresponse response response.content dotless.core.less.parse response.content response.contenttype text css line my bundleconfig class bundles.add new bundle content lesstest new lesstransform new cssminify include content less test.less finally i have following line my layout.cshtml lt head&gt styles.render content lesstest i have site debug mode rendered browser lt link href content less test.less rel stylesheet gt rules less file applied following link shows less has been correctly transformed css.however i put site release mode rendered out lt link href content less v les-hid6xuz3s2qkj35lvnwwq677wtaiiry6fux8gz01 rel stylesheet gt rules less file applied because following link gives 404 error from iis.so seems something going wrong bundling how do i get work release mode how do i find out what exactly going wrong,As a complement to the accepted answer  I created a LessBundle class which is the Less eqivalent of the StyleBundle class.LessBundle.cs code is:using System.Web.Optimization;namespace MyProject{public class LessBundle : Bundle{public LessBundle(string virtualPath) : base(virtualPath new IBundleTransform[] {new LessTransform() new CssMinify()}){}public LessBundle(string virtualPath string cdnPath): base(virtualPath cdnPath new IBundleTransform[] { new LessTransform() new CssMinify() }){}}}Usage is similar to the StyleBundle class specifying a LESS file instead of a CSS file. Add the following to your BundleConfig.RegisterBundles(BundleCollection) method:bundles.Add(new LessBundle("~/Content/less").Include( "~/Content/MyStyles.less"));UpdateThis method works fine with optimization switched off but I ran into some minor problems (with CSS resource paths) when optimization was switched on. After an hour researching the issue I discovered that I have reinvented the wheel...If you do want the LessBundle functionality I describe above check out System.Web.Optimization.Less.The NuGet package can be found here.
difference between mvchtmlstring.create html.raw,i am creating mvc project using mvc 4 razor after building some pages i wondering what difference between mvchtmlstring.create html.raw would nice you could help me here understand thanks advance,There is no practical difference.The MvcHtmlString.Create creates an instance of MvcHtmlString while the Html.Raw method creates an instance of HtmlString but MvcHtmlString just inherits from HtmlString so they work the same.
how can i call webapi method from mvc controller action method,how can i call web api method from mvc action controller method what i am trying my controller method public actionresult productdetail long id using var client new httpclient var productdetailurl url.routeurl defaultapi new httproute controller productdetails id id request.url.scheme var model client.getasync productdetailurl result.content.readasasync lt productitems&gt result return view model my web api method private productentities products new productentities public ienumerable&lt productitems&gt getproductdetail int id var produc products.executestorequery lt productitems&gt getproductdetail productid new sqlparameter productid id return produc when i am doing i am getting error var model my mvc action method after returning data saying newtonsoft.json.jsonserializationexception cannot deserialize json array ie 123 type productdetails.models.productitems deserialized type must array implement collection interface like ienumerable icollection ilist force json arrays deserialize add jsonarrayattribute type line 1 position 1 can any one help me doing suggest me any other best method correct me i am doing wrong any where i have show returned data my view data should returned my controller,When your ASP.NET web site is hosting together with Web API controller then you can call Web API as ordinary class method to avoid any delays related to HTTP request.And problem is not in Web API call. Problem is in result deserialization that comes from ExecuteStoreQuery make sure you have serializable collection in it. To make sure you can simply try to convert this method result to list before return and return from web api method serializable list then localize problem.UPD: So root of problem is in what ExecuteStoreQuery method returns. It returns ObjectResult. It actually implements IEnumerable but it's returned from EF and in some cases there are e.g. cyclic dependencies between objects that Json deserialzers couldn't resolve. To resolve problem simply convert explicitly ObjectResult to e.g. List:public IEnumerable&lt;ProductItems&gt; GetProductDetail(int ID){var products = products.ExecuteStoreQuery&lt;ProductItems&gt;(  "GetProductDetail @ProductID "   new SqlParameter("@ProductID" ID)); return products.ToList&lt;ProductItems&gt;();}When problem is actually with cycle dependencies in collections of your objects that come from EF you can switch it off in Json.NETAnd also check your client side deserialization:var model = client.GetAsync(productDetailUrl).Result.Content.ReadAsAsync&lt;List&lt;ProductItems&gt;&gt;().Result;But when you are hosting your ASP.NET MVC site and ASP.NET Web API in one project then you do not need all this stuff with HTTP request and serialization/deserialization just call your method as ordinary class method.
possible access mvc views located another project,i want separate my mvc project several projectsso first all i've created two projects front viewsthe front project web application contains controllers modelsthe views project class library project contains only viewsmy question how can i make controllers call views located views projecti have controllers like one public actionresult default return this.view,For including controllers you need to change your route registrations to tell them where to look for the controllers:routes.MapRoute(name: "Default" url: "{controller}/{action}/{id}"namespaces: new[] {"[Namespace of the Project that contains your controllers]"}defaults: new {controller = "Home" action = "Index" id = UrlParameter.Optional});for including View you create custom ViewEngine:public class CustomViewEngine: RazorViewEngine{public CustomViewEngine(){MasterLocationFormats = new string[]{"~/bin/Views/{1}/{0}.cshtml""~/bin/Views/{1}/{0}.vbhtml""~/bin/Views/Shared/{0}.cshtml""~/bin/Views/Shared/{0}.vbhtml"};ViewLocationFormats = new string[]{ "~/bin/Areas/{2}/Views/{1}/{0}.cshtml" "~/bin/Areas/{2}/Views/{1}/{0}.vbhtml" "~/bin/Areas/{2}/Views/Shared/{0}.cshtml" "~/bin/Areas/{2}/Views/Shared/{0}.vbhtml"};...}}protected void Application_Start(){ViewEngines.Engines.Add(new CustomViewEngine());for more information look at the default implementation of RazorViewEngin.Here some good articles:Storing ASP.NET MVC Controllers &amp; Views in separate assembliesASP.NET MVC: Putting Your Controllers In A Separate AssemblyHow to call controllers in external assemblies in an ASP.NET MVC application
pass values checkbox controller action asp.net mvc4,i want test checkbox checked from my acion methon what i need pass checkbox value from view controllerthis my view@using html.beginform index graphe lt table style width 100 border 1 gt lt tbody&gt lt tr&gt lt td&gt responsable lt td&gt lt td&gt lt select id responsables name responsables gt lt option&gt selectionnez lt option&gt lt select&gt lt td&gt lt td&gt lt input id responsable name checkresp type checkbox gt lt td&gt lt tr&gt lt tr&gt lt td&gt lt input type submit value afficher id buttonsubmit gt lt td&gt lt td&gt lt input class button id buttonreset type button value annuler gt lt td&gt lt tr&gt lt tbody&gt i try public actionresult index string responsables bool checkresp highcharts chart new highcharts chart responsables null checkresp chart global else chart resp responsables elsechart global return view chart i have error le dictionnaire de paramètres contient une entrée null pour le paramètre checkact de type non nullable system.boolean pour la méthode system.web.mvc.actionresult index system.string system.string boolean dans project.controllers.graphecontroller un paramètre facultatif doit être un type référence un type nullable ou être déclaré en tant que paramètre facultatif.nom du paramètre parameterscan you help me please,For some reason Andrew method of creating the checkbox by hand didn't work for me using Mvc 5.  Instead I used this @Html.CheckBox("checkResp")to create a checkbox that would play nice with the controller.
code duplication try catch block,better way catch exceptions i seem duplicating lot code basically every controller i have catch statement which does try do something might throw exceptions catch exception ex open database connection save exception details connection cannot made database save exception text file i have 4 controllers around 5-6 actions methods each controller which lot code duplication how can i trim down amount line try catch statement above,You don't need to put try/catch blocks on every method. That's tedious and painful! Instead you can use the Application_Error event of Global.asax for logging the exceptions. The code below is the sample implementation which can be used to catch exceptions that occur in your web application.protected void Application_Error(object sender EventArgs e){var error = Server.GetLastError();if (!string.IsNullOrWhiteSpace(error.Message)){//do whatever you want if exception occursContext.ClearError();}}I would like also to stress that "Handled exception" especially trying to put try/catch blocks on most methods is one of the "Top 3 silent performance killers for IIS / ASP.NET apps" as explained in this blog http://mvolo.com/fix-the-3-high-cpu-performance-problems-for-iis-aspnet-apps/
asp.net mvc4 redirect login page,i'm creating web application using asp.net mvc 4 c i want all users logged before using application.i m using asp.net membership custom database.one method check membership.getuser null every function.but isn't any easier way than checking user login state every function maybe checking web.config global.asax etc,Put [Authorize] over each action that you want only logged in users accessing. You can also do this at the controller level making all actions within the controller secured. The latter is probably best for you since you probably only want all of your pages disabled for guests.Here's what the class-level one looks like:[Authorize]public class SomethingController{//...}and here's an action-level one:public class SomethingController{[Authorize]public ActionResult SomeAction(Parameter someParameter){//...   }}Another way to do it if all or most of your pages use the same master page is to put:&lt;script type="text/javascript&gt;@if(!Request.IsAuthenticated) {window.location.href = redirectURL;}&lt;/script&gt;or if you arent using razor syntax&lt;script type="text/javascript&gt;  &lt;% if(!Request.IsAuthenticated) { %&gt;window.location.href = redirectURL;&lt;% } %&gt;&lt;/script&gt;in the master page. That way all pages which use that master page will redirect elsewhere if the user is not logged in. This only applies if you are using the built-in authentication though.  NOTE: This option is far less secure than the first option. Use this only if site security is not a big concern
displayformat textboxfor mvc,i need round off 4 digit decimal 2 digits show mvc 3 uisomething like 58.8964 58.90 tried following how should i use editorfor mvc currency money type working i am using textboxfor i removed applyformatineditmode here even i tried applyformatineditmode nothing works still showing me 58.8964.mymodelclass displayformat dataformatstring 0 f2 public decimal totalamount get set html.textboxfor m gt m.totalamount how can i achieve round off i can't use editorfor m m.totalamount here i need pass some htmlattributesedit after debugging mvc source code internally use string valueparameter convert.tostring value cultureinfo.currentculture mvchtmlstring inputhelper method inputextension.cs takes object value parameter converting using any display format how could we fix i managed fix way i have custom helper i can able manage below code string.isnullorempty modelmetadata.displayformatstring string formatstring modelmetadata.displayformatstring string formattedvalue string.format cultureinfo.currentculture formatstring modelmetadata.model string name expressionhelper.getexpressiontext expression string fullname htmlhelper.viewcontext.viewdata.templateinfo.getfullhtmlfieldname name return htmlhelper.textbox fullname formattedvalue htmlattributes else return htmlhelper.textboxfor expression htmlattributes,This works in MVC5@Html.TextBoxFor(m =&gt; m.TotalAmount "{0:0.00}")
how can i use script defer attribute asp mvc 4 bundles scripts.render,i have looked through google stackoverflow haven't found answer any built way make bundle execute deffered does someone know extension helper method someone wrote do,The answer above is great. I just want to quickly paste my code over here for those who wants to have a  more concise syntax.Add a new C# class// --------------------------------------------------------------------------------------------------------------------// &lt;copyright file="Scripts7.cs" company="Believe"&gt;//   http://believeblog.azurewebsites.net/// &lt;/copyright&gt;// --------------------------------------------------------------------------------------------------------------------using System.Web;using System.Web.Optimization;namespace MVCExtension{/// &lt;summary&gt;/// The scripts./// &lt;/summary&gt;public static class Scripts{/// &lt;summary&gt;/// Render scripts as deferred/// &lt;/summary&gt;/// &lt;param name="paths"&gt;/// The paths./// &lt;/param&gt;/// &lt;returns&gt;/// The &lt;see cref="IHtmlString"/&gt;./// &lt;/returns&gt;public static IHtmlString RenderDefer(params string[] paths){return Scripts.RenderFormat(@"&lt;script src='{0}' defer&gt;&lt;/script&gt;" paths);}}}Then use Razor syntax:@Scripts.RenderDefer("~/bundles/jquery")Or Webform syntax:&lt;%: Scripts.RenderDefer("~/bundles/jquery") %&gt;
how redirect logon page when session state time out completed asp.net mvc,i have asp.net mvc4 application where i am implementing sessiontimeout like lt configuration&gt lt system.web gt lt sessionstate timeout 2 gt lt sessionstate&gt lt system.web gt lt configuration&gt authentication lt configuration&gt lt system.web gt lt authentication mode forms gt lt forms loginurl account logon timeout 1 gt lt authentication&gt lt system.web gt lt configuration&gt after session has expired 2 mins i need redirect logon page redirection doesn't occur how can i change code so redirect,I discover very simple way to redirect Login Page When session end in MVC. I have already tested it and this works without problems.In short I catch session end in _Layout 1 minute before and make redirection.I try to explain everything step by step.If we want to session end 30 minute after and redirect to loginPage see this steps:Change the web config like this (set 31 minute): &lt;system.web&gt;&lt;sessionState timeout="31"&gt;&lt;/sessionState&gt; &lt;/system.web&gt;Add this JavaScript in _Layout (when session end 1 minute before this code makes redirect it makes count time after user last action not first visit on site)&lt;script&gt;//session end var sessionTimeoutWarning = @Session.Timeout- 1;var sTimeout = parseInt(sessionTimeoutWarning) * 60 * 1000;setTimeout('SessionEnd()' sTimeout);function SessionEnd() {window.location = "/Account/LogOff";}&lt;/script&gt;Here is my LogOff Action which makes only LogOff and redirect LoginIn Pagepublic ActionResult LogOff(){Session["User"] = null; //it's my session variableSession.Clear();Session.Abandon();FormsAuthentication.SignOut(); //you write this when you use FormsAuthenticationreturn RedirectToAction("Login" "Account");} I hope this is a very useful code for you.
razor converting enum int inside view,i razor view i have line like bleow&lt option value int16 phonetype.work gt phonetype.work lt option&gt option select list dropdownlistin i have enum phonetype.for text filed phonetype.work works finebut value field int16 phonetype.work workingwhat can i do get integer value enum value field,This syntax should do the trick (note the () instead of {}):&lt;option value='@( (Int16) PhoneType.Work )'&gt;@PhoneType.Work&lt;/option&gt;
can i deploy my asp.net mvc 4 application net 4,i want know about thing asp.net mvc 4 application can run net 4 server.i am trying deploy my mvc4 application i am got error 500 internal server error problem resource you looking cannot displayed.i target net 4 framework i am still having error i am sure what happen server i am trying look other post i did find any post who can clearify mvc 4 can run net server,Yes. ASP.Net MVC 4 will run on ASP.Net 4 and ASP.Net 4.5. I am running a site on ASP.Net 4 and it is also confirmed in this blog post by Scott Gu. This assumes that you are not targeting any new 4.5 features in your application.Be sure that you are copying the required MVC 4 .dll files in your bin folder if the server does not already have them installed. This post by Phil Haack explains how to bin deploy version 3. Hanselman has a similar article. You will need to check the version 4 release notes for the current .dlls required.We may be able to provide a more specific answer if you can provide some additional details and let us know what version of IIS and Visual Studio you are running.
mvc model validation from database,i have very simple model needs get validated from databasepublic class useraddress public string citycode get set citycode can have values only available my database table.i know i can do something like httppost public actionresult address useraddress model var connection create connectionvar cityrepository new cityrepository connection cityrepository.isvalidcitycode model.citycode added model error seems very wet i have use model lot placed adding same logic each place seems like i am using mvc architecture properly.so what best pattern validate model from database note most validation single field lookup from database other validation may include combination field right now i am happy single field lookup validation long dry using too much reflection acceptable.no client side validation anyone who answering terms client side validation i do need any validation most my validation server sided i need same please do answer client side validation methodsps any one can give me hint how do attribute based validation from database extremely greatful,Please check the EDIT from attached from the middle of this answer for more elaborate and generic solution.Following is my solution to do a simple Attribute based Validation. Create an attribute - public class Unique : ValidationAttribute{public Type ObjectType { get; private set; }public Unique(Type type){ObjectType = type;}protected override ValidationResult IsValid(object value ValidationContext validationContext){if (ObjectType == typeof(Email)){// Here goes the code for creating DbContext For testing I created List&lt;string&gt;// DbContext db = new DbContext();var emails = new List&lt;string&gt;();emails.Add("ra@ra.com");emails.Add("ve@ve.com");var email = emails.FirstOrDefault(u =&gt; u.Contains(((Email)value).EmailId));if (String.IsNullOrEmpty(email))return ValidationResult.Success;elsereturn new ValidationResult("Mail already exists");}return new ValidationResult("Generic Validation Fail");}}I created a simple model to test - public class Person{[Required][Unique(typeof(Email))]public Email PersonEmail { get; set; }[Required]public GenderType Gender { get; set; }}public class Email{public string EmailId { get; set; }}Then I created following View - @model WebApplication1.Controllers.Person@using WebApplication1.Controllers;&lt;script src="~/Scripts/jquery-1.10.2.min.js"&gt;&lt;/script&gt;&lt;script src="~/Scripts/jquery.validate.min.js"&gt;&lt;/script&gt;&lt;script src="~/Scripts/jquery.validate.unobtrusive.min.js"&gt;&lt;/script&gt;@using (Html.BeginForm("CreatePersonPost" "Sale")){@Html.EditorFor(m =&gt; m.PersonEmail)@Html.RadioButtonFor(m =&gt; m.Gender GenderType.Male) @GenderType.Male.ToString()@Html.RadioButtonFor(m =&gt; m.Gender GenderType.Female) @GenderType.Female.ToString()@Html.ValidationMessageFor(m =&gt; m.Gender)&lt;input type="submit" value="click" /&gt;}Now When I enter the same Email - ra@ra.com and click on Submit button I can get errors in my POST action as shown below. EDIT Here goes more generic and detailed answer.Create IValidatorCommand - public interface IValidatorCommand{object Input { get; set; }CustomValidationResult Execute();}public class CustomValidationResult{public bool IsValid { get; set; }public string ErrorMessage { get; set; }}Lets assume we have our Repository and UnitOfWork defined in following way -public interface IRepository&lt;TEntity&gt; where TEntity : class{List&lt;TEntity&gt; GetAll();TEntity FindById(object id);TEntity FindByName(object name);}public interface IUnitOfWork{void Dispose();void Save();IRepository&lt;TEntity&gt; Repository&lt;TEntity&gt;() where TEntity : class;} Now lets created our own Validator Commands - public interface IUniqueEmailCommand : IValidatorCommand { }public interface IEmailFormatCommand : IValidatorCommand { }public class UniqueEmail : IUniqueEmailCommand{private readonly IUnitOfWork _unitOfWork;public UniqueEmail(IUnitOfWork unitOfWork){_unitOfWork = unitOfWork;}public object Input { get; set; }public CustomValidationResult Execute(){// Access Repository from Unit Of work here and perform your validation based on Inputreturn new CustomValidationResult { IsValid = false ErrorMessage = "Email not unique" };}}public class EmailFormat : IEmailFormatCommand{private readonly IUnitOfWork _unitOfWork;public EmailFormat(IUnitOfWork unitOfWork){_unitOfWork = unitOfWork;}public object Input { get; set; }public CustomValidationResult Execute(){// Access Repository from Unit Of work here and perform your validation based on Inputreturn new CustomValidationResult { IsValid = false ErrorMessage = "Email format not matched" };}}Create our Validator Factory which will give us a particular command based on Type.public interface IValidatorFactory{Dictionary&lt;TypeIValidatorCommand&gt; Commands { get; }}public class ValidatorFactory : IValidatorFactory{private static Dictionary&lt;TypeIValidatorCommand&gt; _commands = new Dictionary&lt;Type IValidatorCommand&gt;();public ValidatorFactory() { }public Dictionary&lt;Type IValidatorCommand&gt; Commands{get{return _commands;}}private static void LoadCommand(){// Here we need to use little Dependency Injection principles and// populate our implementations from a XML File dynamically// at runtime. For demo I am passing null in place of UnitOfWork_commands.Add(typeof(IUniqueEmailCommand) new UniqueEmail(null));_commands.Add(typeof(IEmailFormatCommand) new EmailFormat(null));}public static IValidatorCommand GetCommand(Type validatetype){if (_commands.Count == 0)LoadCommand();var command = _commands.FirstOrDefault(p =&gt; p.Key == validatetype);return command.Value ?? null;}}And the renovated Validation Attribute - public class MyValidateAttribute : ValidationAttribute{public Type ValidateType { get; private set; }private IValidatorCommand _command;public MyValidateAttribute(Type type){ValidateType = type;}protected override ValidationResult IsValid(object value ValidationContext validationContext){_command = ValidatorFactory.GetCommand(ValidateType);_command.Input = value;var result = _command.Execute();if (result.IsValid)return ValidationResult.Success;elsereturn new ValidationResult(result.ErrorMessage);}}Finally we can use our attribute as follows - public class Person{[Required][MyValidate(typeof(IUniqueEmailCommand))]public string Email { get; set; }[Required]public GenderType Gender { get; set; }}Output as follows - EDIT Detailed explanation to make this solution more generic.Lets say I have a property Email where I need to do following validations - FormatLengthUniqueIn that case we can create IEmailCommand inherited from IValidatorCommand. Then inherit IEmailFormatCommand IEmailLengthCommand and IEmailUniqueCommand from IEmailCommand.Our ValidatorFactory will hold the pool of all three command implementations in Dictionary&lt;Type IValidatorCommand&gt; Commands.Now instead of decorating our Email property with three commands we can decorate it with IEmailCommand.In this case our ValidatorFactory.GetCommand() method needs to be changed. Instead of returning one command every time it should return all matching commands for a particular type. So basically its signature should be List&lt;IValidatorCommand&gt; GetCommand(Type validatetype).Now as we can get all the commands associated with a property we can loop the commands and get the Validation results in our ValidatorAttribute.
any responsive templates asp.net mvc 3/4,i searching responsive templates asp.net mvc 3/4 which one could use base extend per requirement.after googling while i came across two options.zurb foundation also have nuget package available here detailed procedure explained here.twitter bootstrap have never used looks promisingkickstrapdoes any one know any more compatible better responsive templates one could use asp.net mvc websites would certainly makes lives all mvc developers easier have responsive template begin thanks,My totally biased opinion is choice #1 Zurb Foundation. (I wrote the article you referenced the NuGet package and prototyping framework)I've been working with Foundation since it's release and I have to say it has been a pleasant experience. I have completed 6+ projects now using the framework and have yet to hit a major snag.Also the latest version has been released on NuGet Foundation3_MVC4 (Foundation 3 &amp; MVC 4)Please feel free to browse the sites I've built using the framework on MVC:www.TubeTurns.comwww.RasklUserMeeting.comUpdated Single Page site demo: https://github.com/EdCharbeneau/Foundation3SinglePageRWD
difference between renderbody rendersection,mvc razor syntax i'm trying understand why we need renderbody example code taken from example lt html&gt lt head&gt lt meta charset utf-8 gt lt title&gt my website&lt title&gt lt style&gt container width 700px left float left width 150px content padding 0 210px 0 160px right float right width 200px clear clear both lt style&gt lt head&gt lt body&gt lt div id container gt lt div id left gt rendersection left required false lt div&gt lt div id content gt renderbody lt div&gt lt div id right gt rendersection right required false lt div&gt lt div class clear gt lt div&gt lt div&gt lt body&gt lt html&gt layout 3collayout.cshtml lt h1 gt main content&lt h1 gt section left lt h1 gt left content&lt h1 gt section right lt h1 gt right content&lt h1 gt why can't i simply use rendersection everything like lt div id content gt rendersection body required true lt div&gt section body lt h1 gt body content&lt h1 gt,Start with @RenderBody this is vital. Your _layout has to have it. This is where your view will be rendered. If you leave it out your app will die (I think on run time as Views are not compiled). [Correction:Without Renderbody the View referencing this particular layout will die on run-time. (Important to note that layout are themselves optional.)]Sections are code blocks defined within your View with similar names@RenderSection("Navbar" required: false)could have a corresponding code block in your View.@section Navbar{&lt;!-- Content Here --&gt;}I emphasize could because the Navbar is delcared required: falseSections are a way each View can share a piece of functionality / markup with the _layout.Followup:In my modest time of MVC development I have learned to make modest use of sections. Sections are useful for making sure your JS references are placed in your HTML  section (even though this is an antiquated practice.Sections are useful for top and side navsSections never be required. To do so makes your code fragile!
mocking database transactions,i have pair tables parent child relationship incident incidentdetails i have viewmodel contains information from both tables i have business layer method passed instance viewmodel needs update both tables.so method i'm using ef6 s new transaction mechanism using var transaction this.db.database.begintransaction try various database stuffthis.db.savechanges more database stuffthis.db.savechanges yet more database stuffthis.db.savechanges transaction.commit catch exception ex transaction.rollback this.logger.logexception ex exception caught transaction rolling back throw so my problem how do i test i'm using microsoft unit testing framework moq i have had trouble mocking up dbcontexts dbset&lt s i can't seem figure out how get around transaction stuff.if i don't attempt mock transaction i get invalidoperationexception connecting string named xxx could found application config file which makes perfect sense isn't application config file isn't any database.but i try mock begintransaction i get initialization errors notsupportedexception invalid setup non virtual member m m.database.begintransaction got me chasing weeds looking decompiles net methods trying identify some class might derive from usable interface something where i could somehow inject mocking object.i m trying unit test ms transactional code i just want make sure appropriate changes made appropriate records each tables sits looks like non testable any method uses transactions non testable just pain.i ve googled around found anything use has anyone run issue anyone have ideas how proceed,You can wrap the context and the transaction in an Interface and then implement the interface by some provider class:public interface IDbContextProvider{YourContext Context { get; set; }DbContextTransaction DbTransaction { get; set; }void Commit();void Rollback();void BeginTransaction();void SaveChanges();}and then implement it:public class EfContextProvider : IDbContextProvider{public EfContextProvider(YourContext context){Context = context;}public YourContext Context { set; get; }public DbContextTransaction DbTransaction { set; get; }public void Commit(){DbTransaction.Commit();}public void Rollback(){DbTransaction.Rollback();}public void BeginTransaction(){DbTransaction=Context.Database.BeginTransaction();}public void SaveChanges(){Context.SaveChanges();}}so now give your class the IDbContextProvider dependency and work with it (It has also the context inside) . Maybe substitute the using block with _contextProvider.BeginTransaction(); and then also _contextProvider.Commit(); or _contextProvider.Rollback();
asp.net web api generate all parameters from model help pages,i'm busy creating web api inside asp mvc4 application i am using library suggested asp.net site generating documentation http www.asp.net web api overview creating web apis creating api help pages my problem my parameter model i can't specify what properties model contains generated help pages.here example model public class testmodel property string firstname get set property string surname get set property boolean active get set action lt summary&gt test action lt summary&gt lt param name model gt model&lt param&gt lt works lt param name firstname gt first name lt param&gt lt doesn't work lt param name model.surname gt surname&lt param&gt lt doesn't workpublic httpresponsemessage post my.namespace.models.testmodel model only parameter model gets generated.i took look xml document gets generated documentation does add other parameters lt member name my.namespace.api.post my.namespace.models.testmodel gt lt summary&gt test action lt summary&gt lt param name model&gt model&lt param&gt lt param name firstname gt first name lt param&gt lt param name model.surname gt surname&lt param&gt lt member&gt help pages only generates parameter model.i have traced down method where gets parameters from xml.collection lt apidescription&gt apidescriptions config.services.getapiexplorer apidescriptions located helppageconfigurationextentions.cs which auto generated.am i approaching wrong way does anyone know work around any suggestions solutions appreciated,josant's answer works great. I did find it was a bit-over zealous however. I found it was reporting simple things like strings as models and reporting them to be a Char array with a length field!We only needed this for models so I added this code to the end of the GetModelDocumentation method:if (parameterDescriptor.ParameterName == "value" || parameterDescriptor.ParameterName == "model"){retDictionary.Add(parameterDescriptor.ParameterName typeDocs);}Now it only returns parameter details for non-simple types.
possible use async await mvc 4 authorizeattribute,only override i see exposed mvc authorizeattribute public override void onauthorization authorizationcontext filtercontext which suitable use async await because doesn't return task another way create authorizeattribute mvc allows use async await,With asp.net core being released Stephen Cleary's answer is correct and the ideal way to go if you are running the latest asp.net core.For those that haven't updated yet I was able to work around my issue using an async HttpModule that passes state into the AuthorizationFilter via HttpContext.Items. I added more detail about my solution here - http://evandontje.com/2017/08/15/solutions-for-async-await-in-mvc-action-filters/
webapi unify error messages format from apicontroller oauthauthorizationserverprovider,my webapi project i'm using owin.security.oauth add jwt authentication.inside grantresourceownercredentials my oauthprovider i'm setting errors using below line context.seterror invalid grant account locked returned client error invalid grant error description account locked after user gets authenticated he tries do normal request one my controllers he gets below response when model invalid using fluentvalidation message request invalid modelstate client.email email valid client.password password required both requests returning 400 bad request sometimes you must look error description field sometimes messagei able create custom response message only applies results i'm returning.my question possible replace message error response returned modelvalidatorproviders other places i've read about exceptionfilterattribute i don't know good place start fluentvalidation shouldn't problem because all does adding errors modelstate.edit next thing i'm trying fix inconsistent naming convention returned data across webapi when returning error from oauthprovider we have error details when returning badrequest modelstate from apicontroller we have modelstate you can see first uses snake case second camelcase,UPDATED ANSWER (Use Middleware)Since the Web API original delegating handler idea meant that it would not be early enough in the pipeline as the OAuth middleware then a custom middleware needs to be created... public static class ErrorMessageFormatter {public static IAppBuilder UseCommonErrorResponse(this IAppBuilder app) {app.Use&lt;JsonErrorFormatter&gt;();return app;}public class JsonErrorFormatter : OwinMiddleware {public JsonErrorFormatter(OwinMiddleware next): base(next) {}public override async Task Invoke(IOwinContext context) {var owinRequest = context.Request;var owinResponse = context.Response;//buffer the response stream for latervar owinResponseStream = owinResponse.Body;//buffer the response stream in order to intercept downstream writesusing (var responseBuffer = new MemoryStream()) {//assign the buffer to the resonse bodyowinResponse.Body = responseBuffer;await Next.Invoke(context);//reset bodyowinResponse.Body = owinResponseStream;if (responseBuffer.CanSeek &amp;&amp; responseBuffer.Length &gt; 0 &amp;&amp; responseBuffer.Position &gt; 0) {//reset buffer to read its contentresponseBuffer.Seek(0 SeekOrigin.Begin);}if (!IsSuccessStatusCode(owinResponse.StatusCode) &amp;&amp; responseBuffer.Length &gt; 0) {//NOTE: perform your own content negotiation if desired but for this using JSONvar body = await CreateCommonApiResponse(owinResponse responseBuffer);var content = JsonConvert.SerializeObject(body);var mediaType = MediaTypeHeaderValue.Parse(owinResponse.ContentType);using (var customResponseBody = new StringContent(content Encoding.UTF8 mediaType.MediaType)) {var customResponseStream = await customResponseBody.ReadAsStreamAsync();await customResponseStream.CopyToAsync(owinResponseStream (int)customResponseStream.Length owinRequest.CallCancelled);owinResponse.ContentLength = customResponseStream.Length;}} else {//copy buffer to response stream this will push it down to clientawait responseBuffer.CopyToAsync(owinResponseStream (int)responseBuffer.Length owinRequest.CallCancelled);owinResponse.ContentLength = responseBuffer.Length;}}}async Task&lt;object&gt; CreateCommonApiResponse(IOwinResponse response Stream stream) {var json = await new StreamReader(stream).ReadToEndAsync();var statusCode = ((HttpStatusCode)response.StatusCode).ToString();var responseReason = response.ReasonPhrase ?? statusCode;//Is this a HttpErrorvar httpError = JsonConvert.DeserializeObject&lt;HttpError&gt;(json);if (httpError != null) {return new {error = httpError.Message ?? responseReasonerror_description = (object)httpError.MessageDetail?? (object)httpError.ModelState?? (object)httpError.ExceptionMessage};}//Is this an OAuth Errorvar oAuthError = Newtonsoft.Json.Linq.JObject.Parse(json);if (oAuthError["error"] != null &amp;&amp; oAuthError["error_description"] != null) {dynamic obj = oAuthError;return new {error = (string)obj.errorerror_description = (object)obj.error_description};}//Is this some other unknown error (Just wrap in common model)var error = JsonConvert.DeserializeObject(json);return new {error = responseReasonerror_description = error};}bool IsSuccessStatusCode(int statusCode) {return statusCode &gt;= 200 &amp;&amp; statusCode &lt;= 299;}}}...and registered early in the pipeline before the the authentication middlewares and web api handlers are added.public class Startup {public void Configuration(IAppBuilder app) {app.UseResponseEncrypterMiddleware();app.UseRequestLogger();//...(after logging middle ware)app.UseCommonErrorResponse();//... (before auth middle ware)//...code removed for brevity}} This example is just a basic start. It should be simple enough able to extend this starting point.Though in this example the common model looks like what is returned from OAuthProvider any common object model can be used.Tested it with a few In-memory Unit Tests and through TDD was able to get it working.[TestClass]public class UnifiedErrorMessageTests {[TestMethod]public async Task _OWIN_Response_Should_Pass_When_Ok() {//Arrangevar message = "\"Hello World\"";var expectedResponse = "\"I am working\"";using (var server = TestServer.Create&lt;WebApiTestStartup&gt;()) {var client = server.HttpClient;client.DefaultRequestHeaders.Accept.Clear();client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));var content = new StringContent(message Encoding.UTF8 "application/json");//Actvar response = await client.PostAsync("/api/Foo" content);//AssertAssert.IsTrue(response.IsSuccessStatusCode);var result = await response.Content.ReadAsStringAsync();Assert.AreEqual(expectedResponse result);}}[TestMethod]public async Task _OWIN_Response_Should_Be_Unified_When_BadRequest() {//Arrangevar expectedResponse = "invalid_grant";using (var server = TestServer.Create&lt;WebApiTestStartup&gt;()) {var client = server.HttpClient;client.DefaultRequestHeaders.Accept.Clear();client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));var content = new StringContent(expectedResponse Encoding.UTF8 "application/json");//Actvar response = await client.PostAsync("/api/Foo" content);//AssertAssert.IsFalse(response.IsSuccessStatusCode);var result = await response.Content.ReadAsAsync&lt;dynamic&gt;();Assert.AreEqual(expectedResponse (string)result.error_description);}}[TestMethod]public async Task _OWIN_Response_Should_Be_Unified_When_MethodNotAllowed() {//Arrangevar expectedResponse = "Method Not Allowed";using (var server = TestServer.Create&lt;WebApiTestStartup&gt;()) {var client = server.HttpClient;client.DefaultRequestHeaders.Accept.Clear();client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));//Actvar response = await client.GetAsync("/api/Foo");//AssertAssert.IsFalse(response.IsSuccessStatusCode);var result = await response.Content.ReadAsAsync&lt;dynamic&gt;();Assert.AreEqual(expectedResponse (string)result.error);}}[TestMethod]public async Task _OWIN_Response_Should_Be_Unified_When_NotFound() {//Arrangevar expectedResponse = "Not Found";using (var server = TestServer.Create&lt;WebApiTestStartup&gt;()) {var client = server.HttpClient;client.DefaultRequestHeaders.Accept.Clear();client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));//Actvar response = await client.GetAsync("/api/Bar");//AssertAssert.IsFalse(response.IsSuccessStatusCode);var result = await response.Content.ReadAsAsync&lt;dynamic&gt;();Assert.AreEqual(expectedResponse (string)result.error);}}public class WebApiTestStartup {public void Configuration(IAppBuilder app) {app.UseCommonErrorMessageMiddleware();var config = new HttpConfiguration();config.Routes.MapHttpRoute(name: "DefaultApi"routeTemplate: "api/{controller}/{id}"defaults: new { id = RouteParameter.Optional });app.UseWebApi(config);}}public class FooController : ApiController {public FooController() {}[HttpPost]public IHttpActionResult Bar([FromBody]string input) {if (input == "Hello World")return Ok("I am working");return BadRequest("invalid_grant");}}}ORIGINAL ANSWER (Use DelegatingHandler)Consider using a DelegatingHandlerQuoting from an  article found online.  Delegating handlers are extremely useful for cross cutting concerns.  They hook into the very early and very late stages of the  request-response pipeline making them ideal for manipulating the  response right before it is sent back to the client.This example is a simplified attempt at the unified error message for HttpError responsespublic class HttpErrorHandler : DelegatingHandler {protected override async Task&lt;HttpResponseMessage&gt; SendAsync(HttpRequestMessage request CancellationToken cancellationToken) {var response = await base.SendAsync(request cancellationToken);return NormalizeResponse(request response);}private HttpResponseMessage NormalizeResponse(HttpRequestMessage request HttpResponseMessage response) {object content;if (!response.IsSuccessStatusCode &amp;&amp; response.TryGetContentValue(out content)) {var error = content as HttpError;if (error != null) {var unifiedModel = new {error = error.Messageerror_description = (object)error.MessageDetail ?? error.ModelState};var newResponse = request.CreateResponse(response.StatusCode unifiedModel);foreach (var header in response.Headers) {newResponse.Headers.Add(header.Key header.Value);}return newResponse;}}return response;}}Though this example is very basic it is trivial to extend it to suit your custom needs.Now it is just a matter of adding the handler to the pipeline public static class WebApiConfig {public static void Register(HttpConfiguration config) {config.MessageHandlers.Add(new HttpErrorHandler());// Other code not shown...}}  Message handlers are called in the same order that they appear in  MessageHandlers collection. Because they are nested the response message travels in the other direction. That is the last handler is  the first to get the response message.Source: HTTP Message Handlers in ASP.NET Web API
asp.net mvc 4 extensionlessurlhandler,i use vs 2012 created two application application 1 mvc 3 net 4.5application 2 mvc 4 net 4.5if i compare web.config applications i see app 2 mvc 4 has following handlers registered extensionlessurlhandler isapi-4.0_32bitextensionlessurlhandler-isapi-4.0_64bitextensionlessurlhandler-integrated-4.0could anybody please explain how when used one more question optional handlers required now where should i put my handlers before after them,Here is a blog post that may be helpful. http://blogs.msdn.com/b/tmarq/archive/2010/05/26/how-extensionless-urls-are-handled-by-asp-net-v4.aspx(which ironically doesn't use an extensionless url)My understanding is that you will need IIS 7 or greater to benefit from the Integrated mapping and for anything less you will need to use one of the other ISAPI handlers.
get response from postasjsonasync,i have line code var response new httpclient postasjsonasync posturi model result called webapi controller returns bool make sure object saved how do i return bool response,The accepted answer is technically correct but blocks the current thread on calls to .Result. If you are using .NET 4.5 or higher you should avoid that in almost all situations. Instead use the equivalent asynchronous (non-blocking) version:var httpClient = new HttpClient();var response = await httpClient.PostAsJsonAsync(posturi model);bool returnValue = await response.Content.ReadAsAsync&lt;bool&gt;();Note that the method containing the above code needs to be marked async and should itself be awaited.
you must call ldquo websecurity.initializedatabaseconnection rdquo method before you call any other method ldquo websecurity&rdquo class,everytime i restart debugging visual studio i get freaking error you must call websecurity.initializedatabaseconnection method before you call any other method websecurity class call should placed appstart.cshtml file root your site.but everytime when i deploy app prod i get error here randomly.i do put proper tag authorize roles admin initializesimplemembership public class indexcontroller controllerto controller here filter way just doesnt wanna work.using system using system.data.entity using system.data.entity.infrastructure using system.threading using system.web.mvc using meetingtaskmanagement.models using webmatrix.webdata namespace meetingtaskmanagement.filters attributeusage attributetargets.class attributetargets.method allowmultiple false inherited true public sealed class initializesimplemembershipattribute actionfilterattribute private static simplemembershipinitializer initializer private static object initializerlock new object private static bool isinitialized public override void onactionexecuting actionexecutingcontext filtercontext ensure asp.net simple membership initialized only once per app startlazyinitializer.ensureinitialized ref initializer ref isinitialized ref initializerlock private class simplemembershipinitializer public simplemembershipinitializer database.setinitializer lt userscontext&gt null try using var context new userscontext context.database.exists create simplemembership database without entity framework migration schema iobjectcontextadapter context objectcontext.createdatabase websecurity.initializedatabaseconnection defaultconnection userprofile userid username autocreatetables true catch exception ex throw new invalidoperationexception asp.net simple membership database could initialized more information please see http go.microsoft.com fwlink linkid 256588 ex can someone help me sort out,To simplify your Global.asax you can put the code for initialization into class AuthConfig like this:public static class AuthConfig{private static SimpleMembershipInitializer _initializer;private static object _initializerLock = new object();private static bool _isInitialized;public static void RegisterAuth(){// Ensure ASP.NET Simple Membership is initialized only once per app startLazyInitializer.EnsureInitialized(ref _initializer ref _isInitialized ref _initializerLock);// To let users of this site log in using their accounts from other sites such as Microsoft Facebook and Twitter// you must update this site. For more information visit http://go.microsoft.com/fwlink/?LinkID=252166//OAuthWebSecurity.RegisterMicrosoftClient(//clientId: ""//clientSecret: "");//OAuthWebSecurity.RegisterTwitterClient(//consumerKey: ""//consumerSecret: "");//OAuthWebSecurity.RegisterFacebookClient(//appId: ""//appSecret: "");//OAuthWebSecurity.RegisterGoogleClient();}private class SimpleMembershipInitializer{public SimpleMembershipInitializer(){Database.SetInitializer&lt;UsersContext&gt;(null);try{using (var context = new UsersContext()){if (!context.Database.Exists()){// Create the SimpleMembership database without Entity Framework migration schema((IObjectContextAdapter)context).ObjectContext.CreateDatabase();}}WebSecurity.InitializeDatabaseConnection("DefaultConnection" "UserProfile" "UserId" "UserName" autoCreateTables: true);}catch (Exception ex){throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information please see http://go.microsoft.com/fwlink/?LinkId=256588" ex);}}}}
how return json object web api controller,i used below code my asp.net controller return json object my ajax javascriptpublic jsonresult mymethod return json object you could define new classreturn json new success true errormessage success return exception jquery ajax ajax type post url url data searchsuccess function data show json properties from controller success false show exception message from controller data.success alert data.message display success else alert data.message display exception error function xmlhttprequest textstatus errorthrown alert error xmlhttprequest.responsetext datatype json how can done web api controller can you give me some examples url reference.thanks regards,ASP.NET Web API works with a little bit different philosophy. You should return just an entity (or set of entities) and it is up to content negotiation mechanism to return it to the client in the format which he has requested. You can read more about content negotiation here:Everything you want to know about ASP.NET Web API content negotiationYou can of course bypass the content negiotiation by returning a HttpResponseMessage. In this case yo need to serialize the object into JSON yourself (basics of this approach are also described in the article mentioned above).
drawing charts asp.net mvc 4 razor c web sites closed,possible draw charts curves histogram circle using c via asp.net mvc 4 razor i'm trying make some graphics from data extracted from my database i can't find how any suggestions please thanks lot,When you want to display your data in graphical form you can use Chart helper. The Chart helper can render an image that displays data in a variety of chart types.You can create a view having razor code for chart as follows(lets say its MyChart.cshtml).Bar chart from Array with theme@{var myChart = new Chart(width: 600 height: 400 theme: ChartTheme.Green).AddTitle("Chart Title").AddSeries(name: "ChartTitle"xValue: new[] {  "Col1" "Col2" "Col3" "Col4" "Col5" }yValues: new[] { "2" "6" "4" "5" "3" }).Write();}Pie chart from Array@{var myChart = new Chart(width: 600 height: 400 theme: ChartTheme.Green).AddTitle("Chart Title").AddSeries(name: "ChartTitle"chartType: "Pie"xValue: new[] {  "Col1" "Col2" "Col3" "Col4" "Col5" }yValues: new[] { "2" "6" "4" "5" "3" }).Write();}Pie chart from Array with theme@{var myChart = new Chart(width: 600 height: 400).AddTitle("Chart Title").AddSeries(name: "ChartTitle"chartType: "Pie"xValue: new[] {  "Col1" "Col2" "Col3" "Col4" "Col5" }yValues: new[] { "2" "6" "4" "5" "3" }).Write();}Bar Chart Using DB Query @{var db = Database.Open("DBName");var data = db.Query("SELECT Col1 Col2 FROM Table");var myChart = new Chart(width: 600 height: 400).AddTitle("Chart Title").DataBindTable(dataSource: data xField: "Col1").Write();}You can use these chart views/PartialView where ever required as a src of image.ex.&lt;html&gt;&lt;body&gt; &lt;img src="MyChart.cshtml" /&gt; &lt;!-- or &lt;img src='@Url.Action("Controler""ActionNameOfChartRenderingView")' /&gt;--&gt;&lt;body&gt;&lt;html&gt;Chart Theams  Vanilla   Displays redcolumns on a white background. Blue Displays blue   columns on a blue gradient background.Green Displays blue   columns on a green gradient background. YellowDisplays orange columns on a yellow gradient background. Vanilla3D Displays 3-D red columns on a white background.SeriesChartType enumeration supports the following:Area BarBoxPlotBubbleCandlestickColumnDoughnutErrorBarFastLineFastPointFunnelKagiLinePiePointPointAndFigurePolarPyramidRadarRangeRangeBarRangeColumnRenkoSplineSplineAreaSplineRangeStackedAreaStackedArea100StackedBarStackedBar100StackedColumnStackedColumn100StepLineStockThreeLineBreakThis is the list of names that you can pass as strings to the Chart helper in a Razor page. This is Helpernamespace System.Web.Helpers{public class Chart{public Chart(int width int height string template = null string templatePath = null);public string FileName { get; }public int Height { get; }public int Width { get; }public Chart AddLegend(string title = null string name = null);public Chart AddSeries(string name = null string chartType = "Column" string chartArea = null string axisLabel = null string legend = null int markerStep = 1 IEnumerable xValue = null string xField = null IEnumerable yValues = null string yFields = null);public Chart AddTitle(string text = null string name = null);public Chart DataBindCrossTable(IEnumerable dataSource string groupByField string xField string yFields string otherFields = null string pointSortOrder = "Ascending");public Chart DataBindTable(IEnumerable dataSource string xField = null);public byte[] GetBytes(string format = "jpeg");public static Chart GetFromCache(string key);public Chart Save(string path string format = "jpeg");public string SaveToCache(string key = null int minutesToCache = 20 bool slidingExpiration = true);public Chart SaveXml(string path);public Chart SetXAxis(string title = "" double min = 0 double max = 0.0 / 0.0);public Chart SetYAxis(string title = "" double min = 0 double max = 0.0 / 0.0);public WebImage ToWebImage(string format = "jpeg");public Chart Write(string format = "jpeg");public static Chart WriteFromCache(string key string format = "jpeg");}}Hope this will help you.
how can i use data annotations attribute classes fail empty strings forms,i trying require text input field form which implies needs something form however adding required tag my model wasn't working specifically look user name property public class columnwidthmetadata displayname column name required public string colname get set displayname primary key public int pkey get set displayname user name required public string username get set displayname column width required public int width get set allows empty strings get past model validation eventually database error thrown when attempts insert null value user name.how can i change attributes so do what seem like should do,I'd implement a new validation attribute like this and apply it to my model.public class RequiredNotEmptyAttribute : RequiredAttribute{public override bool IsValid(object value){if(value is string) return String.IsNullOrEmpty((string)value);return base.IsValid(value);}}This will only work on the server side (client side will still only check for null).
how do i configure mvc 39 s style bundling order,my web app using large icon set jquery ui jqgrid.in order easily maintain changes css accommodate larger icons when upgrading jquery ui jqgrid i have separate css file where i have bunch overrides.as you can imagine override file must included after jquery ui stylesheet jqgrid style sheet.i put all my stylesheets bundle like sobundles.add new stylebundle content dark hive allstyles include content dark hive jquery ui-1.8.23.custom css content ui.jqgrid.css content jquery ui fixes.css content icons.css content site.css being rendered like so lt link href content dark hive jquery ui-1.8.23.custom css rel stylesheet gt lt link href content jquery ui fixes.css rel stylesheet gt lt link href content ui.jqgrid.css rel stylesheet gt lt link href content icons.css rel stylesheet gt lt link href content site.css rel stylesheet gt how can i configure my bundle render correct order updateok dumb worked.no matter what i did files would always render incorrectly so i tried something stupid added jquery ui fixes.css first jquery ui-1.8.23.custom css last.suddenly my order is&lt link href content jquery ui fixes.css rel stylesheet gt lt link href content dark hive jquery ui-1.8.23.custom css rel stylesheet gt lt link href content ui.jqgrid.css rel stylesheet gt lt link href content icons.css rel stylesheet gt lt link href content site.css rel stylesheet gt i renamed my javascript file jqueryuifixes.css now order preserved lower js files.i m thinking stylesheet has name gets prioritized first some reason order maintained other files it.if anyone can explain i'll give them check,You can create your custom bundler and override OrderFiles methodpublic class CustomBundleOrderer : IBundleOrderer{public IEnumerable&lt;FileInfo&gt; OrderFiles(BundleContext context IEnumerable&lt;FileInfo&gt; files){return files;}}then pass your css files in the order you would like them to be bundledvar bundle = new StyleBundle("~/Content/dark-hive/allstyles"){Orderer = new CustomBundleOrderer()};bundle.Include("~/Content/dark-hive/jquery-ui-1.8.23.custom.css""~/Content/ui.jqgrid.css""~/Content/jquery-ui-fixes.css""~/Content/icons.css""~/Content/site.css");bundles.Add(bundle);
server side redirection after jquery ajax call asp.net mvc 4,i am sending login information from jquery ajax call mvc 4 controller post url data function response response invalidlogin show invalid login else response error show error else redirecting main page from here time being window.location.replace http localhost 1378/dashboard index login successful i want redirect user from server side appropriate page basis user type login fails string sent back user httppost public actionresult index loginmodel logindata login fails return json invalidlogin jsonrequestbehavior.allowget else i want redirect another controller view action depending user type problems method returns actionresult i'm getting error all code paths return value.if i use void i cannot return anything.even i use void return i am failing redirect other controller view due asynchronous nature jquery ajax calls.are any techniques handle scenarios,This help me.return JavaScript("window.location = '/'");Ref. linkHow to get an ASP.NET MVC Ajax response to redirect to new page...
handling singular plural controllers routes,i'm little confused how i should handle singular plural routes controllers my web application.the website simple quotes site think einstein shakespeare etc insurance within project i have controller called quotecontroller controller name singular so does mean controller should only handle display single quotes ie quote love battlefield-1do i need another controller display multiple quotes plural example quotes would default most recent quotes new quotes shakespeare quotes popularis convention good practice have separate controllers singular plural routes i hope makes sense,Just because the default controllers of asp-mvc have singular names it doesn't mean you should implement singular form for all your controllers. The correct answer is: it depends on the quantity of the entity that your controller represents. Singular example the AccountController is singular because it represents actions (action method) pertaining to a single account only.Plural If your controller contains at least one action method that handles multiple entities at a single transaction. Example plural formatusers/update/3The route above makes you think you are editing all users which does not makes sense if you read it like a sentence. However if you read your route like query it will make much more sense. If we think about it a route IS a query: {entities}/{action}/{parameter} looks like a query to me.users/ shorthand of users/all reads "select all users table"users/123 reads "select single entity from users table"users/update/123 reads "update single entity from users table"Major sites use plural format see sample belowstackoverflow.com/questions  &lt;- list of questions   (multiple)stackoverflow.com/questions/18570158 &lt;- individual question (single)stackoverflow.com/questions/ask  &lt;- new question(single)stackoverflow.com/users&lt;- display list of users (multple)stackoverflow.com/users/114403 &lt;- individual user   (single)asp.net/mvc/tutorials&lt;- display list of tutorials (multiple) asp.net/mvc/tutorials/mvc-5  &lt;- individual tutorial   (single)facebook.com/messages/ &lt;- Display list of messages (multiple)facebook.com/messages/new  &lt;- Create a single message  (single)facebook.com/messages/john &lt;- view individual messages (multiple)I believe that English grammar should be strictly incorporated in every programming aspect. It reads more natural and leads to good code hygiene.
